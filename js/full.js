(function(d,f){function b(){return!0}function i(){return!1}var e=d.document;e.createElement("video");e.createElement("audio");var g=function(c,h,d){if("string"==typeof c){0===c.indexOf("#")&&(c=c.slice(1));if(a.players[c])return a.players[c];c=a.el(c)}if(!c||!c.nodeName)throw new TypeError("The element or ID supplied is not valid. (VideoJS)");return c.player||new a.Player(c,h,d)},a=g;g.players={};g.options={techOrder:["html5","flash"],html5:{},flash:{swf:"http://vjs.zencdn.net/c/video-js.swf"},width:"auto",
height:"auto",defaultVolume:0,components:{posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}}};a.options.flash.swf="http://vjs.zencdn.net/c/video-js.swf";a.merge=function(c,a,d){a||(a={});for(var b in a)if(a.hasOwnProperty(b)&&(!d||!c.hasOwnProperty(b)))c[b]=a[b];return c};a.extend=function(c){this.merge(this,c,!0)};a.extend({tech:{},controlSets:{},isIE:function(){return!+"\v1"},isFF:function(){return!!a.ua.match("Firefox")},isIPad:function(){return null!==navigator.userAgent.match(/iPad/i)},
isIPhone:function(){return null!==navigator.userAgent.match(/iPhone/i)},isIOS:function(){return g.isIPhone()||g.isIPad()},iOSVersion:function(){var c=navigator.userAgent.match(/OS (\d+)_/i);if(c&&c[1])return c[1]},isAndroid:function(){return null!==navigator.userAgent.match(/Android.*AppleWebKit/i)},androidVersion:function(){var c=navigator.userAgent.match(/Android (\d+)\./i);if(c&&c[1])return c[1]},testVid:e.createElement("video"),ua:navigator.userAgent,support:{},each:function(c,a){if(c&&0!==c.length)for(var d=
0,b=c.length;d<b;d++)a.call(this,c[d],d)},eachProp:function(c,a){if(c)for(var d in c)c.hasOwnProperty(d)&&a.call(this,d,c[d])},el:function(c){return e.getElementById(c)},createElement:function(c,a){var d=e.createElement(c),b;for(b in a)a.hasOwnProperty(b)&&(-1!==b.indexOf("-")?d.setAttribute(b,a[b]):d[b]=a[b]);return d},insertFirst:function(c,a){a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},addClass:function(c,a){-1==(" "+c.className+" ").indexOf(" "+a+" ")&&(c.className=""===c.className?
a:c.className+" "+a)},removeClass:function(c,a){if(-1!=c.className.indexOf(a)){var d=c.className.split(" ");d.splice(d.indexOf(a),1);c.className=d.join(" ")}},remove:function(c,a){if(a){var d=a.indexOf(c);if(-1!=d)return a.splice(d,1)}},blockTextSelection:function(){e.body.focus();e.onselectstart=function(){return!1}},unblockTextSelection:function(){e.onselectstart=function(){return!0}},formatTime:function(c,a){var a=a||c,d=Math.floor(c%60),b=Math.floor(c/60%60),e=Math.floor(c/3600),g=Math.floor(a/
60%60),f=Math.floor(a/3600),e=0<e||0<f?e+":":"";return e+(((e||10<=g)&&10>b?"0"+b:b)+":")+(10>d?"0"+d:d)},uc:function(c){return c.charAt(0).toUpperCase()+c.slice(1)},getRelativePosition:function(c,h){return Math.max(0,Math.min(1,(c-a.findPosX(h))/h.offsetWidth))},getComputedStyleValue:function(c,a){return d.getComputedStyle(c,null).getPropertyValue(a)},trim:function(c){return c.toString().replace(/^\s+/,"").replace(/\s+$/,"")},round:function(c,a){a||(a=0);return Math.round(c*Math.pow(10,a))/Math.pow(10,
a)},isEmpty:function(c){for(var a in c)return!1;return!0},createTimeRange:function(c,a){return{length:1,start:function(){return c},end:function(){return a}}},cache:{},guid:1,expando:"vdata"+(new Date).getTime(),getData:function(c){var h=c[a.expando];h||(h=c[a.expando]=a.guid++,a.cache[h]={});return a.cache[h]},removeData:function(c){var h=c[a.expando];if(h){delete a.cache[h];try{delete c[a.expando]}catch(d){c.removeAttribute?c.removeAttribute(a.expando):c[a.expando]=null}}},proxy:function(c,h,d){h.guid||
(h.guid=a.guid++);var b=function(){return h.apply(c,arguments)};b.guid=d?d+"_"+h.guid:h.guid;return b},get:function(c,h,b){var e=0==c.indexOf("file:")||0==d.location.href.indexOf("file:")&&-1==c.indexOf("http:");"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(h){}throw Error("This browser does not support XMLHttpRequest.");
});var g=new XMLHttpRequest;try{g.open("GET",c)}catch(f){return a.log("VideoJS XMLHttpRequest (open)",f),!1}g.onreadystatechange=a.proxy(this,function(){4==g.readyState&&(200==g.status||e&&0==g.status?h(g.responseText):b&&b())});try{g.send()}catch(i){a.log("VideoJS XMLHttpRequest (send)",i),b&&b(i)}},setLocalStorage:function(c,h){var b=d.localStorage||!1;if(b)try{b[c]=h}catch(e){22==e.code||1014==e.code?a.log("LocalStorage Full (VideoJS)",e):a.log("LocalStorage Error (VideoJS)",e)}},getAbsoluteURL:function(c){c.match(/^https?:\/\//)||
(c=a.createElement("div",{innerHTML:'<a href="'+c+'">x</a>'}).firstChild.href);return c}});a.log=function(){a.log.history=a.log.history||[];a.log.history.push(arguments);if(d.console){arguments.callee=arguments.callee.caller;var c=[].slice.call(arguments);"object"===typeof console.log?a.log.apply.call(console.log,console,c):console.log.apply(console,c)}};var n;try{console.log(),n=d.console}catch(l){n=d.console={}}(function(c){function a(){}for(var d="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),
b;b=d.pop();)c[b]=c[b]||a})(n);a.findPosX="getBoundingClientRect"in e.documentElement?function(c){var a;try{a=c.getBoundingClientRect()}catch(b){}if(!a)return 0;c=e.body;return a.left+(d.pageXOffset||c.scrollLeft)-(e.documentElement.clientLeft||c.clientLeft||0)}:function(c){for(var a=c.offsetLeft;c=obj.offsetParent;)c.className.indexOf("video-js"),a+=c.offsetLeft;return a};(function(){var c=!1,h=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;a.Class=function(){};a.Class.extend=function(a){function d(){if(!c&&
this.init)return this.init.apply(this,arguments);if(!c)return arguments.callee.prototype.init()}var b=this.prototype;c=!0;var e=new this;c=!1;for(var g in a)e[g]="function"==typeof a[g]&&"function"==typeof b[g]&&h.test(a[g])?function(c,a){return function(){var h=this._super;this._super=b[c];var d=a.apply(this,arguments);this._super=h;return d}}(g,a[g]):a[g];d.prototype=e;d.constructor=d;d.extend=arguments.callee;return d}})();a.Component=a.Class.extend({init:function(c,h){this.player=c;h=this.options=
a.merge(this.options||{},h);this.el=h.el?h.el:this.createElement();this.initComponents()},destroy:function(){},createElement:function(c,h){return a.createElement(c||"div",h)},buildCSSClass:function(){return""},initComponents:function(){var c=this.options;c&&c.components&&this.eachProp(c.components,function(c,a){var d=this.proxy(function(){this[c]=this.addComponent(c,a)});if(a.loadEvent)this.one(a.loadEvent,d);else d()})},addComponent:function(c,h){var d;"string"==typeof c?(h=h||{},d=h.componentClass||
a.uc(c),d=new a[d](this.player||this,h)):d=c;this.el.appendChild(d.el);return d},removeComponent:function(c){this.el.removeChild(c.el)},show:function(){this.el.style.display="block"},hide:function(){this.el.style.display="none"},fadeIn:function(){this.removeClass("vjs-fade-out");this.addClass("vjs-fade-in")},fadeOut:function(){this.removeClass("vjs-fade-in");this.addClass("vjs-fade-out")},lockShowing:function(){var c=this.el.style;c.display="block";c.opacity=1;c.visiblity="visible"},unlockShowing:function(){var c=
this.el.style;c.display="";c.opacity="";c.visiblity=""},addClass:function(c){a.addClass(this.el,c)},removeClass:function(c){a.removeClass(this.el,c)},addEvent:function(c,h){return a.addEvent(this.el,c,a.proxy(this,h))},removeEvent:function(c,h){return a.removeEvent(this.el,c,h)},triggerEvent:function(c,h){return a.triggerEvent(this.el,c,h)},one:function(c,h){a.one(this.el,c,a.proxy(this,h))},ready:function(c){if(!c)return this;this.isReady?c.call(this):(this.readyQueue===f&&(this.readyQueue=[]),this.readyQueue.push(c));
return this},triggerReady:function(){this.isReady=!0;this.readyQueue&&0<this.readyQueue.length&&(this.each(this.readyQueue,function(c){c.call(this)}),this.readyQueue=[],this.triggerEvent("ready"))},each:function(c,h){a.each.call(this,c,h)},eachProp:function(c,h){a.eachProp.call(this,c,h)},extend:function(c){a.merge(this,c)},proxy:function(c,h){return a.proxy(this,c,h)}});a.Control=a.Component.extend({buildCSSClass:function(){return"vjs-control "+this._super()}});a.ControlBar=a.Component.extend({options:{loadEvent:"play",
components:{playToggle:{},fullscreenToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},volumeControl:{},muteToggle:{}}},init:function(c,a){this._super(c,a);c.addEvent("play",this.proxy(function(){this.fadeIn();this.player.addEvent("mouseover",this.proxy(this.fadeIn));this.player.addEvent("mouseout",this.proxy(this.fadeOut))}))},createElement:function(){return a.createElement("div",{className:"vjs-controls"})},fadeIn:function(){this._super();
this.player.triggerEvent("controlsvisible")},fadeOut:function(){this._super();this.player.triggerEvent("controlshidden")},lockShowing:function(){this.el.style.opacity="1"}});a.Button=a.Control.extend({init:function(c,a){this._super(c,a);this.addEvent("click",this.onClick);this.addEvent("focus",this.onFocus);this.addEvent("blur",this.onBlur)},createElement:function(c,h){h=a.merge({className:this.buildCSSClass(),innerHTML:'<div><span class="vjs-control-text">'+(this.buttonText||"Need Text")+"</span></div>",
role:"button",tabIndex:0},h);return this._super(c,h)},onClick:function(){},onFocus:function(){a.addEvent(e,"keyup",a.proxy(this,this.onKeyPress))},onKeyPress:function(c){if(32==c.which||13==c.which)c.preventDefault(),this.onClick()},onBlur:function(){a.removeEvent(e,"keyup",a.proxy(this,this.onKeyPress))}});a.PlayButton=a.Button.extend({buttonText:"Play",buildCSSClass:function(){return"vjs-play-button "+this._super()},onClick:function(){this.player.play()}});a.PauseButton=a.Button.extend({buttonText:"Pause",
buildCSSClass:function(){return"vjs-pause-button "+this._super()},onClick:function(){this.player.pause()}});a.PlayToggle=a.Button.extend({buttonText:"Play",init:function(c,h){this._super(c,h);c.addEvent("play",a.proxy(this,this.onPlay));c.addEvent("pause",a.proxy(this,this.onPause))},buildCSSClass:function(){return"vjs-play-control "+this._super()},onClick:function(){this.player.paused()?this.player.play():this.player.pause()},onPlay:function(){a.removeClass(this.el,"vjs-paused");a.addClass(this.el,
"vjs-playing")},onPause:function(){a.removeClass(this.el,"vjs-playing");a.addClass(this.el,"vjs-paused")}});a.FullscreenToggle=a.Button.extend({buttonText:"Fullscreen",buildCSSClass:function(){return"vjs-fullscreen-control "+this._super()},onClick:function(){this.player.isFullScreen?this.player.cancelFullScreen():this.player.requestFullScreen()}});a.BigPlayButton=a.Button.extend({init:function(c,h){this._super(c,h);c.addEvent("play",a.proxy(this,this.hide));c.addEvent("ended",a.proxy(this,this.show))},
createElement:function(){return this._super("div",{className:"vjs-big-play-button",innerHTML:"<span></span>"})},onClick:function(){this.player.currentTime()&&this.player.currentTime(0);this.player.play()}});a.LoadingSpinner=a.Component.extend({init:function(c,h){this._super(c,h);c.addEvent("canplay",a.proxy(this,this.hide));c.addEvent("canplaythrough",a.proxy(this,this.hide));c.addEvent("playing",a.proxy(this,this.hide));c.addEvent("seeking",a.proxy(this,this.show));c.addEvent("error",a.proxy(this,
this.show));c.addEvent("waiting",a.proxy(this,this.show))},createElement:function(){var c,a;"string"==typeof this.player.el.style.WebkitBorderRadius||"string"==typeof this.player.el.style.MozBorderRadius||"string"==typeof this.player.el.style.KhtmlBorderRadius||"string"==typeof this.player.el.style.borderRadius?(c="vjs-loading-spinner",a="<div class='ball1'></div><div class='ball2'></div><div class='ball3'></div><div class='ball4'></div><div class='ball5'></div><div class='ball6'></div><div class='ball7'></div><div class='ball8'></div>"):
(c="vjs-loading-spinner-fallback",a="");return this._super("div",{className:c,innerHTML:a})}});a.CurrentTimeDisplay=a.Component.extend({init:function(c,h){this._super(c,h);c.addEvent("timeupdate",a.proxy(this,this.updateContent))},createElement:function(){var c=this._super("div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.content=a.createElement("div",{className:"vjs-current-time-display",innerHTML:"0:00"});c.appendChild(a.createElement("div").appendChild(this.content));return c},
updateContent:function(){var c=this.player.scrubbing?this.player.values.currentTime:this.player.currentTime();this.content.innerHTML=a.formatTime(c,this.player.duration())}});a.DurationDisplay=a.Component.extend({init:function(c,h){this._super(c,h);c.addEvent("timeupdate",a.proxy(this,this.updateContent))},createElement:function(){var c=this._super("div",{className:"vjs-duration vjs-time-controls vjs-control"});this.content=a.createElement("div",{className:"vjs-duration-display",innerHTML:"0:00"});
c.appendChild(a.createElement("div").appendChild(this.content));return c},updateContent:function(){this.player.duration()&&(this.content.innerHTML=a.formatTime(this.player.duration()))}});a.TimeDivider=a.Component.extend({createElement:function(){return this._super("div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})}});a.RemainingTimeDisplay=a.Component.extend({init:function(c,h){this._super(c,h);c.addEvent("timeupdate",a.proxy(this,this.updateContent))},createElement:function(){var c=
this._super("div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.content=a.createElement("div",{className:"vjs-remaining-time-display",innerHTML:"-0:00"});c.appendChild(a.createElement("div").appendChild(this.content));return c},updateContent:function(){this.player.duration()&&(this.content.innerHTML="-"+a.formatTime(this.player.remainingTime()))}});a.Slider=a.Component.extend({init:function(c,h){this._super(c,h);c.addEvent(this.playerEvent,a.proxy(this,this.update));this.addEvent("mousedown",
this.onMouseDown);this.addEvent("focus",this.onFocus);this.addEvent("blur",this.onBlur);this.player.addEvent("controlsvisible",this.proxy(this.update));this.update()},createElement:function(c,h){h=a.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},h);return this._super(c,h)},onMouseDown:function(c){c.preventDefault();a.blockTextSelection();a.addEvent(e,"mousemove",a.proxy(this,this.onMouseMove));a.addEvent(e,"mouseup",a.proxy(this,this.onMouseUp));this.onMouseMove(c)},
onMouseUp:function(){a.unblockTextSelection();a.removeEvent(e,"mousemove",this.onMouseMove,!1);a.removeEvent(e,"mouseup",this.onMouseUp,!1);this.update()},update:function(){var c,h=this.getPercent();handle=this.handle;bar=this.bar;isNaN(h)&&(h=0);c=h;if(handle){c=this.el.offsetWidth;var d=handle.el.offsetWidth;c=d?d/c:0;adjustedProgress=h*(1-c);c=adjustedProgress+c/2;handle.el.style.left=a.round(100*adjustedProgress,2)+"%"}bar.el.style.width=a.round(100*c,2)+"%"},calculateDistance:function(c){var h=
this.el,d=a.findPosX(h),h=h.offsetWidth,b=this.handle;b&&(b=b.el.offsetWidth,d+=b/2,h-=b);return Math.max(0,Math.min(1,(c.pageX-d)/h))},onFocus:function(){a.addEvent(e,"keyup",a.proxy(this,this.onKeyPress))},onKeyPress:function(c){37==c.which?(c.preventDefault(),this.stepBack()):39==c.which&&(c.preventDefault(),this.stepForward())},onBlur:function(){a.removeEvent(e,"keyup",a.proxy(this,this.onKeyPress))}});a.ProgressControl=a.Component.extend({options:{components:{seekBar:{}}},createElement:function(){return this._super("div",
{className:"vjs-progress-control vjs-control"})}});a.SeekBar=a.Slider.extend({options:{components:{loadProgressBar:{},bar:{componentClass:"PlayProgressBar"},handle:{componentClass:"SeekHandle"}}},playerEvent:"timeupdate",init:function(c,a){this._super(c,a)},createElement:function(){return this._super("div",{className:"vjs-progress-holder"})},getPercent:function(){return this.player.currentTime()/this.player.duration()},onMouseDown:function(c){this._super(c);this.player.scrubbing=!0;this.videoWasPlaying=
!this.player.paused();this.player.pause()},onMouseMove:function(c){c=this.calculateDistance(c)*this.player.duration();c==this.player.duration()&&(c-=0.1);this.player.currentTime(c)},onMouseUp:function(c){this._super(c);this.player.scrubbing=!1;this.videoWasPlaying&&this.player.play()},stepForward:function(){this.player.currentTime(this.player.currentTime()+1)},stepBack:function(){this.player.currentTime(this.player.currentTime()-1)}});a.LoadProgressBar=a.Component.extend({init:function(c,h){this._super(c,
h);c.addEvent("progress",a.proxy(this,this.update))},createElement:function(){return this._super("div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})},update:function(){this.el.style&&(this.el.style.width=a.round(100*this.player.bufferedPercent(),2)+"%")}});a.PlayProgressBar=a.Component.extend({createElement:function(){return this._super("div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})}});a.SeekHandle=
a.Component.extend({createElement:function(){return this._super("div",{className:"vjs-seek-handle",innerHTML:'<span class="vjs-control-text">00:00</span>'})}});a.VolumeControl=a.Component.extend({options:{components:{volumeBar:{}}},createElement:function(){return this._super("div",{className:"vjs-volume-control vjs-control"})}});a.VolumeBar=a.Slider.extend({options:{components:{bar:{componentClass:"VolumeLevel"},handle:{componentClass:"VolumeHandle"}}},playerEvent:"volumechange",createElement:function(){return this._super("div",
{className:"vjs-volume-bar"})},onMouseMove:function(c){this.player.volume(this.calculateDistance(c))},getPercent:function(){return this.player.volume()},stepForward:function(){this.player.volume(this.player.volume()+0.1)},stepBack:function(){this.player.volume(this.player.volume()-0.1)}});a.VolumeLevel=a.Component.extend({createElement:function(){return this._super("div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})}});a.VolumeHandle=a.Component.extend({createElement:function(){return this._super("div",
{className:"vjs-volume-handle",innerHTML:'<span class="vjs-control-text"></span>'})}});a.MuteToggle=a.Button.extend({init:function(c,h){this._super(c,h);c.addEvent("volumechange",a.proxy(this,this.update))},createElement:function(){return this._super("div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},onClick:function(){this.player.muted(this.player.muted()?!1:!0)},update:function(){var c=this.player.volume(),h=3;0==c||this.player.muted()?
h=0:0.33>c?h=1:0.67>c&&(h=2);a.each.call(this,[0,1,2,3],function(c){a.removeClass(this.el,"vjs-vol-"+c)});a.addClass(this.el,"vjs-vol-"+h)}});a.PosterImage=a.Button.extend({init:function(c,h){this._super(c,h);this.player.options.poster||this.hide();c.addEvent("play",a.proxy(this,this.hide))},createElement:function(){return a.createElement("img",{className:"vjs-poster",src:this.player.options.poster,tabIndex:-1})},onClick:function(){this.player.play()}});a.Menu=a.Component.extend({init:function(c,
a){this._super(c,a)},addItem:function(c){this.addComponent(c);c.addEvent("click",this.proxy(function(){this.unlockShowing()}))},createElement:function(){return this._super("ul",{className:"vjs-menu"})}});a.MenuItem=a.Button.extend({init:function(c,a){this._super(c,a);a.selected&&this.addClass("vjs-selected")},createElement:function(c,h){return this._super("li",a.merge({className:"vjs-menu-item",innerHTML:this.options.label},h))},onClick:function(){this.selected(!0)},selected:function(c){c?this.addClass("vjs-selected"):
this.removeClass("vjs-selected")}});Array.prototype.indexOf||(Array.prototype.indexOf=function(c){if(void 0===this||null===this)throw new TypeError;var a=Object(this),d=a.length>>>0;if(0===d)return-1;var b=0;0<arguments.length&&(b=Number(arguments[1]),b!==b?b=0:0!==b&&(b!==1/0&&b!==-(1/0))&&(b=(0<b||-1)*Math.floor(Math.abs(b))));if(b>=d)return-1;for(b=0<=b?b:Math.max(d-Math.abs(b),0);b<d;b++)if(b in a&&a[b]===c)return b;return-1});a.extend({addEvent:function(c,h,d){var b=a.getData(c),g;if(b&&!b.handler)b.handler=
function(h){var h=a.fixEvent(h),d=a.getData(c).events[h.type];if(d){var b=[];a.each(d,function(c,a){b[a]=c});for(var d=0,k=b.length;d<k;d++)b[d].call(c,h)}};if(!b.events)b.events={};g=b.events[h];if(!g){g=b.events[h]=[];e.addEventListener?c.addEventListener(h,b.handler,false):e.attachEvent&&c.attachEvent("on"+h,b.handler)}if(!d.guid)d.guid=a.guid++;g.push(d)},removeEvent:function(c,h,d){var b=a.getData(c);if(b.events)if(h){if(b=b.events[h]){if(d&&d.guid)for(var e=0;e<b.length;e++)b[e].guid===d.guid&&
b.splice(e--,1);a.cleanUpEvents(c,h)}}else for(h in b.events)a.cleanUpEvents(c,h)},cleanUpEvents:function(c,h){var b=a.getData(c);if(b.events[h].length===0){delete b.events[h];e.removeEventListener?c.removeEventListener(h,b.handler,false):e.detachEvent&&c.detachEvent("on"+h,b.handler)}if(a.isEmpty(b.events)){delete b.events;delete b.handler}a.isEmpty(b)&&a.removeData(c)},fixEvent:function(c){if(c[a.expando])return c;for(var h=c,c=new a.Event(h),b=a.Event.props.length,d;b;){d=a.Event.props[--b];c[d]=
h[d]}if(!c.target)c.target=c.srcElement||e;if(c.target.nodeType===3)c.target=c.target.parentNode;if(!c.relatedTarget&&c.fromElement)c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement;if(c.pageX==null&&c.clientX!=null){b=c.target.ownerDocument||e;h=b.documentElement;b=b.body;c.pageX=c.clientX+(h&&h.scrollLeft||b&&b.scrollLeft||0)-(h&&h.clientLeft||b&&b.clientLeft||0);c.pageY=c.clientY+(h&&h.scrollTop||b&&b.scrollTop||0)-(h&&h.clientTop||b&&b.clientTop||0)}if(c.which==null&&(c.charCode!=
null||c.keyCode!=null))c.which=c.charCode!=null?c.charCode:c.keyCode;if(!c.metaKey&&c.ctrlKey)c.metaKey=c.ctrlKey;if(!c.which&&c.button!==f)c.which=c.button&1?1:c.button&2?3:c.button&4?2:0;return c},triggerEvent:function(c,h){var b=a.getData(c),d=h.type||h,e;if(b)e=b.handler;h=typeof h==="object"?h[a.expando]?h:new a.Event(d,h):new a.Event(d);h.type=d;e&&e.call(c,h);h.result=f;h.target=c},one:function(c,b,d){a.addEvent(c,b,function(){a.removeEvent(c,b,arguments.callee);d.apply(this,arguments)})}});
a.Event=function(c,h){if(c&&c.type){this.originalEvent=c;this.type=c.type;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===false||c.getPreventDefault&&c.getPreventDefault()?b:i}else this.type=c;h&&a.merge(this,h);this.timeStamp=(new Date).getTime();this[a.expando]=true};a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=b;var c=this.originalEvent;if(c)c.preventDefault?c.preventDefault():c.returnValue=false},stopPropagation:function(){this.isPropagationStopped=b;var c=
this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=b;this.stopPropagation()},isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i};a.Event.props="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");
var m;m||(m={});(function(){var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(typeof m.parse!=="function")m.parse=function(a,b){function d(c,a){var h,e,g=c[a];if(g&&typeof g==="object")for(h in g)if(Object.prototype.hasOwnProperty.call(g,h)){e=d(g,h);e!==f?g[h]=e:delete g[h]}return b.call(c,a,g)}var e,a=""+a;c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){e=eval("("+a+")");return typeof b==="function"?d({"":e},""):e}throw new SyntaxError("JSON.parse");}})();a.Player=a.Component.extend({init:function(c,b,d){this.tag=c;var e=this.el=a.createElement("div"),g=this.options={},f=g.width=c.getAttribute("width"),i=g.height=c.getAttribute("height"),f=f||300,i=i||150;c.player=e.player=this;this.ready(d);c.parentNode.insertBefore(e,c);e.appendChild(c);
e.id=this.id=c.id;e.className=c.className;c.id=c.id+"_html5_api";c.className="vjs-tech";a.players[e.id]=this;e.setAttribute("width",f);e.setAttribute("height",i);e.style.width=f+"px";e.style.height=i+"px";c.removeAttribute("width");c.removeAttribute("height");a.merge(g,a.options);a.merge(g,this.getVideoTagSettings());a.merge(g,b);c.removeAttribute("controls");c.removeAttribute("poster");if(c.hasChildNodes()){b=0;for(d=c.childNodes;b<d.length;b++)(d[b].nodeName=="SOURCE"||d[b].nodeName=="TRACK")&&
c.removeChild(d[b])}this.values={};this.addClass("vjs-paused");this.addEvent("ended",this.onEnded);this.addEvent("play",this.onPlay);this.addEvent("pause",this.onPause);this.addEvent("progress",this.onProgress);this.addEvent("error",this.onError);g.controls&&this.ready(function(){this.initComponents()});this.textTracks=[];g.tracks&&g.tracks.length>0&&this.addTextTracks(g.tracks);if(!g.sources||g.sources.length==0){b=0;for(d=g.techOrder;b<d.length;b++){c=d[b];if(a[c].isSupported()){this.loadTech(c);
break}}}else this.src(g.sources)},values:{},destroy:function(){this.stopTrackingProgress();this.stopTrackingCurrentTime();a.players[this.id]=null;delete a.players[this.id];this.tech.destroy();this.el.parentNode.removeChild(this.el)},createElement:function(){},getVideoTagSettings:function(){var c={sources:[],tracks:[]};c.src=this.tag.getAttribute("src");c.controls=this.tag.getAttribute("controls")!==null;c.poster=this.tag.getAttribute("poster");c.preload=this.tag.getAttribute("preload");c.autoplay=
this.tag.getAttribute("autoplay")!==null;c.loop=this.tag.getAttribute("loop")!==null;c.muted=this.tag.getAttribute("muted")!==null;if(this.tag.hasChildNodes())for(var a,b=0,d=this.tag.childNodes;b<d.length;b++){a=d[b];a.nodeName=="SOURCE"&&c.sources.push({src:a.getAttribute("src"),type:a.getAttribute("type"),media:a.getAttribute("media"),title:a.getAttribute("title")});a.nodeName=="TRACK"&&c.tracks.push({src:a.getAttribute("src"),kind:a.getAttribute("kind"),srclang:a.getAttribute("srclang"),label:a.getAttribute("label"),
"default":a.getAttribute("default")!==null,title:a.getAttribute("title")})}return c},loadTech:function(c,b){if(this.tech)this.unloadTech();else if(c!="html5"&&this.tag){this.el.removeChild(this.tag);this.tag=false}this.techName=c;this.isReady=false;var d=a.merge({source:b,parentEl:this.el},this.options[c]);if(b){if(b.src==this.values.src&&this.values.currentTime>0)d.startTime=this.values.currentTime;this.values.src=b.src}this.tech=new a[c](this,d);this.tech.ready(function(){this.player.triggerReady();
this.support.progressEvent||this.player.manualProgressOn();this.support.timeupdateEvent||this.player.manualTimeUpdatesOn()})},unloadTech:function(){this.tech.destroy();this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();this.tech=false},manualProgressOn:function(){this.manualProgress=true;this.trackProgress();this.tech.addEvent("progress",function(){this.removeEvent("progress",arguments.callee);this.support.progressEvent=true;this.player.manualProgressOff()})},
manualProgressOff:function(){this.manualProgress=false;this.stopTrackingProgress()},trackProgress:function(){this.progressInterval=setInterval(a.proxy(this,function(){if(this.values.bufferEnd<this.buffered().end(0))this.triggerEvent("progress");else if(this.bufferedPercent()==1){this.stopTrackingProgress();this.triggerEvent("progress")}}),500)},stopTrackingProgress:function(){clearInterval(this.progressInterval)},manualTimeUpdatesOn:function(){this.manualTimeUpdates=true;this.addEvent("play",this.trackCurrentTime);
this.addEvent("pause",this.stopTrackingCurrentTime);this.tech.addEvent("timeupdate",function(){this.removeEvent("timeupdate",arguments.callee);this.support.timeupdateEvent=true;this.player.manualTimeUpdatesOff()})},manualTimeUpdatesOff:function(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.removeEvent("play",this.trackCurrentTime);this.removeEvent("pause",this.stopTrackingCurrentTime)},trackCurrentTime:function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=
setInterval(a.proxy(this,function(){this.triggerEvent("timeupdate")}),250)},stopTrackingCurrentTime:function(){clearInterval(this.currentTimeInterval)},onEnded:function(){if(this.options.loop){this.currentTime(0);this.play()}else{this.pause();this.currentTime(0);this.pause()}},onPlay:function(){a.removeClass(this.el,"vjs-paused");a.addClass(this.el,"vjs-playing")},onPause:function(){a.removeClass(this.el,"vjs-playing");a.addClass(this.el,"vjs-paused")},onProgress:function(){this.bufferedPercent()==
1&&this.triggerEvent("loadedalldata")},onError:function(c){a.log("Video Error",c)},techCall:function(c,b){if(this.tech.isReady)try{this.tech[c](b)}catch(d){a.log(d)}else this.tech.ready(function(){this[c](b)})},techGet:function(c){if(this.tech.isReady)try{return this.tech[c]()}catch(b){if(this.tech[c]===f)a.log("Video.js: "+c+" method not defined for "+this.techName+" playback technology.",b);else if(b.name=="TypeError"){a.log("Video.js: "+c+" unavailable on "+this.techName+" playback technology element.",
b);this.tech.isReady=false}else a.log(b)}},play:function(){this.techCall("play");return this},pause:function(){this.techCall("pause");return this},paused:function(){return this.techGet("paused")===false?false:true},currentTime:function(a){if(a!==f){this.values.lastSetCurrentTime=a;this.techCall("setCurrentTime",a);this.manualTimeUpdates&&this.triggerEvent("timeupdate");return this}return this.values.currentTime=this.techGet("currentTime")||0},duration:function(){return parseFloat(this.techGet("duration"))},
remainingTime:function(){return this.duration()-this.currentTime()},buffered:function(){var c=this.techGet("buffered"),b=this.values.bufferEnd=this.values.bufferEnd||0;if(c&&c.length>0&&c.end(0)!==b){b=c.end(0);this.values.bufferEnd=b}return a.createTimeRange(0,b)},bufferedPercent:function(){return this.duration()?this.buffered().end(0)/this.duration():0},volume:function(c){if(c!==f){c=Math.max(0,Math.min(1,parseFloat(c)));this.values.volume=c;this.techCall("setVolume",c);a.setLocalStorage("volume",
c);return this}c=parseFloat(this.techGet("volume"));return isNaN(c)?1:c},muted:function(a){if(a!==f){this.techCall("setMuted",a);return this}return this.techGet("muted")||false},width:function(a,b){if(a!==f){this.el.width=a;this.el.style.width=a+"px";b||this.triggerEvent("resize");return this}return parseInt(this.el.getAttribute("width"))},height:function(a){if(a!==f){this.el.height=a;this.el.style.height=a+"px";this.triggerEvent("resize");return this}return parseInt(this.el.getAttribute("height"))},
size:function(a,b){return this.width(a,true).height(b)},supportsFullScreen:function(){return this.techGet("supportsFullScreen")||false},requestFullScreen:function(){var c=a.support.requestFullScreen;this.isFullScreen=true;if(c){a.addEvent(e,c.eventName,this.proxy(function(){this.isFullScreen=e[c.isFullScreen];this.isFullScreen==false&&a.removeEvent(e,c.eventName,arguments.callee);this.triggerEvent("fullscreenchange")}));if(this.tech.support.fullscreenResize===false&&this.options.flash.iFrameMode!=
true){this.pause();this.unloadTech();a.addEvent(e,c.eventName,this.proxy(function(){a.removeEvent(e,c.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})}))}this.el[c.requestFn]()}else if(this.tech.supportsFullScreen()){this.triggerEvent("fullscreenchange");this.techCall("enterFullScreen")}else{this.triggerEvent("fullscreenchange");this.enterFullWindow()}return this},cancelFullScreen:function(){var c=a.support.requestFullScreen;this.isFullScreen=false;if(c){if(this.tech.support.fullscreenResize===
false&&this.options.flash.iFrameMode!=true){this.pause();this.unloadTech();a.addEvent(e,c.eventName,this.proxy(function(){a.removeEvent(e,c.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})}))}e[c.cancelFn]()}else{this.tech.supportsFullScreen()?this.techCall("exitFullScreen"):this.exitFullWindow();this.triggerEvent("fullscreenchange")}return this},enterFullWindow:function(){this.isFullWindow=true;this.docOrigOverflow=e.documentElement.style.overflow;a.addEvent(e,"keydown",
a.proxy(this,this.fullWindowOnEscKey));e.documentElement.style.overflow="hidden";a.addClass(e.body,"vjs-full-window");a.addClass(this.el,"vjs-fullscreen");this.triggerEvent("enterFullWindow")},fullWindowOnEscKey:function(a){a.keyCode==27&&(this.isFullScreen==true?this.cancelFullScreen():this.exitFullWindow())},exitFullWindow:function(){this.isFullWindow=false;a.removeEvent(e,"keydown",this.fullWindowOnEscKey);e.documentElement.style.overflow=this.docOrigOverflow;a.removeClass(e.body,"vjs-full-window");
a.removeClass(this.el,"vjs-fullscreen");this.triggerEvent("exitFullWindow")},selectSource:function(c){for(var b=0,d=this.options.techOrder;b<d.length;b++){var e=d[b],g=a[e];if(g.isSupported())for(var f=0,i=c;f<i.length;f++){var n=i[f];if(g.canPlaySource.call(this,n))return{source:n,tech:e}}}return false},src:function(c){if(c instanceof Array){var b=this.selectSource(c);if(b){c=b.source;b=b.tech;b==this.techName?this.src(c):this.loadTech(b,c)}else a.log("No compatible source and playback technology were found.")}else if(c instanceof
Object)a[this.techName].canPlaySource(c)?this.src(c.src):this.src([c]);else{this.values.src=c;if(this.isReady){this.techCall("src",c);this.options.preload=="auto"&&this.load();this.options.autoplay&&this.play()}else this.ready(function(){this.src(c)})}return this},load:function(){this.techCall("load");return this},currentSrc:function(){return this.techGet("currentSrc")||this.values.src||""},preload:function(a){if(a!==f){this.techCall("setPreload",a);this.options.preload=a;return this}return this.techGet("preload")},
autoplay:function(a){if(a!==f){this.techCall("setAutoplay",a);this.options.autoplay=a;return this}return this.techGet("autoplay",a)},loop:function(a){if(a!==f){this.techCall("setLoop",a);this.options.loop=a;return this}return this.techGet("loop")},controls:function(){return this.options.controls},poster:function(){return this.techGet("poster")},error:function(){return this.techGet("error")},ended:function(){return this.techGet("ended")}});(function(){var c,b,d,g;if(e.cancelFullscreen!==f){c="requestFullscreen";
b="exitFullscreen";d="fullscreenchange";g="fullScreen"}else a.each(["moz","webkit"],function(a){if((a!="moz"||e.mozFullScreenEnabled)&&e[a+"CancelFullScreen"]!==f){c=a+"RequestFullScreen";b=a+"CancelFullScreen";d=a+"fullscreenchange";g=a=="webkit"?a+"IsFullScreen":a+"FullScreen"}});if(c)a.support.requestFullScreen={requestFn:c,cancelFn:b,eventName:d,isFullScreen:g}})();a.PlaybackTech=a.Component.extend({init:function(){},onClick:function(){this.player.options.controls&&a.PlayToggle.prototype.onClick.call(this)}});
a.apiMethods="play pause paused currentTime setCurrentTime duration buffered volume setVolume muted setMuted width height supportsFullScreen enterFullScreen src load currentSrc preload setPreload autoplay setAutoplay loop setLoop error networkState readyState seeking initialTime startOffsetTime played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks defaultPlaybackRate playbackRate mediaGroup controller controls defaultMuted".split(" ");a.each(a.apiMethods,function(c){a.PlaybackTech.prototype[c]=
function(){throw Error("The '"+c+"' method is not available on the playback technology's API");}});a.html5=a.PlaybackTech.extend({init:function(a,b,d){this.player=a;this.el=this.createElement();this.ready(d);this.addEvent("click",this.proxy(this.onClick));if((b=b.source)&&this.el.currentSrc==b.src)a.triggerEvent("loadstart");else if(b)this.el.src=b.src;a.ready(function(){if(this.options.autoplay&&this.paused()){this.tag.poster=null;this.play()}});this.setupTriggers();this.triggerReady()},destroy:function(){this.player.tag=
false;this.removeTriggers();this.el.parentNode.removeChild(this.el)},createElement:function(){var c=this.player,b=c.tag,d;if(!b||this.support.movingElementInDOM===false){b&&c.el.removeChild(b);b=d=a.createElement("video",{id:b.id||c.el.id+"_html5_api",className:b.className||"vjs-tech"});a.insertFirst(b,c.el)}a.each(["autoplay","preload","loop","muted"],function(a){c.options[a]!==null&&(b[a]=c.options[a])},this);return b},setupTriggers:function(){a.each.call(this,a.html5.events,function(c){a.addEvent(this.el,
c,a.proxy(this.player,this.eventHandler))})},removeTriggers:function(){a.each.call(this,a.html5.events,function(c){a.removeEvent(this.el,c,a.proxy(this.player,this.eventHandler))})},eventHandler:function(a){a.stopPropagation();this.triggerEvent(a)},play:function(){this.el.play()},pause:function(){this.el.pause()},paused:function(){return this.el.paused},currentTime:function(){return this.el.currentTime},setCurrentTime:function(c){try{this.el.currentTime=c}catch(b){a.log(b,"Video isn't ready. (VideoJS)")}},
duration:function(){return this.el.duration||0},buffered:function(){return this.el.buffered},volume:function(){return this.el.volume},setVolume:function(a){this.el.volume=a},muted:function(){return this.el.muted},setMuted:function(a){this.el.muted=a},width:function(){return this.el.offsetWidth},height:function(){return this.el.offsetHeight},supportsFullScreen:function(){return typeof this.el.webkitEnterFullScreen=="function"&&!navigator.userAgent.match("Chrome")&&!navigator.userAgent.match("Mac OS X 10.5")?
true:false},enterFullScreen:function(){try{this.el.webkitEnterFullScreen()}catch(c){c.code==11&&a.log("VideoJS: Video not ready.")}},src:function(a){this.el.src=a},load:function(){this.el.load()},currentSrc:function(){return this.el.currentSrc},preload:function(){return this.el.preload},setPreload:function(a){this.el.preload=a},autoplay:function(){return this.el.autoplay},setAutoplay:function(a){this.el.autoplay=a},loop:function(){return this.el.loop},setLoop:function(a){this.el.loop=a},error:function(){return this.el.error},
seeking:function(){return this.el.seeking},ended:function(){return this.el.ended},controls:function(){return this.player.options.controls},defaultMuted:function(){return this.el.defaultMuted}});a.html5.isSupported=function(){return!!e.createElement("video").canPlayType};a.html5.canPlaySource=function(a){return!!e.createElement("video").canPlayType(a.type)};a.html5.events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" ");
a.html5.prototype.support={fullscreen:typeof a.testVid.webkitEnterFullScreen!==f?!a.ua.match("Chrome")&&!a.ua.match("Mac OS X 10.5")?!0:!1:!1,movingElementInDOM:!a.isIOS()};a.isAndroid()&&3>a.androidVersion()&&(e.createElement("video").constructor.prototype.canPlayType=function(a){return a&&a.toLowerCase().indexOf("video/mp4")!=-1?"maybe":""});a.flash=a.PlaybackTech.extend({init:function(c,b){this.player=c;var d=b.source,e=b.parentEl,g=this.el=a.createElement("div",{id:e.id+"_temp_flash"}),f=c.el.id+
"_flash_api",i=c.options,n=a.merge({readyFunction:"_V_.flash.onReady",eventProxyFunction:"_V_.flash.onEvent",errorEventProxyFunction:"_V_.flash.onError",autoplay:i.autoplay,preload:i.preload,loop:i.loop,muted:i.muted},b.flashVars),k=a.merge({wmode:"opaque",bgcolor:"#000000"},b.params),v=a.merge({id:f,name:f,"class":"vjs-tech"},b.attributes);if(d)n.src=encodeURIComponent(a.getAbsoluteURL(d.src));a.insertFirst(g,e);b.startTime&&this.ready(function(){this.load();this.play();this.currentTime(b.startTime)});
if(b.iFrameMode==true&&!a.isFF){var x=a.createElement("iframe",{id:f+"_iframe",name:f+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});n.readyFunction="ready";n.eventProxyFunction="events";n.errorEventProxyFunction="errors";a.addEvent(x,"load",a.proxy(this,function(){var c,d=x.contentWindow;c=x.contentDocument?x.contentDocument:x.contentWindow.document;c.write(a.flash.getEmbedCode(b.swf,n,k,v));d.player=this.player;d.ready=a.proxy(this.player,function(b){var b=
c.getElementById(b),d=this.tech;d.el=b;a.addEvent(b,"click",d.proxy(d.onClick));a.flash.checkReady(d)});d.events=a.proxy(this.player,function(a,c){this&&this.techName=="flash"&&this.triggerEvent(c)});d.errors=a.proxy(this.player,function(c,b){a.log("Flash Error",b)})}));g.parentNode.replaceChild(x,g)}else a.flash.embed(b.swf,g,n,k,v)},destroy:function(){this.el.parentNode.removeChild(this.el)},play:function(){this.el.vjs_play()},pause:function(){this.el.vjs_pause()},src:function(c){c=a.getAbsoluteURL(c);
this.el.vjs_src(c);if(this.player.autoplay()){var b=this;setTimeout(function(){b.play()},0)}},load:function(){this.el.vjs_load()},poster:function(){this.el.vjs_getProperty("poster")},buffered:function(){return a.createTimeRange(0,this.el.vjs_getProperty("buffered"))},supportsFullScreen:function(){return false},enterFullScreen:function(){return false}});(function(){var c=a.flash.prototype;createSetter=function(a){var b=a.charAt(0).toUpperCase()+a.slice(1);c["set"+b]=function(c){return this.el.vjs_setProperty(a,
c)}};createGetter=function(a){c[a]=function(){return this.el.vjs_getProperty(a)}};a.each(["preload","currentTime","defaultPlaybackRate","playbackRate","autoplay","loop","mediaGroup","controller","controls","volume","muted","defaultMuted"],function(a){createGetter(a);createSetter(a)});a.each(["error","currentSrc","networkState","readyState","seeking","initialTime","duration","startOffsetTime","paused","played","seekable","ended","videoTracks","audioTracks","videoWidth","videoHeight","textTracks"],
function(a){createGetter(a)})})();a.flash.isSupported=function(){return a.flash.version()[0]>=10};a.flash.canPlaySource=function(c){if(c.type in a.flash.prototype.support.formats)return"maybe"};a.flash.prototype.support={formats:{"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},progressEvent:!1,timeupdateEvent:!1,fullscreenResize:!1,parentResize:!a.ua.match("Firefox")};a.flash.onReady=function(c){var c=a.el(c),b=c.player||c.parentNode.player,d=b.tech;c.player=b;d.el=c;d.addEvent("click",
d.onClick);a.flash.checkReady(d)};a.flash.checkReady=function(c){c.el.vjs_getProperty?c.triggerReady():setTimeout(function(){a.flash.checkReady(c)},50)};a.flash.onEvent=function(c,b){a.el(c).player.triggerEvent(b)};a.flash.onError=function(c,b){a.el(c).player.triggerEvent("error");a.log("Flash Error",b,c)};a.flash.version=function(){var a="0,0,0";try{a=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(b){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&
(a=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(d){}}return a.split(",")};a.flash.embed=function(c,b,d,e,g){c=a.flash.getEmbedCode(c,d,e,g);c=a.createElement("div",{innerHTML:c}).childNodes[0];d=b.parentNode;b.parentNode.replaceChild(c,b);if(a.isIE()){var f=d.childNodes[0];setTimeout(function(){f.style.display="block"},1E3)}return c};a.flash.getEmbedCode=function(c,b,d,e){var g="",f="";attrsString="";
b&&a.eachProp(b,function(a,c){g=g+(a+"="+c+"&amp;")});d=a.merge({movie:c,flashvars:g,allowScriptAccess:"always",allowNetworking:"all"},d);a.eachProp(d,function(a,c){f=f+('<param name="'+a+'" value="'+c+'" />')});e=a.merge({data:c,width:"100%",height:"100%"},e);a.eachProp(e,function(a,c){attrsString=attrsString+(a+'="'+c+'" ')});return'<object type="application/x-shockwave-flash"'+attrsString+">"+f+"</object>"};a.merge(a.Player.prototype,{addTextTracks:function(c){for(var b=this.textTracks=this.textTracks?
this.textTracks:[],d=0,e=c.length,g;d<e;d++){g=a.uc(c[d].kind||"subtitles");g=new a[g+"Track"](this,c[d]);b.push(g);g["default"]&&this.ready(a.proxy(g,g.show))}return this},showTextTrack:function(a,b){for(var d=this.textTracks,e=0,g=d.length,f,i;e<g;e++){f=d[e];if(f.id===a){f.show();i=f}else b&&(f.kind==b&&f.mode>0)&&f.disable()}(d=i?i.kind:b?b:false)&&this.triggerEvent(d+"trackchange");return this}});a.Track=a.Component.extend({init:function(c,b){this._super(c,b);a.merge(this,{id:b.id||"vjs_"+b.kind+
"_"+b.language+"_"+a.guid++,src:b.src,"default":b["default"],title:b.title,language:b.srclang,label:b.label,cues:[],activeCues:[],readyState:0,mode:0})},createElement:function(){return this._super("div",{className:"vjs-"+this.kind+" vjs-text-track"})},show:function(){this.activate();this.mode=2;this._super()},hide:function(){this.activate();this.mode=1;this._super()},disable:function(){this.mode==2&&this.hide();this.deactivate();this.mode=0},activate:function(){this.readyState==0&&this.load();if(this.mode==
0){this.player.addEvent("timeupdate",this.proxy(this.update,this.id));this.player.addEvent("ended",this.proxy(this.reset,this.id));(this.kind=="captions"||this.kind=="subtitles")&&this.player.textTrackDisplay.addComponent(this)}},deactivate:function(){this.player.removeEvent("timeupdate",this.proxy(this.update,this.id));this.player.removeEvent("ended",this.proxy(this.reset,this.id));this.reset();this.player.textTrackDisplay.removeComponent(this)},load:function(){if(this.readyState==0){this.readyState=
1;a.get(this.src,this.proxy(this.parseCues),this.proxy(this.onError))}},onError:function(a){this.error=a;this.readyState=3;this.triggerEvent("error")},parseCues:function(c){for(var b,d,c=c.split("\n"),e="",g=1,f=c.length;g<f;g++)if(e=a.trim(c[g])){if(e.indexOf("--\>")==-1){b=e;e=a.trim(c[++g])}else b=this.cues.length;b={id:b,index:this.cues.length};d=e.split(" --\> ");b.startTime=this.parseCueTime(d[0]);b.endTime=this.parseCueTime(d[1]);for(d=[];c[++g]&&(e=a.trim(c[g]));)d.push(e);b.text=d.join("<br/>");
this.cues.push(b)}this.readyState=2;this.triggerEvent("loaded")},parseCueTime:function(a){var b=a.split(":"),a=0,d,e,g;if(b.length==3){d=b[0];e=b[1];b=b[2]}else{d=0;e=b[0];b=b[1]}b=b.split(/\s+/);b=b.splice(0,1)[0];b=b.split(/\.|,/);g=parseFloat(b[1]);b=b[0];a=a+parseFloat(d)*3600;a=a+parseFloat(e)*60;a=a+parseFloat(b);g&&(a=a+g/1E3);return a},update:function(){if(this.cues.length>0){var a=this.player.currentTime();if(this.prevChange===f||a<this.prevChange||this.nextChange<=a){var b=this.cues,d=this.player.duration(),
e=0,g=false,i=[],n,l,k,v;if(a>=this.nextChange||this.nextChange===f)v=this.firstActiveIndex!==f?this.firstActiveIndex:0;else{g=true;v=this.lastActiveIndex!==f?this.lastActiveIndex:b.length-1}for(;;){k=b[v];if(k.endTime<=a){e=Math.max(e,k.endTime);if(k.active)k.active=false}else if(a<k.startTime){d=Math.min(d,k.startTime);if(k.active)k.active=false;if(!g)break}else{if(g){i.splice(0,0,k);l===f&&(l=v);n=v}else{i.push(k);n===f&&(n=v);l=v}d=Math.min(d,k.endTime);e=Math.max(e,k.startTime);k.active=true}if(g)if(v===
0)break;else v--;else if(v===b.length-1)break;else v++}this.activeCues=i;this.nextChange=d;this.prevChange=e;this.firstActiveIndex=n;this.lastActiveIndex=l;this.updateDisplay();this.triggerEvent("cuechange")}}},updateDisplay:function(){for(var a=this.activeCues,b="",d=0,e=a.length;d<e;d++)b=b+("<span class='vjs-tt-cue'>"+a[d].text+"</span>");this.el.innerHTML=b},reset:function(){this.nextChange=0;this.prevChange=this.player.duration();this.lastActiveIndex=this.firstActiveIndex=0}});a.CaptionsTrack=
a.Track.extend({kind:"captions"});a.SubtitlesTrack=a.Track.extend({kind:"subtitles"});a.ChaptersTrack=a.Track.extend({kind:"chapters"});a.TextTrackDisplay=a.Component.extend({createElement:function(){return this._super("div",{className:"vjs-text-track-display"})}});a.TextTrackMenuItem=a.MenuItem.extend({init:function(c,b){var d=this.track=b.track;b.label=d.label;b.selected=d["default"];this._super(c,b);this.player.addEvent(d.kind+"trackchange",a.proxy(this,this.update))},onClick:function(){this._super();
this.player.showTextTrack(this.track.id,this.track.kind)},update:function(){this.track.mode==2?this.selected(true):this.selected(false)}});a.OffTextTrackMenuItem=a.TextTrackMenuItem.extend({init:function(a,b){b.track={kind:b.kind,player:a,label:"Off"};this._super(a,b)},onClick:function(){this._super();this.player.showTextTrack(this.track.id,this.track.kind)},update:function(){for(var a=this.player.textTracks,b=0,d=a.length,e,g=true;b<d;b++){e=a[b];e.kind==this.track.kind&&e.mode==2&&(g=false)}g?this.selected(true):
this.selected(false)}});a.TextTrackButton=a.Button.extend({init:function(a,b){this._super(a,b);this.menu=this.createMenu();this.items.length===0&&this.hide()},createMenu:function(){var b=new a.Menu(this.player);b.el.appendChild(a.createElement("li",{className:"vjs-menu-title",innerHTML:a.uc(this.kind)}));b.addItem(new a.OffTextTrackMenuItem(this.player,{kind:this.kind}));this.items=this.createItems();this.each(this.items,function(a){b.addItem(a)});this.addComponent(b);return b},createItems:function(){var b=
[];this.each(this.player.textTracks,function(d){d.kind===this.kind&&b.push(new a.TextTrackMenuItem(this.player,{track:d}))});return b},buildCSSClass:function(){return this.className+" vjs-menu-button "+this._super()},onFocus:function(){this.menu.lockShowing();a.one(this.menu.el.childNodes[this.menu.el.childNodes.length-1],"blur",this.proxy(function(){this.menu.unlockShowing()}))},onBlur:function(){},onClick:function(){this.one("mouseout",this.proxy(function(){this.menu.unlockShowing();this.el.blur()}))}});
a.CaptionsButton=a.TextTrackButton.extend({kind:"captions",buttonText:"Captions",className:"vjs-captions-button"});a.SubtitlesButton=a.TextTrackButton.extend({kind:"subtitles",buttonText:"Subtitles",className:"vjs-subtitles-button"});a.ChaptersButton=a.TextTrackButton.extend({kind:"chapters",buttonText:"Chapters",className:"vjs-chapters-button",createItems:function(){var b=[];this.each(this.player.textTracks,function(d){d.kind===this.kind&&b.push(new a.TextTrackMenuItem(this.player,{track:d}))});
return b},createMenu:function(){for(var b=this.player.textTracks,d=0,e=b.length,g,f,i=this.items=[];d<e;d++){g=b[d];if(g.kind==this.kind&&g["default"]){if(g.readyState<2){this.chaptersTrack=g;g.addEvent("loaded",this.proxy(this.createMenu));return}f=g;break}}b=this.menu=new a.Menu(this.player);b.el.appendChild(a.createElement("li",{className:"vjs-menu-title",innerHTML:a.uc(this.kind)}));if(f){g=f.cues;for(var d=0,e=g.length,n;d<e;d++){n=g[d];n=new a.ChaptersTrackMenuItem(this.player,{track:f,cue:n});
i.push(n);b.addComponent(n)}}this.addComponent(b);this.items.length>0&&this.show();return b}});a.ChaptersTrackMenuItem=a.MenuItem.extend({init:function(b,d){var e=this.track=d.track,g=this.cue=d.cue,f=b.currentTime();d.label=g.text;d.selected=g.startTime<=f&&f<g.endTime;this._super(b,d);e.addEvent("cuechange",a.proxy(this,this.update))},onClick:function(){this._super();this.player.currentTime(this.cue.startTime);this.update(this.cue.startTime)},update:function(){var a=this.cue,b=this.player.currentTime();
a.startTime<=b&&b<a.endTime?this.selected(true):this.selected(false)}});a.merge(a.ControlBar.prototype.options.components,{subtitlesButton:{},captionsButton:{},chaptersButton:{}});a.autoSetup=function(){var b,d,g=e.getElementsByTagName("video");if(g&&g.length>0)for(var i=0,n=g.length;i<n;i++)if((d=g[i])&&d.getAttribute){if(d.player===f){b=d.getAttribute("data-setup");if(b!==null){b=m.parse(b||"{}");a(d,b)}}}else{a.autoSetupTimeout(1);break}else a.windowLoaded||a.autoSetupTimeout(1)};a.autoSetupTimeout=
function(b){setTimeout(a.autoSetup,b)};a.addEvent(d,"load",function(){a.windowLoaded=true});a.autoSetup();d.VideoJS=d._V_=g})(window);(function(){function d(a,b,c){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a._chain&&(a=a._wrapped);b._chain&&(b=b._wrapped);if(a.isEqual&&j.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&j.isFunction(b.isEqual))return b.isEqual(a);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case "[object String]":return a==""+b;case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==
b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var k=c.length;k--;)if(c[k]==a)return!0;c.push(a);var k=0,g=!0;if("[object Array]"==e){if(k=a.length,g=k==b.length)for(;k--&&(g=k in a==k in b&&d(a[k],b[k],c)););}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(j.has(a,h)&&(k++,!(g=j.has(b,h)&&d(a[h],b[h],c))))break;if(g){for(h in b)if(j.has(b,h)&&!k--)break;
g=!k}}c.pop();return g}var f=this,b=f._,i={},e=Array.prototype,g=Object.prototype,a=e.slice,n=e.unshift,l=g.toString,m=g.hasOwnProperty,c=e.forEach,h=e.map,p=e.reduce,o=e.reduceRight,q=e.filter,t=e.every,y=e.some,u=e.indexOf,k=e.lastIndexOf,g=Array.isArray,v=Object.keys,x=Function.prototype.bind,j=function(a){return new E(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=j),exports._=j):f._=j;j.VERSION="1.3.1";var z=j.each=j.forEach=function(a,
b,d){if(a!=null)if(c&&a.forEach===c)a.forEach(b,d);else if(a.length===+a.length)for(var e=0,k=a.length;e<k;e++){if(e in a&&b.call(d,a[e],e,a)===i)break}else for(e in a)if(j.has(a,e)&&b.call(d,a[e],e,a)===i)break};j.map=j.collect=function(a,b,c){var d=[];if(a==null)return d;if(h&&a.map===h)return a.map(b,c);z(a,function(a,j,e){d[d.length]=b.call(c,a,j,e)});if(a.length===+a.length)d.length=a.length;return d};j.reduce=j.foldl=j.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(p&&
a.reduce===p)return d&&(b=j.bind(b,d)),e?a.reduce(b,c):a.reduce(b);z(a,function(a,j,k){e?c=b.call(d,c,a,j,k):(c=a,e=true)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};j.reduceRight=j.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(o&&a.reduceRight===o)return d&&(b=j.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var k=j.toArray(a).reverse();d&&!e&&(b=j.bind(b,d));return e?j.reduce(k,b,c,d):j.reduce(k,b)};j.find=j.detect=function(a,b,c){var d;
s(a,function(a,j,e){if(b.call(c,a,j,e))return d=a,true});return d};j.filter=j.select=function(a,b,c){var d=[];if(a==null)return d;if(q&&a.filter===q)return a.filter(b,c);z(a,function(a,j,e){b.call(c,a,j,e)&&(d[d.length]=a)});return d};j.reject=function(a,b,c){var d=[];if(a==null)return d;z(a,function(a,j,e){b.call(c,a,j,e)||(d[d.length]=a)});return d};j.every=j.all=function(a,b,c){var d=true;if(a==null)return d;if(t&&a.every===t)return a.every(b,c);z(a,function(a,j,e){if(!(d=d&&b.call(c,a,j,e)))return i});
return d};var s=j.some=j.any=function(a,b,c){b||(b=j.identity);var d=false;if(a==null)return d;if(y&&a.some===y)return a.some(b,c);z(a,function(a,j,e){if(d||(d=b.call(c,a,j,e)))return i});return!!d};j.include=j.contains=function(a,b){return a==null?false:u&&a.indexOf===u?a.indexOf(b)!=-1:s(a,function(a){return a===b})};j.invoke=function(b,c){var d=a.call(arguments,2);return j.map(b,function(a){return(j.isFunction(c)?c||a:a[c]).apply(a,d)})};j.pluck=function(a,b){return j.map(a,function(a){return a[b]})};
j.max=function(a,b,c){if(!b&&j.isArray(a))return Math.max.apply(Math,a);if(!b&&j.isEmpty(a))return-Infinity;var d={computed:-Infinity};z(a,function(a,j,e){j=b?b.call(c,a,j,e):a;j>=d.computed&&(d={value:a,computed:j})});return d.value};j.min=function(a,b,c){if(!b&&j.isArray(a))return Math.min.apply(Math,a);if(!b&&j.isEmpty(a))return Infinity;var d={computed:Infinity};z(a,function(a,j,e){j=b?b.call(c,a,j,e):a;j<d.computed&&(d={value:a,computed:j})});return d.value};j.shuffle=function(a){var b=[],c;
z(a,function(a,d){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)});return b};j.sortBy=function(a,b,c){return j.pluck(j.map(a,function(a,d,j){return{value:a,criteria:b.call(c,a,d,j)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")};j.groupBy=function(a,b){var c={},d=j.isFunction(b)?b:function(a){return a[b]};z(a,function(a,b){var j=d(a,b);(c[j]||(c[j]=[])).push(a)});return c};j.sortedIndex=function(a,b,c){c||(c=j.identity);for(var d=0,e=a.length;d<
e;){var k=d+e>>1;c(a[k])<c(b)?d=k+1:e=k}return d};j.toArray=function(b){return!b?[]:b.toArray?b.toArray():j.isArray(b)?a.call(b):j.isArguments(b)?a.call(b):j.values(b)};j.size=function(a){return j.toArray(a).length};j.first=j.head=function(b,c,d){return c!=null&&!d?a.call(b,0,c):b[0]};j.initial=function(b,c,d){return a.call(b,0,b.length-(c==null||d?1:c))};j.last=function(b,c,d){return c!=null&&!d?a.call(b,Math.max(b.length-c,0)):b[b.length-1]};j.rest=j.tail=function(b,c,d){return a.call(b,c==null||
d?1:c)};j.compact=function(a){return j.filter(a,function(a){return!!a})};j.flatten=function(a,b){return j.reduce(a,function(a,c){if(j.isArray(c))return a.concat(b?c:j.flatten(c));a[a.length]=c;return a},[])};j.without=function(b){return j.difference(b,a.call(arguments,1))};j.uniq=j.unique=function(a,b,c){var c=c?j.map(a,c):a,d=[];j.reduce(c,function(c,e,k){if(0==k||(b===true?j.last(c)!=e:!j.include(c,e))){c[c.length]=e;d[d.length]=a[k]}return c},[]);return d};j.union=function(){return j.uniq(j.flatten(arguments,
true))};j.intersection=j.intersect=function(b){var c=a.call(arguments,1);return j.filter(j.uniq(b),function(a){return j.every(c,function(b){return j.indexOf(b,a)>=0})})};j.difference=function(b){var c=j.flatten(a.call(arguments,1));return j.filter(b,function(a){return!j.include(c,a)})};j.zip=function(){for(var b=a.call(arguments),c=j.max(j.pluck(b,"length")),d=Array(c),e=0;e<c;e++)d[e]=j.pluck(b,""+e);return d};j.indexOf=function(a,b,c){if(a==null)return-1;var d;if(c)return c=j.sortedIndex(a,b),a[c]===
b?c:-1;if(u&&a.indexOf===u)return a.indexOf(b);c=0;for(d=a.length;c<d;c++)if(c in a&&a[c]===b)return c;return-1};j.lastIndexOf=function(a,b){if(a==null)return-1;if(k&&a.lastIndexOf===k)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};j.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),j=0,e=Array(d);j<d;){e[j++]=a;a=a+c}return e};var A=function(){};j.bind=function(b,c){var d,e;if(b.bind===x&&x)return x.apply(b,
a.call(arguments,1));if(!j.isFunction(b))throw new TypeError;e=a.call(arguments,2);return d=function(){if(!(this instanceof d))return b.apply(c,e.concat(a.call(arguments)));A.prototype=b.prototype;var j=new A,k=b.apply(j,e.concat(a.call(arguments)));return Object(k)===k?k:j}};j.bindAll=function(b){var c=a.call(arguments,1);c.length==0&&(c=j.functions(b));z(c,function(a){b[a]=j.bind(b[a],b)});return b};j.memoize=function(a,b){var c={};b||(b=j.identity);return function(){var d=b.apply(this,arguments);
return j.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};j.delay=function(b,c){var d=a.call(arguments,2);return setTimeout(function(){return b.apply(b,d)},c)};j.defer=function(b){return j.delay.apply(j,[b,1].concat(a.call(arguments,1)))};j.throttle=function(a,b){var c,d,e,k,g,h=j.debounce(function(){g=k=false},b);return function(){c=this;d=arguments;e||(e=setTimeout(function(){e=null;g&&a.apply(c,d);h()},b));k?g=true:a.apply(c,d);h();k=true}};j.debounce=function(a,b){var c;return function(){var d=this,
j=arguments;clearTimeout(c);c=setTimeout(function(){c=null;a.apply(d,j)},b)}};j.once=function(a){var b=false,c;return function(){if(b)return c;b=true;return c=a.apply(this,arguments)}};j.wrap=function(b,c){return function(){var d=[b].concat(a.call(arguments,0));return c.apply(this,d)}};j.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}};j.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}};
j.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)j.has(a,c)&&(b[b.length]=c);return b};j.values=function(a){return j.map(a,j.identity)};j.functions=j.methods=function(a){var b=[],c;for(c in a)j.isFunction(a[c])&&b.push(c);return b.sort()};j.extend=function(b){z(a.call(arguments,1),function(a){for(var c in a)b[c]=a[c]});return b};j.defaults=function(b){z(a.call(arguments,1),function(a){for(var c in a)b[c]==null&&(b[c]=a[c])});return b};j.clone=function(a){return!j.isObject(a)?
a:j.isArray(a)?a.slice():j.extend({},a)};j.tap=function(a,b){b(a);return a};j.isEqual=function(a,b){return d(a,b,[])};j.isEmpty=function(a){if(j.isArray(a)||j.isString(a))return a.length===0;for(var b in a)if(j.has(a,b))return false;return true};j.isElement=function(a){return!!(a&&a.nodeType==1)};j.isArray=g||function(a){return l.call(a)=="[object Array]"};j.isObject=function(a){return a===Object(a)};j.isArguments=function(a){return l.call(a)=="[object Arguments]"};j.isArguments(arguments)||(j.isArguments=
function(a){return!(!a||!j.has(a,"callee"))});j.isFunction=function(a){return l.call(a)=="[object Function]"};j.isString=function(a){return l.call(a)=="[object String]"};j.isNumber=function(a){return l.call(a)=="[object Number]"};j.isNaN=function(a){return a!==a};j.isBoolean=function(a){return a===true||a===false||l.call(a)=="[object Boolean]"};j.isDate=function(a){return l.call(a)=="[object Date]"};j.isRegExp=function(a){return l.call(a)=="[object RegExp]"};j.isNull=function(a){return a===null};
j.isUndefined=function(a){return a===void 0};j.has=function(a,b){return m.call(a,b)};j.noConflict=function(){f._=b;return this};j.identity=function(a){return a};j.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};j.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};j.mixin=function(a){z(j.functions(a),function(b){P(b,j[b]=a[b])})};var r=0;j.uniqueId=function(a){var b=r++;return a?
a+b:b};j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/.^/,G=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};j.template=function(a,b){var c=j.templateSettings,c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||B,function(a,b){return"',_.escape("+G(b)+"),'"}).replace(c.interpolate||B,function(a,b){return"',"+G(b)+",'"}).replace(c.evaluate||
B,function(a,b){return"');"+G(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",d=new Function("obj","_",c);return b?d(b,j):function(a){return d.call(this,a,j)}};j.chain=function(a){return j(a).chain()};var E=function(a){this._wrapped=a};j.prototype=E.prototype;var C=function(a,b){return b?j(a).chain():a},P=function(b,c){E.prototype[b]=function(){var b=a.call(arguments);n.call(b,this._wrapped);return C(c.apply(j,b),
this._chain)}};j.mixin(j);z("pop push reverse shift sort splice unshift".split(" "),function(a){var b=e[a];E.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;(a=="shift"||a=="splice")&&d===0&&delete c[0];return C(c,this._chain)}});z(["concat","join","slice"],function(a){var b=e[a];E.prototype[a]=function(){return C(b.apply(this._wrapped,arguments),this._chain)}});E.prototype.chain=function(){this._chain=true;return this};E.prototype.value=function(){return this._wrapped}}).call(this);(function(d,f){function b(a){this._d=a}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function e(a,b,c,j){var e="string"==typeof b,k=e?{}:b,g,h,f,i;return e&&j&&(k[b]=+j),g=(k.ms||k.milliseconds||0)+1E3*(k.s||k.seconds||0)+6E4*(k.m||k.minutes||0)+36E5*(k.h||k.hours||0),h=(k.d||k.days||0)+7*(k.w||k.weeks||0),f=(k.M||k.months||0)+12*(k.y||k.years||0),g&&a.setTime(+a+g*c),h&&a.setDate(a.getDate()+h*c),f&&(i=a.getDate(),a.setDate(1),a.setMonth(a.getMonth()+f*c),a.setDate(Math.min((new d(a.getFullYear(),
a.getMonth()+1,0)).getDate(),i))),a}function g(a){return new d(a[0],a[1]||0,a[2]||1,a[3]||0,a[4]||0,a[5]||0,a[6]||0)}function a(j,e){function g(b){var e,h;switch(b){case "M":return f+1;case "Mo":return f+1+o(f+1);case "MM":return i(f+1,2);case "MMM":return c.monthsShort[f];case "MMMM":return c.months[f];case "D":return n;case "Do":return n+o(n);case "DD":return i(n,2);case "DDD":return e=new d(x,f,n),h=new d(x,0,1),~~((e-h)/864E5+1.5);case "DDDo":return e=g("DDD"),e+o(e);case "DDDD":return i(g("DDD"),
3);case "d":return z;case "do":return z+o(z);case "ddd":return c.weekdaysShort[z];case "dddd":return c.weekdays[z];case "w":return e=new d(x,f,n-z+5),h=new d(e.getFullYear(),0,4),~~((e-h)/864E5/7+1.5);case "wo":return e=g("w"),e+o(e);case "ww":return i(g("w"),2);case "YY":return i(x%100,2);case "YYYY":return x;case "a":return 11<l?m.pm:m.am;case "A":return 11<l?m.PM:m.AM;case "H":return l;case "HH":return i(l,2);case "h":return l%12||12;case "hh":return i(l%12||12,2);case "m":return s;case "mm":return i(s,
2);case "s":return A;case "ss":return i(A,2);case "zz":case "z":return(j.toString().match(v)||[""])[0].replace(k,"");case "Z":return(0<p?"+":"-")+i(~~(Math.abs(p)/60),2)+":"+i(~~(Math.abs(p)%60),2);case "ZZ":return(0<p?"+":"-")+i(~~(10*Math.abs(p)/6),4);case "L":case "LL":case "LLL":case "LLLL":case "LT":return a(j,c.longDateFormat[b]);default:return b.replace(/(^\[)|(\\)|\]$/g,"")}}var h=new b(j),f=h.month(),n=h.date(),x=h.year(),z=h.day(),l=h.hours(),s=h.minutes(),A=h.seconds(),p=-h.zone(),o=c.ordinal,
m=c.meridiem;return e.replace(u,g)}function n(a,b){var e=[0,0,1,0,0,0,0],k=0,h=0,f=!1,i=a.match(j),n=b.match(x),z=Math.min(i.length,n.length),v,l;for(v=0;v<z;v++){var s=i[v],u=void 0;switch(n[v]){case "M":case "MM":e[1]=~~s-1;break;case "MMM":case "MMMM":for(u=0;12>u;u++)if(c.monthsParse[u].test(s)){e[1]=u;break}break;case "D":case "DD":case "DDD":case "DDDD":e[2]=~~s;break;case "YY":s=~~s;e[0]=s+(70<s?1900:2E3);break;case "YYYY":e[0]=~~Math.abs(s);break;case "a":case "A":l="pm"===s.toLowerCase();
break;case "H":case "HH":case "h":case "hh":e[3]=~~s;break;case "m":case "mm":e[4]=~~s;break;case "s":case "ss":e[5]=~~s;break;case "Z":case "ZZ":f=!0,(u=(s||"").match(A))&&u[1]&&(k=~~u[1]),u&&u[2]&&(h=~~u[2]),u&&"+"===u[0]&&(k=-k,h=-h)}}return l&&12>e[3]&&(e[3]+=12),!1===l&&12===e[3]&&(e[3]=0),e[3]+=k,e[4]+=h,f?new d(d.UTC.apply({},e)):g(e)}function l(a,b,d){var e=c.relativeTime[a];return"function"==typeof e?e(b||1,!!d,a):e.replace(/%d/i,b||1)}function m(a,b){c.fn[a]=function(a){return null!=a?(this._d["set"+
b](a),this):this._d["get"+b]()}}var c,h=Math.round,p={},o="undefined"!=typeof module,q="months monthsShort monthsParse weekdays weekdaysShort longDateFormat calendar relativeTime ordinal meridiem".split(" "),t,y=/^\/?Date\((\-?\d+)/i,u=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,k=/[^A-Z]/g,v=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,x=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,j=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,
z=/\d{4}.\d\d.\d\d(T(\d\d(.\d\d(.\d\d)?)?)?([\+\-]\d\d:?\d\d)?)?/,s=[["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],A=/([\+\-]|\d\d)/gi,r="Month Date Hours Minutes Seconds Milliseconds".split(" ");c=function(c,e){if(null===c)return null;var k;if(c&&c._d instanceof d)k=new d(+c._d);else if(e)if("[object Array]"===Object.prototype.toString.call(e)){var h=c.match(j),i=99,x,v,l;for(x=0;x<e.length;x++){v=n(c,e[x]);l=h;for(var u=a(v,e[x]).match(j),A=Math.min(l.length,u.length),p=
Math.abs(l.length-u.length),o=0,m=void 0,m=0;m<A;m++)~~l[m]!==~~u[m]&&o++;l=o+p;l<i&&(i=l,k=v)}}else k=n(c,e);else if(k=y.exec(c),c===f)k=new d;else if(k)k=new d(+k[1]);else if(c instanceof d)k=c;else if("[object Array]"===Object.prototype.toString.call(c))k=g(c);else if("string"==typeof c)if(k="YYYY-MM-DDT",z.exec(c)){for(h=0;3>h;h++)if(s[h][1].exec(c)){k+=s[h][0];break}k=n(c,k+"Z")}else k=new d(c);else k=new d(c);return new b(k)};c.version="1.4.0";c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";c.lang=function(a,
b){var d,e,j=[];if(b){for(d=0;12>d;d++)j[d]=RegExp("^"+b.months[d]+"|^"+b.monthsShort[d].replace(".",""),"i");b.monthsParse=b.monthsParse||j;p[a]=b}if(p[a])for(d=0;d<q.length;d++)e=q[d],c[e]=p[a][e]||c[e];else o&&(e=require("./lang/"+a),c.lang(a,e))};c.lang("en",{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",
M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});c.fn=b.prototype={clone:function(){return c(this)},valueOf:function(){return+this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},format:function(b){return b?a(this._d,b):a(this._d,c.defaultFormat)},add:function(a,b){return this._d=e(this._d,a,1,b),this},subtract:function(a,
b){return this._d=e(this._d,a,-1,b),this},diff:function(a,b,d){var a=c(a),e=6E4*(this.zone()-a.zone()),e=this._d-a._d-e,j=this.year()-a.year(),k=this.month()-a.month(),a=this.date()-a.date(),g;return"months"===b?g=12*j+k+a/30:"years"===b?g=j+k/12:g="seconds"===b?e/1E3:"minutes"===b?e/6E4:"hours"===b?e/36E5:"days"===b?e/864E5:"weeks"===b?e/6048E5:e,d?g:h(g)},from:function(a,b){var d=this.diff(a),e=c.relativeTime,j;j=h(Math.abs(d)/1E3);var k=h(j/60),g=h(k/60),f=h(g/24),i=h(f/365);j=45>j&&["s",j]||1===
k&&["m"]||45>k&&["mm",k]||1===g&&["h"]||22>g&&["hh",g]||1===f&&["d"]||25>=f&&["dd",f]||45>=f&&["M"]||345>f&&["MM",h(f/30)]||1===i&&["y"]||["yy",i];j=(j[2]=b,l.apply({},j));return b?j:(0>=d?e.past:e.future).replace(/%s/i,j)},fromNow:function(a){return this.from(c(),a)},calendar:function(){var a=this.diff(c().sod(),"days",!0),b=c.calendar,d=b.sameElse,a=-6>a?d:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:d;return this.format("function"==typeof a?a.apply(this):a)},isLeapYear:function(){var a=
this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<c([this.year()]).zone()||this.zone()<c([this.year(),5]).zone()},day:function(a){var b=this._d.getDay();return null==a?b:this.add({d:a-b})},sod:function(){return this.clone().hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._d.getTimezoneOffset()}};for(t=0;t<r.length;t++)m(r[t].toLowerCase(),r[t]);m("year","FullYear");o&&(module.exports=
c);"undefined"!=typeof window&&(window.moment=c);"function"==typeof define&&define.amd&&define("moment",[],function(){return c})})(Date);(function(d,f){var b=d.document,i,e=function(d,a,e){var l=this,m,c,h,p,o,q={updated:[]};this.listContainer="string"==typeof d?b.getElementById(d):d;this.items=[];this.visibleItems=[];this.matchingItems=[];this.filtered=this.searched=!1;this.list=null;this.templateEngines={};this.page=a.page||200;this.i=a.i||1;c={start:function(a,b){b.plugins=b.plugins||{};this.classes(b);m=new p(l,b);this.callbacks(b);this.items.start(a,b);l.update();this.plugins(b.plugins)},classes:function(a){a.listClass=a.listClass||
"list";a.searchClass=a.searchClass||"search";a.sortClass=a.sortClass||"sort"},callbacks:function(a){l.list=i.getByClass(a.listClass,l.listContainer,!0);i.addEvent(i.getByClass(a.searchClass,l.listContainer),"keyup",l.search);o=i.getByClass(a.sortClass,l.listContainer);i.addEvent(o,"click",l.sort)},items:{start:function(a,b){if(b.valueNames){var c=this.get(),d=b.valueNames;b.indexAsync?this.indexAsync(c,d):this.index(c,d)}a!==f&&l.add(a)},get:function(){for(var a=l.list.childNodes,b=[],c=0,d=a.length;c<
d;c++)a[c].data===f&&b.push(a[c]);return b},index:function(a,b){for(var c=0,d=a.length;c<d;c++)l.items.push(new h(b,a[c]))},indexAsync:function(a,b){this.index(a.splice(0,100),b);0<a.length?setTimeout(function(){c.items.indexAsync(a,b)},10):l.update()}},plugins:function(a){for(var b=0;b<a.length;b++)l[a[b][1].name||a[b][0]]=new l.plugins[a[b][0]](l,a[b][1])}};this.add=function(a,b){b&&t(a,b);var c=[],d=!1;a[0]===f&&(a=[a]);for(var e=0,g=a.length;e<g;e++)d=null,a[e]instanceof h?(d=a[e],d.reload()):
(d=l.items.length>l.page?!0:!1,d=new h(a[e],f,d)),l.items.push(d),c.push(d);l.update();return c};var t=function(a,b,c){var d=a.splice(0,100),c=c||[],c=c.concat(l.add(d));0<a.length?setTimeout(function(){t(a,b,c)},10):(l.update(),b(c))};this.show=function(a,b){this.i=a;this.page=b;l.update()};this.remove=function(a,b,c){for(var d=0,e=0,g=l.items.length;e<g;e++)l.items[e].values()[a]==b&&(m.remove(l.items[e],c),l.items.splice(e,1),g--,d++);l.update();return d};this.get=function(a,b){for(var c=[],d=
0,e=l.items.length;d<e;d++){var g=l.items[d];g.values()[a]==b&&c.push(g)}return 0==c.length?null:1==c.length?c[0]:c};this.sort=function(a,b){var c=null,d=a.target||a.srcElement,e=!1,b=b||{};d===f?(c=a,e=b.asc||!1):(c=i.getAttribute(d,"data-sort"),e=i.hasClass(d,"asc")?!1:!0);for(var g=0,h=o.length;g<h;g++)i.removeClass(o[g],"asc"),i.removeClass(o[g],"desc");e?(d!==f&&i.addClass(d,"asc"),e=!0):(d!==f&&i.addClass(d,"desc"),e=!1);b.sortFunction=b.sortFunction?b.sortFunction:function(a,b){return i.sorter.alphanum(a.values()[c],
b.values()[c],e)};l.items.sort(b.sortFunction);l.update()};this.search=function(a,b){l.i=1;var c=[],d,e,g,h,i,b=b===f?l.items[0].values():b,a=a===f?"":a;d=a.target||a.srcElement;a=d===f?(""+a).toLowerCase():""+d.value.toLowerCase();i=l.items;a=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");m.clear();if(""===a)y.search(),l.searched=!1;else{l.searched=!0;for(var n=0,o=i.length;n<o;n++){d=!1;e=i[n];h=e.values();for(var p in b)h.hasOwnProperty(p)&&null!==b[p]&&(g=null!=h[p]?h[p].toString().toLowerCase():
"",""!==a&&-1<g.search(a)&&(d=!0));d?(e.found=!0,c.push(e)):e.found=!1}}l.update();return l.visibleItems};this.filter=function(a){l.i=1;var b=f;y.filter();if(a===f)l.filtered=!1;else{b=[];l.filtered=!0;for(var c=l.items,d=0,e=c.length;d<e;d++){var g=c[d];a(g.values())?(g.filtered=!0,b.push(g)):g.filtered=!1}}l.update();return l.visibleItems};this.size=function(){return l.items.length};this.clear=function(){m.clear();l.items=[]};this.on=function(a,b){q[a].push(b)};var y={filter:function(){for(var a=
l.items,b=a.length;b--;)a[b].filtered=!1},search:function(){for(var a=l.items,b=a.length;b--;)a[b].found=!1}};this.update=function(){var a=l.items,b=a.length;l.visibleItems=[];l.matchingItems=[];m.clear();for(var c=0;c<b;c++)a[c].matching()&&c+1>=l.i&&l.visibleItems.length<l.page?(a[c].show(),l.visibleItems.push(a[c]),l.matchingItems.push(a[c])):(a[c].matching()&&l.matchingItems.push(a[c]),a[c].hide());for(a=q.updated.length;a--;)q.updated[a]()};h=function(a,b,c){var d=this,e={};this.filtered=this.found=
!1;this.values=function(a,b){if(a!==f){for(var c in a)e[c]=a[c];!0!==b&&m.set(d,d.values())}else return e};this.show=function(){m.show(d)};this.hide=function(){m.hide(d)};this.matching=function(){return l.filtered&&l.searched&&d.found&&d.filtered||l.filtered&&!l.searched&&d.filtered||!l.filtered&&l.searched&&d.found||!l.filtered&&!l.searched};this.visible=function(){return d.elm.parentNode?!0:!1};(function(a,b,c){b===f?c?d.values(a,c):d.values(a):(d.elm=b,a=m.get(d,a),d.values(a))})(a,b,c)};p=function(a,
b){b.engine=b.engine===f?"standard":b.engine.toLowerCase();return new l.constructor.prototype.templateEngines[b.engine](a,b)};c.start(e,a)};e.prototype.templateEngines={};e.prototype.plugins={};e.prototype.templateEngines.standard=function(d,a){var e=i.getByClass(a.listClass,d.listContainer)[0],l=function(c){if(c===f){for(var c=e.childNodes,d=0,g=c.length;d<g;d++)if(c[d].data===f)return c[d];return null}return-1!==c.indexOf("<")?(d=b.createElement("div"),d.innerHTML=c,d.firstChild):b.getElementById(a.item)}(a.item),
m=this,c={created:function(a){a.elm===f&&m.create(a)}};this.get=function(a,b){c.created(a);for(var d={},e=0,g=b.length;e<g;e++)d[b[e]]=i.getByClass(b[e],a.elm)[0].innerHTML;return d};this.set=function(a,b){c.created(a);for(var d in b)if(b.hasOwnProperty(d)){var e=i.getByClass(d,a.elm,!0);e&&(e.innerHTML=b[d])}};this.create=function(a){if(a.elm===f){var b=l.cloneNode(!0);b.id="";a.elm=b;m.set(a,a.values())}};this.remove=function(a){e.removeChild(a.elm)};this.show=function(a){c.created(a);e.appendChild(a.elm)};
this.hide=function(a){a.elm!==f&&a.elm.parentNode===e&&e.removeChild(a.elm)};this.clear=function(){if(e.hasChildNodes())for(;1<=e.childNodes.length;)e.removeChild(e.firstChild)}};i={getByClass:function(){return b.getElementsByClassName?function(b,a,d){return d?a.getElementsByClassName(b)[0]:a.getElementsByClassName(b)}:function(d,a,e){var f=[];null==a&&(a=b);for(var a=a.getElementsByTagName("*"),i=a.length,d=RegExp("(^|\\s)"+d+"(\\s|$)"),c=0,h=0;c<i;c++)if(d.test(a[c].className)){if(e)return a[c];
f[h]=a[c];h++}return f}}(),addEvent:function(b,a){if(a.addEventListener)return function(a,d,e){if(a&&!(a instanceof Array)&&!a.length&&!i.isNodeList(a)&&0!==a.length||a===b)a.addEventListener(d,e,!1);else if(a&&a[0]!==f)for(var c=a.length,h=0;h<c;h++)i.addEvent(a[h],d,e)};if(a.attachEvent)return function(a,d,e){if(a&&!(a instanceof Array)&&!a.length&&!i.isNodeList(a)&&0!==a.length||a===b)a.attachEvent("on"+d,function(){return e.call(a,b.event)});else if(a&&a[0]!==f)for(var c=a.length,h=0;h<c;h++)i.addEvent(a[h],
d,e)}}(this,b),getAttribute:function(b,a){var d=b.getAttribute&&b.getAttribute(a)||null;if(!d)for(var e=b.attributes.length,i=0;i<e;i++)a[i]!==f&&a[i].nodeName===a&&(d=a[i].nodeValue);return d},isNodeList:function(b){var a=Object.prototype.toString.call(b);return"object"===typeof b&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(a)&&(0==b.length||"object"===typeof node&&0<b[0].nodeType)?!0:!1},hasClass:function(b,a){return-1<(this.getAttribute(b,"class")||this.getAttribute(b,"className")).search(a)},
addClass:function(b,a){if(!this.hasClass(b,a)){var d=this.getAttribute(b,"class")||this.getAttribute(b,"className"),d=(d+" "+a+" ").replace(/\s{2,}/g," ");b.setAttribute("class",d)}},removeClass:function(b,a){if(this.hasClass(b,a)){var d=this.getAttribute(b,"class")||this.getAttribute(b,"className"),d=d.replace(a,"");b.setAttribute("class",d)}},sorter:{alphanum:function(b,a,d){if(b===f||null===b)b="";if(a===f||null===a)a="";for(var b=b.toString().replace(/&(lt|gt);/g,function(a,b){return"lt"==b?"<":
">"}),b=b.replace(/<\/?[^>]+(>|$)/g,""),a=a.toString().replace(/&(lt|gt);/g,function(a,b){return"lt"==b?"<":">"}),a=a.replace(/<\/?[^>]+(>|$)/g,""),b=this.chunkify(b),a=this.chunkify(a),e=0;b[e]&&a[e];e++)if(b[e]!==a[e]){var i=Number(b[e]),c=Number(a[e]);return d?i==b[e]&&c==a[e]?i-c:b[e]>a[e]?1:-1:i==b[e]&&c==a[e]?c-i:b[e]>a[e]?-1:1}return b.length-a.length},chunkify:function(b){for(var a=[],d=0,e=-1,f=0,c,h;c=(h=b.charAt(d++)).charCodeAt(0);)c=45==c||46==c||48<=c&&57>=c,c!==f&&(a[++e]="",f=c),a[e]+=
h;return a}}};d.List=e;d.ListJsHelpers=i})(window);(function(d,f){function b(b){return!d(b).parents().andSelf().filter(function(){return"hidden"===d.curCSS(this,"visibility")||d.expr.filters.hidden(this)}).length}function i(e,g){var a=e.nodeName.toLowerCase();if("area"===a){var a=e.parentNode,f=a.name;if(!e.href||!f||"map"!==a.nodeName.toLowerCase())return!1;a=d("img[usemap=#"+f+"]")[0];return!!a&&b(a)}return(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"==a?e.href||g:g)&&b(e)}d.ui=d.ui||{};d.ui.version||(d.extend(d.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),d.fn.extend({propAttr:d.fn.prop||d.fn.attr,_focus:d.fn.focus,focus:function(b,g){return"number"==typeof b?this.each(function(){var a=
this;setTimeout(function(){d(a).focus();g&&g.call(a)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;d.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(d.curCSS(this,"position",1))&&/(auto|scroll)/.test(d.curCSS(this,"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(d.curCSS(this,
"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?d(document):b},zIndex:function(b){if(b!==f)return this.css("zIndex",b);if(this.length)for(var b=d(this[0]),g;b.length&&b[0]!==document;){g=b.css("position");if("absolute"===g||"relative"===g||"fixed"===g)if(g=parseInt(b.css("zIndex"),10),!isNaN(g)&&0!==g)return g;b=b.parent()}return 0},disableSelection:function(){return this.bind((d.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),d.each(["Width","Height"],function(b,g){function a(a,b,e,g){d.each(i,function(){b-=parseFloat(d.curCSS(a,"padding"+this,!0))||0;e&&(b-=parseFloat(d.curCSS(a,"border"+this+"Width",!0))||0);g&&(b-=parseFloat(d.curCSS(a,"margin"+this,!0))||0)});return b}var i="Width"===g?["Left","Right"]:["Top","Bottom"],l=g.toLowerCase(),m={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,
outerWidth:d.fn.outerWidth,outerHeight:d.fn.outerHeight};d.fn["inner"+g]=function(b){return b===f?m["inner"+g].call(this):this.each(function(){d(this).css(l,a(this,b)+"px")})};d.fn["outer"+g]=function(b,e){return"number"!=typeof b?m["outer"+g].call(this,b):this.each(function(){d(this).css(l,a(this,b,!0,e)+"px")})}}),d.extend(d.expr[":"],{data:function(b,g,a){return!!d.data(b,a[3])},focusable:function(b){return i(b,!isNaN(d.attr(b,"tabindex")))},tabbable:function(b){var g=d.attr(b,"tabindex"),a=isNaN(g);
return(a||0<=g)&&i(b,!a)}}),d(function(){var b=document.body,g=b.appendChild(g=document.createElement("div"));g.offsetHeight;d.extend(g.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});d.support.minHeight=100===g.offsetHeight;d.support.selectstart="onselectstart"in g;b.removeChild(g).style.display="none"}),d.extend(d.ui,{plugin:{add:function(b,g,a){var b=d.ui[b].prototype,f;for(f in a)b.plugins[f]=b.plugins[f]||[],b.plugins[f].push([g,a[f]])},call:function(b,d,a){if((d=b.plugins[d])&&
b.element[0].parentNode)for(var f=0;f<d.length;f++)b.options[d[f][0]]&&d[f][1].apply(b.element,a)}},contains:function(b,d){return document.compareDocumentPosition?b.compareDocumentPosition(d)&16:b!==d&&b.contains(d)},hasScroll:function(b,g){if("hidden"===d(b).css("overflow"))return!1;var a=g&&"left"===g?"scrollLeft":"scrollTop",f=!1;if(0<b[a])return!0;b[a]=1;f=0<b[a];b[a]=0;return f},isOverAxis:function(b,d,a){return b>d&&b<d+a},isOver:function(b,g,a,f,i,m){return d.ui.isOverAxis(b,a,i)&&d.ui.isOverAxis(g,
f,m)}}))})(jQuery);
(function(d,f){if(d.cleanData){var b=d.cleanData;d.cleanData=function(e){for(var g=0,a;null!=(a=e[g]);g++)try{d(a).triggerHandler("remove")}catch(f){}b(e)}}else{var i=d.fn.remove;d.fn.remove=function(b,g){return this.each(function(){g||(!b||d.filter(b,[this]).length)&&d("*",this).add([this]).each(function(){try{d(this).triggerHandler("remove")}catch(a){}});return i.call(d(this),b,g)})}}d.widget=function(b,g,a){var f=b.split(".")[0],i,b=b.split(".")[1];i=f+"-"+b;a||(a=g,g=d.Widget);d.expr[":"][i]=
function(a){return!!d.data(a,b)};d[f]=d[f]||{};d[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)};g=new g;g.options=d.extend(!0,{},g.options);d[f][b].prototype=d.extend(!0,g,{namespace:f,widgetName:b,widgetEventPrefix:d[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:i},a);d.widget.bridge(b,d[f][b])};d.widget.bridge=function(b,g){d.fn[b]=function(a){var i="string"==typeof a,l=Array.prototype.slice.call(arguments,1),m=this,a=!i&&l.length?d.extend.apply(null,[!0,a].concat(l)):a;if(i&&
"_"===a.charAt(0))return m;i?this.each(function(){var c=d.data(this,b),g=c&&d.isFunction(c[a])?c[a].apply(c,l):c;if(g!==c&&g!==f)return m=g,!1}):this.each(function(){var c=d.data(this,b);c?c.option(a||{})._init():d.data(this,b,new g(a,this))});return m}};d.Widget=function(b,d){arguments.length&&this._createWidget(b,d)};d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,g){d.data(g,this.widgetName,this);this.element=d(g);this.options=d.extend(!0,
{},this.options,this._getCreateOptions(),b);var a=this;this.element.bind("remove."+this.widgetName,function(){a.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return d.metadata&&d.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,g){var a=b;if(0===arguments.length)return d.extend({},this.options);if("string"==typeof b){if(g===f)return this.options[b];a={};a[b]=g}this._setOptions(a);return this},_setOptions:function(b){var g=this;d.each(b,function(a,b){g._setOption(a,b)});return this},_setOption:function(b,d){this.options[b]=d;"disabled"===b&&this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
d);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,g,a){var f,i=this.options[b],a=a||{},g=d.Event(g);g.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();g.target=this.element[0];if(b=g.originalEvent)for(f in b)f in g||(g[f]=b[f]);this.element.trigger(g,a);return!(d.isFunction(i)&&!1===i.call(this.element[0],g,a)||g.isDefaultPrevented())}}})(jQuery);(function(d){d.widget("ui.stars",{options:{inputType:"radio",split:0,disabled:!1,cancelTitle:"Cancel Rating",cancelValue:0,cancelShow:!0,disableValue:!0,oneVoteOnly:!1,showTitles:!1,captionEl:null,callback:null,starWidth:16,cancelClass:"ui-stars-cancel",starClass:"ui-stars-star",starOnClass:"ui-stars-star-on",starHoverClass:"ui-stars-star-hover",starDisabledClass:"ui-stars-star-disabled",cancelHoverClass:"ui-stars-cancel-hover",cancelDisabledClass:"ui-stars-cancel-disabled"},_create:function(){function f(a,
d){if(-1!=a){var g=d?e.starHoverClass:e.starOnClass,f=d?e.starOnClass:e.starHoverClass;i.$stars.eq(a).prevAll("."+e.starClass).andSelf().removeClass(f).addClass(g);i.$stars.eq(a).nextAll("."+e.starClass).removeClass(e.starHoverClass+" "+e.starOnClass);i._showCap(e.id2title[a])}else b()}function b(){i.$stars.removeClass(e.starOnClass+" "+e.starHoverClass);i._showCap("")}var i=this,e=this.options,g=0;this.element.data("former.stars",this.element.html());e.isSelect="select"==e.inputType;this.$form=d(this.element).closest("form");
this.$selec=e.isSelect?d("select",this.element):null;this.$rboxs=e.isSelect?d("option",this.$selec):d(":radio",this.element);this.$stars=this.$rboxs.map(function(a){var b=this.value,f=(e.isSelect?this.text:this.title)||this.value,m=e.isSelect&&this.defaultSelected||this.defaultChecked;0==a&&(e.split="number"!=typeof e.split?0:e.split,e.val2id=[],e.id2val=[],e.id2title=[],e.name=e.isSelect?i.$selec.get(0).name:this.name,e.disabled=e.disabled||(e.isSelect?d(i.$selec).attr("disabled"):d(this).attr("disabled")));
if(b==e.cancelValue)return e.cancelTitle=f,null;e.val2id[b]=g;e.id2val[g]=b;e.id2title[g]=f;m&&(e.checked=g,e.value=e.defaultValue=b,e.title=f);a=d("<div/>").addClass(e.starClass);b=d("<a/>").attr("title",e.showTitles?f:"").text(b);e.split&&(f=g%e.split,m=Math.floor(e.starWidth/e.split),a.width(m),b.css("margin-left","-"+f*m+"px"));g++;return a.append(b).get(0)});e.items=g;e.isSelect?this.$selec.remove():this.$rboxs.remove();this.$cancel=d("<div/>").addClass(e.cancelClass).append(d("<a/>").attr("title",
e.showTitles?e.cancelTitle:"").text(e.cancelValue));e.cancelShow&=!e.disabled&&!e.oneVoteOnly;e.cancelShow&&this.element.append(this.$cancel);this.element.append(this.$stars);void 0===e.checked&&(e.checked=-1,e.value=e.defaultValue=e.cancelValue,e.title="");this.$value=d("<input type='hidden' name='"+e.name+"' value='"+e.value+"' />");this.element.append(this.$value);this.$stars.bind("click.stars",function(a){if(!e.forceSelect&&e.disabled)return false;var b=i.$stars.index(this);e.checked=b;e.value=
e.id2val[b];e.title=e.id2title[b];i.$value.attr({disabled:e.disabled?"disabled":"",value:e.value});f(b,false);i._disableCancel();!e.forceSelect&&i.callback(a,"star")}).bind("mouseover.stars",function(){if(e.disabled)return false;var a=i.$stars.index(this);f(a,true)}).bind("mouseout.stars",function(){if(e.disabled)return false;f(i.options.checked,false)});this.$cancel.bind("click.stars",function(a){if(!e.forceSelect&&(e.disabled||e.value==e.cancelValue))return false;e.checked=-1;e.value=e.cancelValue;
e.title="";i.$value.val(e.value);e.disableValue&&i.$value.attr({disabled:"disabled"});b();i._disableCancel();!e.forceSelect&&i.callback(a,"cancel")}).bind("mouseover.stars",function(){if(i._disableCancel())return false;i.$cancel.addClass(e.cancelHoverClass);b();i._showCap(e.cancelTitle)}).bind("mouseout.stars",function(){if(i._disableCancel())return false;i.$cancel.removeClass(e.cancelHoverClass);i.$stars.triggerHandler("mouseout.stars")});this.$form.bind("reset.stars",function(){!e.disabled&&i.select(e.defaultValue)});
d(window).unload(function(){i.$cancel.unbind(".stars");i.$stars.unbind(".stars");i.$form.unbind(".stars");i.$selec=i.$rboxs=i.$stars=i.$value=i.$cancel=i.$form=null});this.select(e.value);e.disabled&&this.disable()},_disableCancel:function(){var d=this.options,b=d.disabled||d.oneVoteOnly||d.value==d.cancelValue;b?this.$cancel.removeClass(d.cancelHoverClass).addClass(d.cancelDisabledClass):this.$cancel.removeClass(d.cancelDisabledClass);this.$cancel.css("opacity",b?0.5:1);return b},_disableAll:function(){var d=
this.options;this._disableCancel();d.disabled?this.$stars.filter("div").addClass(d.starDisabledClass):this.$stars.filter("div").removeClass(d.starDisabledClass)},_showCap:function(d){var b=this.options;b.captionEl&&b.captionEl.text(d)},value:function(){return this.options.value},select:function(d){var b=this.options,d=d==b.cancelValue?this.$cancel:this.$stars.eq(b.val2id[d]);b.forceSelect=!0;d.triggerHandler("click.stars");b.forceSelect=!1},selectID:function(d){var b=this.options,d=-1==d?this.$cancel:
this.$stars.eq(d);b.forceSelect=!0;d.triggerHandler("click.stars");b.forceSelect=!1},enable:function(){this.options.disabled=!1;this._disableAll()},disable:function(){this.options.disabled=!0;this._disableAll()},destroy:function(){this.$form.unbind(".stars");this.$cancel.unbind(".stars").remove();this.$stars.unbind(".stars").remove();this.$value.remove();this.element.unbind(".stars").html(this.element.data("former.stars")).removeData("stars");return this},callback:function(d,b){var i=this.options;
i.callback&&i.callback(this,b,i.value,d);i.oneVoteOnly&&!i.disabled&&this.disable()}});d.extend(d.ui.stars,{version:"3.0.1"})})(jQuery);(function(d,f,b){var i,e;e=function(){var d,a,e;a=b.createElement("div");a.style.position="absolute";a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";b.body.appendChild(a);d=a.offsetWidth;e=a.scrollWidth;b.body.removeChild(a);return d-e};i=function(){function g(a){this.el=a;this.generate();this.createEvents();this.addEvents();this.reset()}g.prototype.createEvents=function(){var a=this;this.events={down:function(e){a.isDrag=!0;a.offsetY=e.clientY-a.slider.offset().top;a.pane.addClass("active");
d(b).bind("mousemove",a.events.drag);d(b).bind("mouseup",a.events.up);return!1},drag:function(b){a.sliderY=b.clientY-a.el.offset().top-a.offsetY;a.scroll();return!1},up:function(){a.isDrag=!1;a.pane.removeClass("active");d(b).unbind("mousemove",a.events.drag);d(b).unbind("mouseup",a.events.up);return!1},resize:function(){a.reset()},panedown:function(b){a.sliderY=b.clientY-a.el.offset().top-0.5*a.sliderH;a.scroll();a.events.down(b)},scroll:function(){var b;!0!==a.isDrag&&(b=a.content[0],a.slider.css({top:b.scrollTop/
(b.scrollHeight-b.clientHeight)*(a.paneH-a.sliderH)+"px"}))},wheel:function(b){a.sliderY+=-b.wheelDeltaY||-b.delta;a.scroll();return!1}}};g.prototype.addEvents=function(){var a,b;a=this.events;b=this.pane;d(f).bind("resize",a.resize);this.slider.bind("mousedown",a.down);b.bind("mousedown",a.panedown);this.content.bind("scroll",a.scroll);f.addEventListener&&(b=b[0],b.addEventListener("mousewheel",a.wheel,!1),b.addEventListener("DOMMouseScroll",a.wheel,!1))};g.prototype.removeEvents=function(){var a,
b;a=this.events;b=this.pane;d(f).unbind("resize",a.resize);this.slider.unbind("mousedown",a.down);b.unbind("mousedown",a.panedown);this.content.unbind("scroll",a.scroll);f.addEventListener&&(b=b[0],b.removeEventListener("mousewheel",a.wheel,!1),b.removeEventListener("DOMMouseScroll",a.wheel,!1))};g.prototype.generate=function(){this.el.append('<div class="pane"><div class="slider"></div></div>');this.content=d(this.el.children(".content")[0]);this.slider=this.el.find(".slider");this.pane=this.el.find(".pane");
this.scrollW=e();0===this.scrollbarWidth&&(this.scrollW=0);this.content.css({right:-this.scrollW+"px"})};g.prototype.reset=function(){var a;0===this.el.find(".pane").length&&(this.generate(),this.stop());!0===this.isDead&&(this.isDead=!1,this.pane.show(),this.addEvents());a=this.content[0];this.contentH=a.scrollHeight+this.scrollW;this.paneH=this.pane.outerHeight();this.sliderH=this.paneH/this.contentH*this.paneH;this.sliderH=Math.round(this.sliderH);this.scrollH=this.paneH-this.sliderH;this.slider.height(this.sliderH);
this.diffH=a.scrollHeight-a.clientHeight;this.pane.show();this.paneH>=this.content[0].scrollHeight&&this.pane.hide()};g.prototype.scroll=function(){var a;this.sliderY=Math.max(0,this.sliderY);this.sliderY=Math.min(this.scrollH,this.sliderY);a=this.paneH-this.contentH+this.scrollW;a=a*this.sliderY/this.scrollH;this.content.scrollTop(-a);return this.slider.css({top:this.sliderY})};g.prototype.scrollBottom=function(a){var b,d;b=this.diffH;d=this.content[0].scrollTop;this.reset();d<b&&0!==d||this.content.scrollTop(this.contentH-
this.content.height()-a)};g.prototype.scrollTop=function(a){this.reset();this.content.scrollTop(a+0)};g.prototype.stop=function(){this.isDead=!0;this.removeEvents();this.pane.hide()};return g}();d.fn.nanoScroller=function(b){b||(b={});d.browser.msie&&8>parseInt(d.browser.version,10)||this.each(function(){var a,e;a=d(this);e=a.data("scrollbar");void 0===e&&(e=new i(a),a.data("scrollbar",e));return b.scrollBottom?e.scrollBottom(b.scrollBottom):b.scrollTop?e.scrollTop(b.scrollTop):"bottom"===b.scroll?
e.scrollBottom(0):"top"===b.scroll?e.scrollTop(0):b.stop?e.stop():e.reset()})}})(jQuery,window,document);(function(d,f){var b=d.document,i=d.Modernizr,e=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},g=["Moz","Webkit","O","Ms"],a=function(a){var d=b.documentElement.style,c;if("string"==typeof d[a])return a;for(var a=e(a),k=0,f=g.length;k<f;k++)if(c=g[k]+a,"string"==typeof d[c])return c},n=a("transform"),l=a("transitionProperty"),m={csstransforms:function(){return!!n},csstransforms3d:function(){var b=!!a("perspective");if(b){var b="@media ("+" -o- -moz- -ms- -webkit- -khtml-".split(" ").join("transform-3d),(")+
"modernizr)",d=f("<style>"+b+"{#modernizr{height:3px}}</style>").appendTo("head"),c=f('<div id="modernizr" />').appendTo("html"),b=3===c.height();c.remove();d.remove()}return b},csstransitions:function(){return!!l}},c;if(i)for(c in m)i.hasOwnProperty(c)||i.addTest(c,m[c]);else{var i=d.Modernizr={_version:"1.6ish: miniModernizr for Isotope"},h=" ",p;for(c in m)p=m[c](),i[c]=p,h+=" "+(p?"":"no-")+c;f("html").addClass(h)}if(i.csstransforms){var o=i.csstransforms3d?{translate:function(a){return"translate3d("+
a[0]+"px, "+a[1]+"px, 0) "},scale:function(a){return"scale3d("+a+", "+a+", 1) "}}:{translate:function(a){return"translate("+a[0]+"px, "+a[1]+"px) "},scale:function(a){return"scale("+a+") "}},q=function(a,b,d){var c=f.data(a,"isoTransform")||{},e={},k,g={};e[b]=d;f.extend(c,e);for(k in c)b=c[k],g[k]=o[k](b);k=(g.translate||"")+(g.scale||"");f.data(a,"isoTransform",c);a.style[n]=k};f.cssNumber.scale=!0;f.cssHooks.scale={set:function(a,b){q(a,"scale",b)},get:function(a){return(a=f.data(a,"isoTransform"))&&
a.scale?a.scale:1}};f.fx.step.scale=function(a){f.cssHooks.scale.set(a.elem,a.now+a.unit)};f.cssNumber.translate=!0;f.cssHooks.translate={set:function(a,b){q(a,"translate",b)},get:function(a){return(a=f.data(a,"isoTransform"))&&a.translate?a.translate:[0,0]}}}var t,y;i.csstransitions&&(t={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd",transitionProperty:"transitionEnd"}[l],y=a("transitionDuration"));var u=f.event,k;u.special.smartresize=
{setup:function(){f(this).bind("resize",u.special.smartresize.handler)},teardown:function(){f(this).unbind("resize",u.special.smartresize.handler)},handler:function(a,b){var c=this,d=arguments;a.type="smartresize";k&&clearTimeout(k);k=setTimeout(function(){jQuery.event.handle.apply(c,d)},"execAsap"===b?0:100)}};f.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};f.Isotope=function(a,b,c){this.element=f(b);this._create(a);this._init(c)};var v=
["overflow","position","width","height"],x=f(d);f.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:0.001},visibleStyle:{opacity:1,scale:1},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!f.browser.opera,itemPositionDataEnabled:!1};f.Isotope.prototype={_create:function(a){this.options=
f.extend({},f.Isotope.settings,a);this.styleQueue=[];this.elemCount=0;a=this.element[0].style;this.originalStyle={};for(var b=0,c=v.length;b<c;b++){var d=v[b];this.originalStyle[d]=a[d]||""}this.element.css({overflow:"hidden",position:"relative"});this._updateAnimationEngine();this._updateUsingTransforms();this.options.getSortData=f.extend(this.options.getSortData,{"original-order":function(a,b){b.elemCount++;return b.elemCount},random:function(){return Math.random()}});this.reloadItems();this.offset=
{left:parseInt(this.element.css("padding-left"),10),top:parseInt(this.element.css("padding-top"),10)};var e=this;setTimeout(function(){e.element.addClass(e.options.containerClass)},0);this.options.resizable&&x.bind("smartresize.isotope",function(){e.resize()});this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(a){var b=this.options.itemSelector,a=b?a.filter(b).add(a.find(b)):a,b={position:"absolute"};this.usingTransforms&&(b.left=0,b.top=0);a.css(b).addClass(this.options.itemClass);
this.updateSortData(a,!0);return a},_init:function(a){this.$filteredAtoms=this._filter(this.$allAtoms);this._sort();this.reLayout(a)},option:function(a){if(f.isPlainObject(a)){this.options=f.extend(!0,this.options,a);var b,c;for(c in a)b="_update"+e(c),this[b]&&this[b]()}},_updateAnimationEngine:function(){var a;switch(this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"")){case "css":case "none":a=!1;break;case "jquery":a=!0;break;default:a=!i.csstransitions}this.isUsingJQueryAnimation=
a;this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var a=this.usingTransforms=this.options.transformsEnabled&&i.csstransforms&&i.csstransitions&&!this.isUsingJQueryAnimation;a||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale);this.getPositionStyles=a?this._translate:this._positionAbs},_filter:function(a){var b=""===this.options.filter?"*":this.options.filter;if(!b)return a;var c=this.options.hiddenClass,
d="."+c,e=a.filter(d),k=e;"*"!==b&&(k=e.filter(b),this.styleQueue.push({$el:a.not(d).not(b).addClass(c),style:this.options.hiddenStyle}));this.styleQueue.push({$el:k,style:this.options.visibleStyle});k.removeClass(c);return a.filter(b)},updateSortData:function(a,b){var c=this,d=this.options.getSortData,e,k;a.each(function(){e=f(this);k={};for(var a in d)!b&&"original-order"===a?k[a]=f.data(this,"isotope-sort-data")[a]:k[a]=d[a](e,c);f.data(this,"isotope-sort-data",k)})},_sort:function(){var a=this.options.sortBy,
b=this._getSorter,c=this.options.sortAscending?1:-1;this.$filteredAtoms.sort(function(d,e){var k=b(d,a),g=b(e,a);k===g&&"original-order"!==a&&(k=b(d,"original-order"),g=b(e,"original-order"));return(k>g?1:k<g?-1:0)*c})},_getSorter:function(a,b){return f.data(a,"isotope-sort-data")[b]},_translate:function(a,b){return{translate:[a,b]}},_positionAbs:function(a,b){return{left:a,top:b}},_pushPosition:function(a,b,c){var b=b+this.offset.left,c=c+this.offset.top,d=this.getPositionStyles(b,c);this.styleQueue.push({$el:a,
style:d});this.options.itemPositionDataEnabled&&a.data("isotope-item-position",{x:b,y:c})},layout:function(a,b){var c=this.options.layoutMode;this["_"+c+"Layout"](a);this.options.resizesContainer&&this.styleQueue.push({$el:this.element,style:this["_"+c+"GetContainerSize"]()});this._processStyleQueue(a,b);this.isLaidOut=!0},_processStyleQueue:function(a,b){var c=this.isLaidOut?this.isUsingJQueryAnimation?"animate":"css":"css",d=this.options.animationOptions,e=this.options.onLayout,k,g,h,x;g=function(a,
b){b.$el[c](b.style,d)};if(this._isInserting&&this.isUsingJQueryAnimation)g=function(a,b){k=b.$el.hasClass("no-transition")?"css":c;b.$el[k](b.style,d)};else if(b||e||d.complete){var v=!1,l=[b,e,d.complete],o=this;h=!0;x=function(){if(!v){for(var b,c=0,d=l.length;c<d;c++)b=l[c],"function"==typeof b&&b.call(o.element,a);v=!0}};if(this.isUsingJQueryAnimation&&"animate"===c)d.complete=x,h=!1;else if(i.csstransitions){for(var e=0,p=this.styleQueue[0].$el;!p.length;){p=this.styleQueue[e++];if(!p)return;
p=p.$el}0<parseFloat(getComputedStyle(p[0])[y])&&(g=function(a,b){b.$el[c](b.style,d).one(t,x)},h=!1)}}f.each(this.styleQueue,g);h&&x();this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(a){this["_"+this.options.layoutMode+"Reset"]();this.layout(this.$filteredAtoms,a)},addItems:function(a,b){var c=this._getAtoms(a);this.$allAtoms=this.$allAtoms.add(c);b&&b(c)},insert:function(a,b){this.element.append(a);var c=this;this.addItems(a,
function(a){a=c._filter(a);c._addHideAppended(a);c._sort();c.reLayout();c._revealAppended(a,b)})},appended:function(a,b){var c=this;this.addItems(a,function(a){c._addHideAppended(a);c.layout(a);c._revealAppended(a,b)})},_addHideAppended:function(a){this.$filteredAtoms=this.$filteredAtoms.add(a);a.addClass("no-transition");this._isInserting=!0;this.styleQueue.push({$el:a,style:this.options.hiddenStyle})},_revealAppended:function(a,b){var c=this;setTimeout(function(){a.removeClass("no-transition");
c.styleQueue.push({$el:a,style:c.options.visibleStyle});c._isInserting=!1;c._processStyleQueue(a,b)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(a,b){var c=this,d=function(){c.$allAtoms=c.$allAtoms.not(a);a.remove()};a.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:a,style:this.options.hiddenStyle}),this.$filteredAtoms=this.$filteredAtoms.not(a),this._sort(),this.reLayout(d,b)):(d(),b&&b.call(this.element))},
shuffle:function(a){this.updateSortData(this.$allAtoms);this.options.sortBy="random";this._sort();this.reLayout(a)},destroy:function(){var a=this.usingTransforms,b=this.options;this.$allAtoms.removeClass(b.hiddenClass+" "+b.itemClass).each(function(){var b=this.style;b.position="";b.top="";b.left="";b.opacity="";a&&(b[n]="")});for(var c=this.element[0].style,d=0,e=v.length;d<e;d++){var k=v[d];c[k]=this.originalStyle[k]}this.element.unbind(".isotope").undelegate("."+b.hiddenClass,"click").removeClass(b.containerClass).removeData("isotope");
x.unbind(".isotope")},_getSegments:function(a){var b=this.options.layoutMode,c=a?"rowHeight":"columnWidth",d=a?"height":"width",a=a?"rows":"cols",k=this.element[d](),d=this.options[b]&&this.options[b][c]||this.$filteredAtoms["outer"+e(d)](!0)||k,k=Math.floor(k/d),k=Math.max(k,1);this[b][a]=k;this[b][c]=d},_checkIfSegmentsChanged:function(a){var b=this.options.layoutMode,c=a?"rows":"cols",d=this[b][c];this._getSegments(a);return this[b][c]!==d},_masonryReset:function(){this.masonry={};this._getSegments();
var a=this.masonry.cols;for(this.masonry.colYs=[];a--;)this.masonry.colYs.push(0)},_masonryLayout:function(a){var b=this,c=b.masonry;a.each(function(){var a=f(this),d=Math.ceil(a.outerWidth(!0)/c.columnWidth),d=Math.min(d,c.cols);if(1===d)b._masonryPlaceBrick(a,c.colYs);else{var e=c.cols+1-d,k=[],j,g;for(g=0;g<e;g++)j=c.colYs.slice(g,g+d),k[g]=Math.max.apply(Math,j);b._masonryPlaceBrick(a,k)}})},_masonryPlaceBrick:function(a,b){for(var c=Math.min.apply(Math,b),d=0,e=0,k=b.length;e<k;e++)if(b[e]===
c){d=e;break}this._pushPosition(a,this.masonry.columnWidth*d,c);c+=a.outerHeight(!0);k=this.masonry.cols+1-k;for(e=0;e<k;e++)this.masonry.colYs[d+e]=c},_masonryGetContainerSize:function(){return{height:Math.max.apply(Math,this.masonry.colYs)}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(a){var b=this,c=this.element.width(),d=this.fitRows;a.each(function(){var a=f(this),e=a.outerWidth(!0),
k=a.outerHeight(!0);0!==d.x&&e+d.x>c&&(d.x=0,d.y=d.height);b._pushPosition(a,d.x,d.y);d.height=Math.max(d.y+k,d.height);d.x+=e})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0};this._getSegments();this._getSegments(!0)},_cellsByRowLayout:function(a){var b=this,c=this.cellsByRow;a.each(function(){var a=f(this),d=Math.floor(c.index/c.cols),e=Math.round((c.index%c.cols+0.5)*c.columnWidth-
a.outerWidth(!0)/2),d=Math.round((d+0.5)*c.rowHeight-a.outerHeight(!0)/2);b._pushPosition(a,e,d);c.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(a){var b=this;a.each(function(){var a=f(this);b._pushPosition(a,0,b.straightDown.y);
b.straightDown.y+=a.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={};this._getSegments(!0);var a=this.masonryHorizontal.rows;for(this.masonryHorizontal.rowXs=[];a--;)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(a){var b=this,c=b.masonryHorizontal;a.each(function(){var a=f(this),d=Math.ceil(a.outerHeight(!0)/c.rowHeight),
d=Math.min(d,c.rows);if(1===d)b._masonryHorizontalPlaceBrick(a,c.rowXs);else{var e=c.rows+1-d,k=[],g,j;for(j=0;j<e;j++)g=c.rowXs.slice(j,j+d),k[j]=Math.max.apply(Math,g);b._masonryHorizontalPlaceBrick(a,k)}})},_masonryHorizontalPlaceBrick:function(a,b){for(var c=Math.min.apply(Math,b),d=0,e=0,k=b.length;e<k;e++)if(b[e]===c){d=e;break}this._pushPosition(a,c,this.masonryHorizontal.rowHeight*d);c+=a.outerWidth(!0);k=this.masonryHorizontal.rows+1-k;for(e=0;e<k;e++)this.masonryHorizontal.rowXs[d+e]=c},
_masonryHorizontalGetContainerSize:function(){return{width:Math.max.apply(Math,this.masonryHorizontal.rowXs)}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(a){var b=this,c=this.element.height(),d=this.fitColumns;a.each(function(){var a=f(this),e=a.outerWidth(!0),k=a.outerHeight(!0);0!==d.y&&k+d.y>c&&(d.x=d.width,d.y=0);b._pushPosition(a,d.x,d.y);d.width=Math.max(d.x+e,d.width);
d.y+=k})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0};this._getSegments();this._getSegments(!0)},_cellsByColumnLayout:function(a){var b=this,c=this.cellsByColumn;a.each(function(){var a=f(this),d=c.index%c.rows,e=Math.round((Math.floor(c.index/c.rows)+0.5)*c.columnWidth-a.outerWidth(!0)/2),d=Math.round((d+0.5)*c.rowHeight-a.outerHeight(!0)/2);b._pushPosition(a,
e,d);c.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(a){var b=this;a.each(function(){var a=f(this);b._pushPosition(a,b.straightAcross.x,0);b.straightAcross.x+=a.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},
_straightAcrossResizeChanged:function(){return!0}};f.fn.imagesLoaded=function(a){function b(a){a=a.target;a.src!==g&&-1===f.inArray(a,h)&&(h.push(a),0>=--k&&(setTimeout(c),e.unbind(".imagesLoaded",b)))}function c(){a.call(d,e)}var d=this,e=d.find("img").add(d.filter("img")),k=e.length,g="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",h=[];k||c();e.bind("load.imagesLoaded error.imagesLoaded",b).each(function(){var a=this.src;this.src=g;this.src=a});return d};f.fn.isotope=function(a,
b){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var b=f.data(this,"isotope");b?!f.isFunction(b[a])||"_"===a.charAt(0)?d.console&&d.console.error("no such method '"+a+"' for isotope instance"):b[a].apply(b,c):d.console&&d.console.error("cannot call methods on isotope prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var c=f.data(this,"isotope");c?(c.option(a),c._init(b)):f.data(this,"isotope",new f.Isotope(a,this,b))});
return this}})(window,jQuery);(function(d,f,b){function i(){a=f[n](function(){e.each(function(){var a=d(this),b=a.width(),c=a.height(),e=d.data(this,m);if(b!==e.w||c!==e.h)a.trigger(l,[e.w=b,e.h=c])});i()},g[c])}"$:nomunge";var e=d([]),g=d.resize=d.extend(d.resize,{}),a,n="setTimeout",l="resize",m=l+"-special-event",c="delay";g[c]=250;g.throttleWindow=!0;d.event.special[l]={setup:function(){if(!g.throttleWindow&&this[n])return!1;var a=d(this);e=e.add(a);d.data(this,m,{w:a.width(),h:a.height()});1===e.length&&i()},teardown:function(){if(!g.throttleWindow&&
this[n])return!1;var b=d(this);e=e.not(b);b.removeData(m);e.length||clearTimeout(a)},add:function(a){function c(a,g,f){var h=d(this),k=d.data(this,m);k.w=g!==b?g:h.width();k.h=f!==b?f:h.height();e.apply(this,arguments)}if(!g.throttleWindow&&this[n])return!1;var e;if(d.isFunction(a))return e=a,c;e=a.handler;a.handler=c}}})(jQuery,this);(function(d,f){function b(a,b){var c=0,d=b.length,e;if("undefined"==typeof a)return-1;if(a.constructor===String)for(;c<d;c+=1){if(0===a.localeCompare(b[c]))return c}else for(;c<d;c+=1)if(e=b[c],e.constructor===String){if(0===e.localeCompare(a))return c}else if(e===a)return c;return-1}function i(a,b){return a===b?!0:a===f||b===f||null===a||null===b?!1:a.constructor===String?0===a.localeCompare(b):b.constructor===String?0===b.localeCompare(a):!1}function e(a,b){var c,e,g;if(null===a||1>a.length)return[];
c=a.split(b);e=0;for(g=c.length;e<g;e+=1)c[e]=d.trim(c[e]);return c}function g(a){a.bind("keydown",function(){a.data("keyup-change-value",a.val())});a.bind("keyup",function(){a.val()!==a.data("keyup-change-value")&&a.trigger("keyup-change")})}function a(a){a.bind("mousemove",function(a){var b=d(document).data("select2-lastpos");(b===f||b.x!==a.pageX||b.y!==a.pageY)&&d(a.target).trigger("mousemove-filtered",a)})}function n(a,b){var c;return function(){window.clearTimeout(c);c=window.setTimeout(b,a)}}
function l(a,c){var d=n(a,function(a){c.trigger("scroll-debounced",a)});c.bind("scroll",function(a){0<=b(a.target,c.get())&&d(a)})}function m(a){a.preventDefault();a.stopPropagation()}function c(a){var b,c=0,e=null,g=a.quietMillis||100;return function(f){window.clearTimeout(b);b=window.setTimeout(function(){var b=c+=1,g=a.data,h=a.transport||d.ajax,g=g.call(this,f.term,f.page,f.context);null!==e&&e.abort();e=h.call(null,{url:a.url,dataType:a.dataType,data:g,success:function(d){b<c||(d=a.results(d,
f.page),self.context=d.context,f.callback(d))}})},g)}}function h(a){var b=a,c=function(a){return""+a.text};d.isArray(b)||(c=b.text,d.isFunction(c)||(c=function(a){return a[b.text]}),b=b.results);return function(a){var e=a.term,k={};if(e==="")a.callback({results:b});else{k.results=d(b).filter(function(){return a.matcher(e,c(this))}).get();a.callback(k)}}}function p(a){return d.isFunction(a)?a:function(b){var c=b.term,e={results:[]};d(a).each(function(){var a=this.text!==f,d=a?this.text:this;if(""===
c||b.matcher(c,d))e.results.push(a?this:{id:this,text:this})});b.callback(e)}}function o(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=d.extend(c.prototype,b);return c}if(window.Select2===f){var q,t,y,u;q={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case q.LEFT:case q.RIGHT:case q.UP:case q.DOWN:return!0}return!1},
isControl:function(a){a=a.which?a.which:a;switch(a){case q.SHIFT:case q.CTRL:case q.ALT:return!0}return!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};d(document).delegate("*","mousemove",function(a){d(document).data("select2-lastpos",{x:a.pageX,y:a.pageY})});d(document).ready(function(){d(document).delegate("*","mousedown focusin touchend",function(a){var b=d(a.target).closest("div.select2-container").get(0);d(document).find("div.select2-container-active").each(function(){this!==
b&&d(this).data("select2").blur()})})});t=o(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(b){var c,e;this.opts=b=this.prepareOpts(b);this.id=b.id;b.element.data("select2")!==f&&null!==b.element.data("select2")&&this.destroy();this.enabled=!0;this.container=this.createContainer();b.element.attr("class")!==f&&this.container.addClass(b.element.attr("class"));this.opts.element.data("select2",this).hide().after(this.container);this.container.data("select2",
this);this.dropdown=this.container.find(".select2-drop");this.results=c=this.container.find(".select2-results");this.search=e=this.container.find("input[type=text]");this.resultsPage=0;this.context=null;this.initContainer();a(this.results);this.container.delegate(".select2-results","mousemove-filtered",this.bind(this.highlightUnderEvent));l(80,this.results);this.container.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded));d.fn.mousewheel&&c.mousewheel(function(a,b,d,
e){b=c.scrollTop();0<e&&0>=b-e?(c.scrollTop(0),m(a)):0>e&&c.get(0).scrollHeight-c.scrollTop()+e<=c.height()&&(c.scrollTop(c.get(0).scrollHeight-c.height()),m(a))});g(e);e.bind("keyup-change",this.bind(this.updateResults));e.bind("focus",function(){e.addClass("select2-focused")});e.bind("blur",function(){e.removeClass("select2-focused")});this.container.delegate(".select2-results","click",this.bind(function(a){0<d(a.target).closest(".select2-result:not(.select2-disabled)").length?(this.highlightUnderEvent(a),
this.selectHighlighted(a)):(m(a),this.focusSearch())}));d.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());b.element.is(":disabled")&&this.disable()},destroy:function(){var a=this.opts.element.data("select2");a!==f&&(a.container.remove(),a.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(a){var b,g,j;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=g=a.element);g&&d.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),
function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=d.extend({},{formatResult:function(a){return a.text},formatSelection:function(a){return a.text},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){return"Please enter "+(b-a.length)+" more characters"},minimumResultsForSearch:0,minimumInputLength:0,id:function(a){return a.id},matcher:function(a,b){return b.toUpperCase().indexOf(a.toUpperCase())>=
0}},a);"function"!==typeof a.id&&(j=a.id,a.id=function(a){return a[j]});g?(a.query=this.bind(function(a){var c={results:[],more:false},e=a.term,g=this.getPlaceholder();b.find("option").each(function(b){var k=d(this),h=k.text();if(b===0&&g!==f&&h==="")return true;a.matcher(e,h)&&c.results.push({id:k.attr("value"),text:h})});a.callback(c)}),a.id=function(a){return a.id}):"query"in a||("ajax"in a?a.query=c(a.ajax):"data"in a?a.query=h(a.data):"tags"in a&&(a.query=p(a.tags),a.createSearchChoice=function(a){return{id:a,
text:a}},a.initSelection=function(a){var b=[];d(e(a.val(),",")).each(function(){b.push({id:this,text:this})});return b}));if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))},triggerChange:function(){this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger("change");
this.opts.element.data("select2-change-triggered",!1)},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},open:function(){this.opened()||(this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown.show(),
this.ensureHighlightVisible(),this.focusSearch())},close:function(){this.opened()&&(this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch())},clearSearch:function(){},ensureHighlightVisible:function(){var a=this.results,b,c,e,g;b=a.children(".select2-result");c=this.highlight();0>c||(e=d(b[c]),g=e.offset().top+e.outerHeight(),c===b.length-1&&(b=a.find("li.select2-more-results"),0<b.length&&(g=b.offset().top+b.outerHeight())),b=a.offset().top+
a.outerHeight(),g>b&&a.scrollTop(a.scrollTop()+(g-b)),e=e.offset().top-a.offset().top,0>e&&a.scrollTop(a.scrollTop()+e))},moveHighlight:function(a){for(var b=this.results.children(".select2-result"),c=this.highlight();-1<c&&c<b.length;)if(c+=a,!d(b[c]).hasClass("select2-disabled")){this.highlight(c);break}},highlight:function(a){var c=this.results.children(".select2-result");if(0===arguments.length)return b(c.filter(".select2-highlighted")[0],c.get());c.removeClass("select2-highlighted");a>=c.length&&
(a=c.length-1);0>a&&(a=0);d(c[a]).addClass("select2-highlighted");this.ensureHighlightVisible();this.opened()&&this.focusSearch()},highlightUnderEvent:function(a){a=d(a.target).closest(".select2-result");0<a.length&&this.highlight(a.index())},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,e=-1,g=this.resultsPage+1;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),0>=c&&(b.addClass("select2-active"),this.opts.query({term:this.search.val(),page:g,context:self.context,
matcher:self.opts.matcher,callback:this.bind(function(c){var h=[],i=this;d(c.results).each(function(){h.push("<li class='select2-result'>");h.push(i.opts.formatResult(this));h.push("</li>")});b.before(h.join(""));a.find(".select2-result").each(function(a){var b=d(this);b.data("select2-data")!==f?e=a:b.data("select2-data",c.results[a-e-1])});c.more?b.removeClass("select2-active"):b.remove();this.resultsPage=g})})))},updateResults:function(a){function b(a){e.html(a);e.scrollTop(0);c.removeClass("select2-active")}
var c=this.search,e=this.results,g=this.opts,h=this;!0!==a&&!1===this.showSearchInput||(c.addClass("select2-active"),c.val().length<g.minimumInputLength?b("<li class='select2-no-results'>"+g.formatInputTooShort(c.val(),g.minimumInputLength)+"</li>"):(this.resultsPage=1,g.query({term:c.val(),page:this.resultsPage,context:null,matcher:g.matcher,callback:this.bind(function(l){var o=[],p;this.opts.createSearchChoice&&""!==c.val()&&(p=this.opts.createSearchChoice.call(null,c.val(),l.results),p!==f&&null!==
p&&h.id(p)!==f&&null!==h.id(p)&&0===d(l.results).filter(function(){return i(h.id(this),h.id(p))}).length&&l.results.push(p));0===l.results.length?b("<li class='select2-no-results'>"+g.formatNoMatches(c.val())+"</li>"):(d(l.results).each(function(){o.push("<li class='select2-result'>");o.push(g.formatResult(this));o.push("</li>")}),!0===l.more&&o.push("<li class='select2-more-results'>Loading more results...</li>"),b(o.join("")),e.children(".select2-result").each(function(a){a=l.results[a];d(this).data("select2-data",
a)}),this.postprocessResults(l,a))})})))},cancel:function(){this.close()},blur:function(){window.setTimeout(this.bind(function(){this.close();this.container.removeClass("select2-container-active");this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.search.blur()}),10)},focusSearch:function(){window.setTimeout(this.bind(function(){this.search.focus()}),10)},selectHighlighted:function(){var a=this.results.find(".select2-highlighted:not(.select2-disabled)").data("select2-data");
if(a)this.onSelect(a)},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},getContainerWidth:function(){var a,b,c,d;if(this.opts.width!==f)return this.opts.width;a=this.opts.element.attr("style");if(a!==f){a=a.split(";");c=0;for(d=a.length;c<d;c+=1)if(b=a[c].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==b&&1<=b.length)return b[1]}return this.opts.element.width()+"px"}});
y=o(t,{createContainer:function(){return d("<div></div>",{"class":"select2-container",style:"width: "+this.getContainerWidth()}).html("    <a href='javascript:void(0)' class='select2-choice'>   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>   <div><b></b></div></a>    <div class='select2-drop' style='display:none;'>   <div class='select2-search'>       <input type='text' autocomplete='off'/>   </div>   <ul class='select2-results'>   </ul></div>")},open:function(){this.opened()||
this.parent.open.apply(this,arguments)},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.selection.focus()},isFocused:function(){return this.selection.is(":focus")},cancel:function(){this.parent.cancel.apply(this,arguments);this.selection.focus()},initContainer:function(){var a,b=this.container,c=!1;this.selection=a=b.find(".select2-choice");this.search.bind("keydown",this.bind(function(a){switch(a.which){case q.UP:case q.DOWN:this.moveHighlight(a.which===
q.UP?-1:1);m(a);break;case q.TAB:case q.ENTER:this.selectHighlighted();m(a);break;case q.ESC:this.cancel(a),a.preventDefault()}}));b.delegate(".select2-choice","click",this.bind(function(b){c=!0;this.opened()?(this.close(),a.focus()):this.enabled&&this.open();b.preventDefault();c=!1}));b.delegate(".select2-choice","keydown",this.bind(function(a){if(this.enabled&&!(a.which===q.TAB||q.isControl(a)||q.isFunctionKey(a)||a.which===q.ESC))this.open(),(a.which===q.PAGE_UP||a.which===q.PAGE_DOWN||a.which===
q.SPACE)&&m(a),a.which===q.ENTER&&m(a)}));b.delegate(".select2-choice","focus",function(){this.enabled&&b.addClass("select2-container-active")});b.delegate(".select2-choice","blur",this.bind(function(){c||this.opened()||this.blur()}));a.delegate("abbr","click",this.bind(function(a){this.enabled&&(this.val(""),m(a),this.close(),this.triggerChange())}));this.setPlaceholder()},initSelection:function(){var a;""===this.opts.element.val()?this.updateSelection({id:"",text:""}):(a=this.opts.initSelection.call(null,
this.opts.element),a!==f&&null!==a&&this.updateSelection(a));this.close();this.setPlaceholder()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments);"select"===a.element.get(0).tagName.toLowerCase()&&(a.initSelection=function(a){a=a.find(":selected");return{id:a.attr("value"),text:a.text()}});return a},setPlaceholder:function(){var a=this.getPlaceholder();""===this.opts.element.val()&&a!==f&&!(this.select&&""!==this.select.find("option:first").text())&&("object"===typeof a?
this.updateSelection(a):this.selection.find("span").html(a),this.selection.addClass("select2-default"),this.selection.find("abbr").hide())},postprocessResults:function(a,b){var c=0,e=this,g=!0;this.results.find(".select2-result").each(function(a){if(i(e.id(d(this).data("select2-data")),e.opts.element.val()))return c=a,!1});this.highlight(c);!0===b&&(g=this.showSearchInput=a.results.length>=this.opts.minimumResultsForSearch,this.container.find(".select2-search")[g?"removeClass":"addClass"]("select2-search-hidden"),
this.container[g?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(a){var b=this.opts.element.val();this.opts.element.val(this.id(a));this.updateSelection(a);this.close();this.selection.focus();i(b,this.id(a))||this.triggerChange()},updateSelection:function(a){this.selection.find("span").html(this.opts.formatSelection(a));this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==f&&this.selection.find("abbr").show()},val:function(){var a,b=null;
if(0===arguments.length)return this.opts.element.val();a=arguments[0];this.select?(this.select.val(a).find(":selected").each(function(){b={id:d(this).attr("value"),text:d(this).text()};return!1}),this.updateSelection(b)):(this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a));this.setPlaceholder()},clearSearch:function(){this.search.val("")}});u=o(t,{createContainer:function(){return d("<div></div>",{"class":"select2-container select2-container-multi",style:"width: "+this.getContainerWidth()}).html("    <ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' style='width: 25px;'>  </li></ul><div class='select2-drop' style='display:none;'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),a=d.extend({},{closeOnSelect:!0},a);"select"===a.element.get(0).tagName.toLowerCase()&&(a.initSelection=function(a){var b=[];a.find(":selected").each(function(){b.push({id:d(this).attr("value"),text:d(this).text()})});return b});return a},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");this.search.bind("keydown",this.bind(function(b){if(this.enabled){if(b.which===
q.BACKSPACE&&""===this.search.val()){this.close();var c;c=a.find(".select2-search-choice-focus");if(0<c.length){this.unselect(c.first());this.search.width(10);m(b);return}c=a.find(".select2-search-choice");0<c.length&&c.last().addClass("select2-search-choice-focus")}else a.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(b.which){case q.UP:case q.DOWN:this.moveHighlight(b.which===q.UP?-1:1);m(b);return;case q.ENTER:case q.TAB:this.selectHighlighted();
m(b);return;case q.ESC:this.cancel(b);b.preventDefault();return}b.which===q.TAB||(q.isControl(b)||q.isFunctionKey(b)||b.which===q.BACKSPACE||b.which===q.ESC)||(this.open(),(b.which===q.PAGE_UP||b.which===q.PAGE_DOWN)&&m(b))}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.container.delegate(".select2-choices","click",this.bind(function(a){this.enabled&&(this.open(),this.focusSearch(),a.preventDefault())}));this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&
(this.container.addClass("select2-container-active"),this.clearPlaceholder())}));this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.show())},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.hide())},initSelection:function(){var a;""===this.opts.element.val()&&this.updateSelection([]);if(this.select||""!==this.opts.element.val())a=this.opts.initSelection.call(null,this.opts.element),a!==f&&null!==a&&this.updateSelection(a);
this.close();this.clearSearch()},clearSearch:function(){var a=this.getPlaceholder();a!==f&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(this.getContainerWidth())):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},open:function(){this.opened()||(this.parent.open.apply(this,arguments),this.resizeSearch(),this.focusSearch())},
close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var c=[],e=[],g=this;d(a).each(function(){0>b(g.id(this),c)&&(c.push(g.id(this)),e.push(this))});a=e;this.selection.find(".select2-search-choice").remove();d(a).each(function(){g.addSelectedChoice(this)});g.postprocessResults()},onSelect:function(a){this.addSelectedChoice(a);this.select&&
this.postprocessResults();this.opts.closeOnSelect?(this.close(),this.search.width(10)):(this.search.width(10),this.resizeSearch());this.triggerChange();this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b,c=this.id(a),e=this.getVal();b=["<li class='select2-search-choice'>",this.opts.formatSelection(a),"<a href='javascript:void(0)' class='select2-search-choice-close' tabindex='-1'></a>","</li>"];b=d(b.join(""));b.find("a").bind("click dblclick",
this.bind(function(a){this.enabled&&(this.unselect(d(a.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(a),this.close(),this.focusSearch())})).bind("focus",this.bind(function(){this.enabled&&this.container.addClass("select2-container-active")}));b.data("select2-data",a);b.insertBefore(this.searchContainer);e.push(c);this.setVal(e)},unselect:function(a){var c=this.getVal(),d,a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+
a+". Must be .select2-search-choice";d=b(this.id(a.data("select2-data")),c);0<=d&&(c.splice(d,1),this.setVal(c),this.select&&this.postprocessResults());a.remove();this.triggerChange()},postprocessResults:function(){var a=this.getVal(),c=this.results.find(".select2-result"),e=this;c.each(function(){var c=d(this),g=e.id(c.data("select2-data"));0<=b(g,a)?c.addClass("select2-disabled"):c.removeClass("select2-disabled")});c.each(function(a){if(!d(this).hasClass("select2-disabled"))return e.highlight(a),
!1})},resizeSearch:function(){var a,b,c,e;c=this.search;a=d("<div></div>").css({position:"absolute",left:"-1000px",top:"-1000px",display:"none",fontSize:c.css("fontSize"),fontFamily:c.css("fontFamily"),fontStyle:c.css("fontStyle"),fontWeight:c.css("fontWeight"),letterSpacing:c.css("letterSpacing"),textTransform:c.css("textTransform"),whiteSpace:"nowrap"});a.text(c.val());d("body").append(a);c=a.width();a.remove();a=c+10;b=this.search.offset().left;c=this.selection.width();e=this.selection.offset().left;
b=c-(b-e)-(this.search.outerWidth()-this.search.width());b<a&&(b=c-(this.search.outerWidth()-this.search.width()));40>b&&(b=c-(this.search.outerWidth()-this.search.width()));this.search.width(b)},getVal:function(){var a;if(this.select)return a=this.select.val(),null===a?[]:a;a=this.opts.element.val();return e(a,",")},setVal:function(a){var c;this.select?this.select.val(a):(c=[],d(a).each(function(){0>b(this,c)&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(",")))},val:function(){var a,
b=[],c=this;if(0===arguments.length)return this.getVal();a=arguments[0];this.select?(this.setVal(a),this.select.find(":selected").each(function(){b.push({id:d(this).attr("value"),text:d(this).text()})}),this.updateSelection(b)):(a=null===a?[]:a,this.setVal(a),st,d(a).each(function(){b.push(c.id(this))}),this.setVal(b),this.updateSelection(a));this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");
this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(d(this).data("select2-data")))});this.setVal(a);this.triggerChange()}});d.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),c,e,g,h,i="val destroy open close focus isFocused container onSortStart onSortEnd enable disable".split(" ");
this.each(function(){if(0===a.length||"object"===typeof a[0])c=0===a.length?{}:d.extend({},a[0]),c.element=d(this),"select"===c.element.get(0).tagName.toLowerCase()?h=c.element.attr("multiple"):(h=c.multiple||!1,"tags"in c&&(c.multiple=h=!0)),e=h?new u:new y,e.init(c);else if("string"===typeof a[0]){if(0>b(a[0],i))throw"Unknown method: "+a[0];g=f;e=d(this).data("select2");if(e!==f&&(g="container"===a[0]?e.container:e[a[0]].apply(e,a.slice(1)),g!==f))return!1}else throw"Invalid arguments to select2 plugin: "+
a;});return g===f?this:g};window.Select2={query:{ajax:c,local:h,tags:p},util:{debounce:n},"class":{"abstract":t,single:y,multi:u}}}})(jQuery);!function(d){d(function(){var f=d.support,b;a:{b=document.createElement("bootstrap");var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},e;for(e in i)if(void 0!==b.style[e]){b=i[e];break a}b=void 0}f.transition=b&&{end:b}})}(window.jQuery);!function(d){var f=function(b,d){this.init("tooltip",b,d)};f.prototype={constructor:f,init:function(b,f,e){this.type=b;this.$element=d(f);this.options=this.getOptions(e);this.enabled=!0;"manual"!=this.options.trigger&&(b="hover"==this.options.trigger?"mouseenter":"focus",f="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(b,this.options.selector,d.proxy(this.enter,this)),this.$element.on(f,this.options.selector,d.proxy(this.leave,this)));this.options.selector?this._options=d.extend({},
this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=d.extend({},d.fn[this.type].defaults,b,this.$element.data());b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay});return b},enter:function(b){var f=d(b.currentTarget)[this.type](this._options).data(this.type);if(!f.options.delay||!f.options.delay.show)return f.show();clearTimeout(this.timeout);f.hoverState="in";this.timeout=setTimeout(function(){"in"==f.hoverState&&f.show()},f.options.delay.show)},
leave:function(b){var f=d(b.currentTarget)[this.type](this._options).data(this.type);if(!f.options.delay||!f.options.delay.hide)return f.hide();clearTimeout(this.timeout);f.hoverState="out";this.timeout=setTimeout(function(){"out"==f.hoverState&&f.hide()},f.options.delay.hide)},show:function(){var b,d,e,g,a,f,l;if(this.hasContent()&&this.enabled){b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],
this.$element[0]):this.options.placement;d=/in/.test(f);b.remove().css({top:0,left:0,display:"block"}).appendTo(d?this.$element:document.body);e=this.getPosition(d);g=b[0].offsetWidth;a=b[0].offsetHeight;switch(d?f.split(" ")[1]:f){case "bottom":l={top:e.top+e.height,left:e.left+e.width/2-g/2};break;case "top":l={top:e.top-a,left:e.left+e.width/2-g/2};break;case "left":l={top:e.top+e.height/2-a/2,left:e.left-g};break;case "right":l={top:e.top+e.height/2-a/2,left:e.left+e.width}}b.css(l).addClass(f).addClass("in")}},
isHTML:function(b){return"string"!=typeof b||"<"===b.charAt(0)&&">"===b.charAt(b.length-1)&&3<=b.length||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(b)},setContent:function(){var b=this.tip(),d=this.getTitle();b.find(".tooltip-inner")[this.isHTML(d)?"html":"text"](d);b.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){f.off(d.support.transition.end).remove()},500);f.one(d.support.transition.end,function(){clearTimeout(b);f.remove()})}var f=this.tip();f.removeClass("in");
d.support.transition&&this.$tip.hasClass("fade")?b():f.remove()},fixTitle:function(){var b=this.$element;if(b.attr("title")||"string"!=typeof b.attr("data-original-title"))b.attr("data-original-title",b.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return d.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var b=this.$element,d=this.options;
return b.attr("data-original-title")||("function"==typeof d.title?d.title.call(b[0]):d.title)},tip:function(){return this.$tip=this.$tip||d(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};d.fn.tooltip=function(b){return this.each(function(){var i=
d(this),e=i.data("tooltip"),g="object"==typeof b&&b;e||i.data("tooltip",e=new f(this,g));if("string"==typeof b)e[b]()})};d.fn.tooltip.Constructor=f;d.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery);!function(d){var f=function(b){this.element=d(b)};f.prototype={constructor:f,show:function(){var b=this.element,f=b.closest("ul:not(.dropdown-menu)"),e=b.attr("data-target"),g,a;e||(e=(e=b.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,""));b.parent("li").hasClass("active")||(g=f.find(".active a").last()[0],a=d.Event("show",{relatedTarget:g}),b.trigger(a),a.isDefaultPrevented()||(e=d(e),this.activate(b.parent("li"),f),this.activate(e,e.parent(),function(){b.trigger({type:"shown",relatedTarget:g})})))},
activate:function(b,f,e){function g(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");n?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");e&&e()}var a=f.find("> .active"),n=e&&d.support.transition&&a.hasClass("fade");n?a.one(d.support.transition.end,g):g();a.removeClass("in")}};d.fn.tab=function(b){return this.each(function(){var i=d(this),e=i.data("tab");e||i.data("tab",
e=new f(this));if("string"==typeof b)e[b]()})};d.fn.tab.Constructor=f;d(function(){d("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();d(this).tab("show")})})}(window.jQuery);!function(d){var f=function(b,d){this.init("popover",b,d)};f.prototype=d.extend({},d.fn.tooltip.Constructor.prototype,{constructor:f,setContent:function(){var b=this.tip(),d=this.getTitle(),e=this.getContent();b.find(".popover-title")[this.isHTML(d)?"html":"text"](d);b.find(".popover-content > *")[this.isHTML(e)?"html":"text"](e);b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var b=this.$element,d=this.options;
return b.attr("data-content")||("function"==typeof d.content?d.content.call(b[0]):d.content)},tip:function(){this.$tip||(this.$tip=d(this.options.template));return this.$tip}});d.fn.popover=function(b){return this.each(function(){var i=d(this),e=i.data("popover"),g="object"==typeof b&&b;e||i.data("popover",e=new f(this,g));if("string"==typeof b)e[b]()})};d.fn.popover.Constructor=f;d.fn.popover.defaults=d.extend({},d.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);!function(d){function f(){var a=this,e=setTimeout(function(){a.$element.off(d.support.transition.end);b.call(a)},500);this.$element.one(d.support.transition.end,function(){clearTimeout(e);b.call(a)})}function b(){this.$element.hide().trigger("hidden");i.call(this)}function i(a){var b=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var g=d.support.transition&&b;this.$backdrop=d('<div class="modal-backdrop '+b+'" />').appendTo(document.body);"static"!=this.options.backdrop&&
this.$backdrop.click(d.proxy(this.hide,this));g&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");g?this.$backdrop.one(d.support.transition.end,a):a()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),d.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(d.support.transition.end,d.proxy(e,this)):e.call(this)):a&&a()}function e(){this.$backdrop.remove();this.$backdrop=null}function g(){var a=this;if(this.isShown&&this.options.keyboard)d(document).on("keyup.dismiss.modal",
function(b){27==b.which&&a.hide()});else this.isShown||d(document).off("keyup.dismiss.modal")}var a=function(a,b){this.options=b;this.$element=d(a).delegate('[data-dismiss="modal"]',"click.dismiss.modal",d.proxy(this.hide,this))};a.prototype={constructor:a,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var a=this,b=d.Event("show");this.$element.trigger(b);!this.isShown&&!b.isDefaultPrevented()&&(d("body").addClass("modal-open"),this.isShown=!0,g.call(this),i.call(this,
function(){var b=d.support.transition&&a.$element.hasClass("fade");a.$element.parent().length||a.$element.appendTo(document.body);a.$element.show();b&&a.$element[0].offsetWidth;a.$element.addClass("in");b?a.$element.one(d.support.transition.end,function(){a.$element.trigger("shown")}):a.$element.trigger("shown")}))},hide:function(a){a&&a.preventDefault();a=d.Event("hide");this.$element.trigger(a);this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,d("body").removeClass("modal-open"),g.call(this),
this.$element.removeClass("in"),d.support.transition&&this.$element.hasClass("fade")?f.call(this):b.call(this))}};d.fn.modal=function(b){return this.each(function(){var e=d(this),g=e.data("modal"),c=d.extend({},d.fn.modal.defaults,e.data(),"object"==typeof b&&b);g||e.data("modal",g=new a(this,c));if("string"==typeof b)g[b]();else c.show&&g.show()})};d.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};d.fn.modal.Constructor=a;d(function(){d("body").on("click.modal.data-api",'[data-toggle="modal"]',
function(a){var b=d(this),e,c=d(b.attr("data-target")||(e=b.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")),b=c.data("modal")?"toggle":d.extend({},c.data(),b.data());a.preventDefault();c.modal(b)})})}(window.jQuery);!function(d){function f(){d(b).parent().removeClass("open")}var b='[data-toggle="dropdown"]',i=function(b){var g=d(b).on("click.dropdown.data-api",this.toggle);d("html").on("click.dropdown.data-api",function(){g.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(){var b=d(this),g;if(!b.is(".disabled, :disabled"))return g=b.attr("data-target"),g||(g=(g=b.attr("href"))&&g.replace(/.*(?=#[^\s]*$)/,"")),g=d(g),g.length||(g=b.parent()),b=g.hasClass("open"),f(),b||g.toggleClass("open"),
!1}};d.fn.dropdown=function(b){return this.each(function(){var g=d(this),a=g.data("dropdown");a||g.data("dropdown",a=new i(this));"string"==typeof b&&a[b].call(g)})};d.fn.dropdown.Constructor=i;d(function(){d("html").on("click.dropdown.data-api",f);d("body").on("click.dropdown",".dropdown form",function(b){b.stopPropagation()}).on("click.dropdown.data-api",b,i.prototype.toggle)})}(window.jQuery);!function(d){var f=function(b,f){this.$element=d(b);this.options=d.extend({},d.fn.button.defaults,f)};f.prototype.setState=function(b){var d=this.$element,e=d.data(),g=d.is("input")?"val":"html",b=b+"Text";e.resetText||d.data("resetText",d[g]());d[g](e[b]||this.options[b]);setTimeout(function(){"loadingText"==b?d.addClass("disabled").attr("disabled","disabled"):d.removeClass("disabled").removeAttr("disabled")},0)};f.prototype.toggle=function(){var b=this.$element.parent('[data-toggle="buttons-radio"]');
b&&b.find(".active").removeClass("active");this.$element.toggleClass("active")};d.fn.button=function(b){return this.each(function(){var i=d(this),e=i.data("button"),g="object"==typeof b&&b;e||i.data("button",e=new f(this,g));"toggle"==b?e.toggle():b&&e.setState(b)})};d.fn.button.defaults={loadingText:"loading..."};d.fn.button.Constructor=f;d(function(){d("body").on("click.button.data-api","[data-toggle^=button]",function(b){b=d(b.target);!b.hasClass("btn")&&!b.hasClass("button")&&(b=b.closest(".btn"));
b.button("toggle")})})}(window.jQuery);!function(d){var f=function(b){d(b).on("click",'[data-dismiss="alert"]',this.close)};f.prototype.close=function(b){function f(){a.trigger("closed").remove()}var e=d(this),g=e.attr("data-target"),a;g||(g=(g=e.attr("href"))&&g.replace(/.*(?=#[^\s]*$)/,""));a=d(g);b&&b.preventDefault();a.length||(a=e.hasClass("alert")?e:e.parent());a.trigger(b=d.Event("close"));b.isDefaultPrevented()||(a.removeClass("in"),d.support.transition&&a.hasClass("fade")?a.on(d.support.transition.end,f):f())};d.fn.alert=function(b){return this.each(function(){var i=
d(this),e=i.data("alert");e||i.data("alert",e=new f(this));"string"==typeof b&&e[b].call(i)})};d.fn.alert.Constructor=f;d(function(){d("body").on("click.alert.data-api",'[data-dismiss="alert"]',f.prototype.close)})}(window.jQuery);(function(d){function f(a,e){this.element=a;this.options=d.extend({},i,e);this._defaults=i;this._name=b;this.init()}var b="BootstrapDropdownSubMenu",i={propertyName:"value"},e=null,g=null;f.prototype.init=function(){this.createEventHandlers(d(this.element),this.options.$mainNav)};f.prototype.createEventHandlers=function(a,b){b.find("li:not(.dropdown-sub li) a").hover(function(){clearTimeout(e);e=null;g||(g=setTimeout(function(){a.removeClass("active")},500))});a.hover(function(){clearTimeout(g);g=
null;e||(e=setTimeout(function(){a.addClass("active")},500))});a.click(function(b){b.preventDefault();b.stopPropagation();a.addClass("active")});a.find("li a").hover(function(){clearTimeout(g);g=null});a.find("li a").click(function(){b.removeClass("open")});b.find(".dropdown-toggle").click(function(){a.removeClass("active")})};d.fn[b]=function(a){return this.each(function(){d.data(this,"plugin_"+b)||d.data(this,"plugin_"+b,new f(this,a))})}})(jQuery);var tmz={module:function(){var d={};return function(f){return d[f]?d[f]:d[f]={}}}(),api:"/"};$(document).ready(function(){tmz.initialize()});
tmz.initialize=function(){tmz.util=tmz.module("utilities");tmz.filterPanel=tmz.module("filterPanel");tmz.storage=tmz.module("storage");tmz.user=tmz.module("user");tmz.tagView=tmz.module("tagView");tmz.itemData=tmz.module("itemData");tmz.tagData=tmz.module("tagData");tmz.Amazon=tmz.module("amazon");tmz.searchView=tmz.module("searchView");tmz.siteView=tmz.module("siteView");tmz.detailView=tmz.module("detailView");tmz.itemView=tmz.module("itemView");tmz.gridView=tmz.module("gridView");tmz.videoPanel=
tmz.module("videoPanel");tmz.itemLinker=tmz.module("itemLinker");tmz.initializeLibraries();tmz.initializeModules()};tmz.initializeLibraries=function(){moment.calendar={lastDay:"LL",sameDay:"LL",nextDay:"LL",lastWeek:"LL",nextWeek:"LL",sameElse:"LL"};moment.longDateFormat={L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D YYYY h:mm A",LLLL:"dddd, MMMM D YYYY h:mm A"}};
tmz.initializeModules=function(){tmz.searchView.init();tmz.detailView.init();tmz.itemView.init();tmz.tagView.init();tmz.gridView.init();tmz.filterPanel.init();tmz.videoPanel.init();tmz.siteView.init()};(function(d,f,b){f.module("user");var i=[{id:"all",ign:"",gamestats:"",amazon:0,alias:"all"},{id:"pc",ign:"pc",gamestats:"pc",amazon:229575,alias:"pc,windows",name:"PC"},{id:"mac",ign:"",gamestats:"pc",amazon:229647,alias:"mac,macwindows,osx,os x,apple,macintosh",name:"Mac"},{id:"xbox",ign:"",gamestats:"xbox",amazon:537504,alias:"xbox,microsoft xbox",name:"Xbox"},{id:"x360",ign:"x360",gamestats:"xbox-360",amazon:14220161,alias:"x360,xbox 360,microsoft xbox360,360",name:"X360"},{id:"xbl",ign:"x360&downloadType=1",
gamestats:"xbox-360",amazon:14220161,alias:"xbl,xbox live",name:"XBL"},{id:"ds",ign:"ds",gamestats:"nintendo-ds",amazon:11075831,alias:"ds,nintendo ds",name:"DS"},{id:"3ds",ign:"ds",gamestats:"nintendo-ds",amazon:2622269011,alias:"3ds,nintendo 3ds",name:"3DS"},{id:"wii",ign:"wii",gamestats:"wii",amazon:14218901,alias:"wii,nintendo wii",name:"Wii"},{id:"ps",ign:"",gamestats:"playstation",amazon:229773,alias:"ps,ps1,playstation,playstation1,playstation 1,sony playstation 1,sony playstation",name:"PS1"},
{id:"ps2",ign:"",gamestats:"playstation-2",amazon:301712,alias:"ps2,playstation 2,playstation2,sony playstation 2",name:"PS2"},{id:"ps3",ign:"ps3",gamestats:"playstation-3",amazon:14210751,alias:"ps3,playstation 3,playstation3,sony playstation 3",name:"PS3"},{id:"psn",ign:"ps3&downloadType=201",gamestats:"playstation-3",amazon:14210751,alias:"psn,playstation network",name:"PSN"},{id:"vita",ign:"ps-vita",gamestats:"playstation-3",amazon:3010556011,alias:"vita,psvita,ps vita,playstation vita,sony vita,sony playstation vita",
name:"Vita"},{id:"psp",ign:"",gamestats:"playstation-portable",amazon:11075221,alias:"psp,sony psp",name:"PSP"},{id:"gc",ign:"",gamestats:"gamecube",amazon:541022,alias:"gamecube,gc,nintendo gamecube",name:"Gamecube"},{id:"n64",ign:"",gamestats:"nintendo-64",amazon:229763,alias:"n64,nintendo 64,nintendo64",name:"N64"},{id:"nes",ign:"",gamestats:"nes",amazon:566458,alias:"nes,nintendo nes",name:"NES"},{id:"snes",ign:"",gamestats:"super-nes",amazon:294945,alias:"snes,super nintendo,nintendo snes",name:"SNES"},
{id:"gba",ign:"",gamestats:"gameboy-advance",amazon:1272528011,alias:"gb,gameboy",name:"Game Boy"},{id:"gb",ign:"",gamestats:"game-boy",amazon:541020,alias:"gba,gameboy advance,game boy,advance,gbadvance",name:"GBA"},{id:"gbc",ign:"",gamestats:"game-boy-color",amazon:229783,alias:"gbc,gbcolor,gameboy color",name:"GBC"},{id:"dc",ign:"",gamestats:"dreamcast",amazon:229793,alias:"dc,dreamcast,sega dreamcast,sega dream cast,dream cast",name:"Dreamcast"},{id:"saturn",ign:"",gamestats:"saturn",amazon:294944,
alias:"saturn,sega saturn",name:"Saturn"},{id:"genesis",ign:"",gamestats:"genesis",amazon:294943,alias:"genesis,sega genesis",name:"Genesis"},{id:"gamegear",ign:"",gamestats:"game-gear",amazon:294942,alias:"gamegear,game gear,sega gamegear",name:"Gamegear"},{id:"segacd",ign:"",gamestats:"sega-cd",amazon:11000181,alias:"cd,sega cd",name:"Sega CD"}],e={Amazon:0,GiantBomb:1};d.getStandardPlatform=function(b){for(var b=RegExp(b,"gi"),a=0,d=i.length;a<d;a++)if(b.test(i[a].alias))return i[a];return i[0]};
d.matchPlatformToIndex=function(b){for(var a=null,d=[],e=null,f=b.length,c=0,a=null,h=0,p=i.length;h<p;h++)for(var d=i[h].alias.split(","),o=0,q=d.length;o<q;o++){a=RegExp(d[o],"gi");if((a=a.exec(b))&&a[0].length===f)return i[h];a&&a[0].length>c&&(c=a[0].length,e=i[h])}return e?e:i[0]};d.getPlatformIndex=function(){return i};d.getViewAllTagID=function(){return"0"};d.getProviders=function(){return e};d.selectFieldSubstring=function(b,a,d){b.createTextRange?(b=b.createTextRange(),b.collapse(!0),b.moveStart("character",
a),b.moveEnd("character",d),b.select()):b.setSelectionRange?b.setSelectionRange(a,d):b.selectionStart&&(b.selectionStart=a,b.selectionEnd=d)};d.autofillHighlightedElements=function(e,a){clearTimeout(a);var f="",i="",m="",c=null;e.find(".highlighted").each(function(){f=e.find(".highlighted").contents().filter(function(){return this.nodeType==Node.TEXT_NODE}).text();e.find("input").each(function(){c=b(this)[0];i=b(this).val();m=i+f;b(this).val(m);var a=e.find("div.chzn-drop").first(),p="position:absolute; left: -1000px; top: -1000px; display:none;",
o="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");_i=0;for(_len=o.length;_i<_len;_i++)style=o[_i],p+=style+":"+b(this).css(style)+";";div=b("<div />",{style:p});div.text(b(this).val());b("body").append(div);w=div.width()+25;div.remove();b(this).css({width:w+"px"});p=e.height()-5;b(a).css({top:p+"px"});d.selectFieldSubstring(c,i.length,m.length)})})}})(tmz.module("utilities"),tmz,jQuery,_);(function(d,f,b){f.module("utilities");var i=f.module("storage");f.module("itemView");var e=f.module("itemCache"),g=f.api+"user/login/",a=f.api+"user/logout/",n=f.api+"user/",l=f.api+"user/create/",m=f.api+"user/update/",c=f.api+"user/resetcode/send/",h=f.api+"user/resetcode/submit/",p=f.api+"user/password/update/",o={user_id:"",secret_key:"",viewUser:null};d.getUserData=function(){return o};d.getUserCredentials=function(a){a="undefined"!==typeof a?a:!1;o.timestamp=(new Date).getTime();a&&i.set("timestamp",
o.timestamp);return o.viewUser?{user_name:o.viewUser}:a?{uid:o.user_id,uk:o.secret_key,ts:o.timestamp}:{uid:o.user_id,uk:o.secret_key}};d.getUserID=function(){return o.user_id};d.login=function(a,c,d,e){b.ajax({url:g,type:"POST",data:{user_email:a,user_password:c},dataType:"json",cache:!0,success:function(b){q(b,a);d(b,a)},error:e})};d.demoLogin=function(){o.user_id="1";o.secret_key="1"};d.validateUser=function(a,c){b.ajax({url:n,type:"POST",data:{user_name:a},dataType:"json",cache:!0,success:function(a){"success"===
a.status&&(o.viewUser=a.userName,o.user_id=a.userName,o.secret_key=0);c(a)},error:function(){}})};d.logout=function(){b.ajax({url:a,type:"POST",data:{uid:o.user_id,uk:o.secret_key},dataType:"json",cache:!0,success:function(){},error:function(){}});o.user_id=null;o.secret_key=null;o.userName=null;o.email=null;o.viewUser=null};d.createUser=function(a,c,d,e){b.ajax({url:l,type:"POST",data:{user_email:a,user_password:c},dataType:"json",cache:!0,success:function(b){q(b,a);d(b,a)},error:e})};d.updateUser=
function(a,c,d,e,g){if(""!==a){var f={uid:o.user_id,user_password:a};d!==o.userName&&(f.user_name=d);c!==o.email&&(f.user_email=c);""!==e&&(f.user_new_password=e);f.user_password=a;b.ajax({url:m,type:"POST",data:f,dataType:"json",cache:!0,success:function(a){if(a.status==="success"){if(typeof f.user_name!=="undefined")o.userName=f.user_name;if(typeof f.user_email!=="undefined")o.email=f.user_email}g(a)},error:function(){}})}};d.sendResetPasswordCode=function(a,d){b.ajax({url:c,type:"POST",data:{user_email:a},
dataType:"json",cache:!0,success:function(a){d(a)},error:function(){}})};d.submitResetPasswordCode=function(a,c,d){b.ajax({url:h,type:"POST",data:{user_email:a,user_reset_code:c},dataType:"json",cache:!0,success:function(a){d(a)},error:function(){}})};d.updatePassword=function(a,c,d,e){b.ajax({url:p,type:"POST",data:{user_email:a,user_reset_code:c,user_new_password:d},dataType:"json",cache:!0,success:function(a){e(a)},error:function(){}})};d.isViewUser=function(){return o.viewUser?!0:!1};var q=function(a,
b){if(a.userID){o.user_id=a.userID;o.secret_key=a.secretKey;o.userName=a.userName;o.email=b;o.viewUser=null;var c=i.get("timestamp");c?a.timestamp!=c&&e.clearStoredData():i.set("timestamp",a.timestamp)}}})(tmz.module("user"),tmz,jQuery,_);(function(d,f){var b=f.module("user");d.get=function(d){var e=b.getUserID(),d=localStorage.getItem(e+"_"+d),e=null;"undefined"!==d&&d&&(e=JSON.parse(d));return e};d.set=function(d,e){if(!b.isViewUser()){var g=b.getUserID();localStorage.setItem(g+"_"+d,JSON.stringify(e));e||(e={})}return e};d.remove=function(d){var e=b.getUserID();localStorage.removeItem(e+"_"+d)};d.setGlobal=function(b,d){localStorage.setItem(b,JSON.stringify(d));d||(d={});return d};d.getGlobal=function(b){var b=localStorage.getItem(b),
d=null;b&&(d=JSON.parse(b));return d};d.removeGlobal=function(b){localStorage.removeItem(b)};d.clearStorage=function(){localStorage.clear()}})(tmz.module("storage"),tmz,jQuery,_);(function(d,f,b,i,e){var g=f.module("user"),a=f.module("itemLinker"),n=f.module("itemCache"),l=f.module("utilities"),m=f.api+"item/directory/",c=f.api+"item/",h=f.api+"item/add/",p=f.api+"item/delete/batch/",o=f.api+"item/delete/",q=f.api+"item/user/update/",t=f.api+"item/metacritic/update",y=l.getViewAllTagID(),u={},k={},v={},x={},j=function(a){var b={};i.each(a.directory,function(a,c){b={itemID:c,asin:a.aid,gbombID:a.gid,gameStatus:a.gs,playStatus:a.ps,tags:a.t,tagCount:a.tc,userRating:a.ur};P(b)})},
z=function(a){i.each(a,function(a){P(a)})},s=function(a,b,c){for(var d=0,b=b.length;d<b;d++)r(c[d],a)},A=function(a,c){var d=null,e=null,g=[];a.itemID=c.itemID;for(var d=0,f=c.tagIDsAdded.length;d<f;d++)e=b.extend(!0,{},a),e.id=c.itemID,B(e),n.cacheItemByTag(c.tagIDsAdded[d],e),g.push(e);E(e,c);var d=n.getCachedItemsByTag(y),h=!1;i.each(d,function(a){a.itemID===e.itemID&&(h=!0)});h||n.cacheItemByTag(y,e);return g},r=function(a,b){n.deleteCachedItem(b,a);C(b,a);0===k[b].tagCount&&n.deleteCachedItem(b,
y)},B=function(b){b.calendarDate="1900-01-01"!==b.releaseDate?e(b.releaseDate,"YYYY-MM-DD").calendar():"Unknown";b.standardName=a.standardizeTitle(b.name)},G=function(a,b){i.each(b,function(b,c){n.updateCacheItemByTag(c,a)});n.updateCacheItemByTag(0,a)},E=function(a,b){k[b.itemID]||P({itemID:a.itemID,asin:a.asin,gbombID:a.gbombID,gameStatus:a.gameStatus,playStatus:a.playStatus,tags:{},tagCount:0,userRating:a.userRating});for(var c=0,d=b.tagIDsAdded.length;c<d;c++)k[b.itemID].tags[b.tagIDsAdded[c]]=
b.idsAdded[c],k[b.itemID].tagCount+=1;n.storeItemDirectory(k)},C=function(a,b){var c=k[a];delete c.tags[b];c.tagCount+=-1;n.storeItemDirectory(k)},P=function(a){k[a.itemID]=a;0!==parseInt(a.asin,10)&&(v[a.asin]=a);0!==parseInt(a.gbombID,10)&&(x[a.gbombID]=a)},M=function(a){return k[a]||null};b.extend(d,{itemsAndDirectoryLoaded:function(a){n.cacheItemsByTag(a,k)},getItemDirectory:function(){return k},getDirectoryItemByItemID:M,getItemByThirdPartyID:function(a,b){var c=null;0!==a?c=x[a]:0!==b&&(c=v[b]);
return c},resetItemData:function(){u={};k={};v={};x={};n.clearItemCache()},getRandomItemID:function(){var a=[];i.each(u,function(b,c){a.push(c)});var b=Math.floor(Math.random()*a.length);return a[b]},getItems:function(a,d,e){"undefined"===typeof b(document).data("events").keypress&&b(document).keypress(function(a){96==a.which&&(console.warn("------------ itemDataDirectory: -------",k),console.warn("------------ amazonDirectory: -------",v),console.warn("------------ giantBombDirectory: -------",x),
console.warn("------------ items: -------------------",u))});var f=null,h=n.getCachedItemsByTag(a);h?(u=h,d(h)):(a={list_id:a},f=g.getUserCredentials(),b.extend(!0,a,f),f=b.ajax({url:c,type:"POST",data:a,dataType:"json",cache:!0,success:function(a){for(var b={},c={},e=0,g=a.items.length;e<g;e++)c={},c.id=a.items[e].iid,c.initialProvider=a.items[e].ip,c.itemID=a.items[e].iid,c.asin=a.items[e].aid,c.gbombID=a.items[e].gid,c.name=a.items[e].n,c.releaseDate=a.items[e].rd,c.platform=a.items[e].p,c.smallImage=
a.items[e].si,c.thumbnailImage=a.items[e].ti,c.largeImage=a.items[e].li,c.metascore=a.items[e].ms,c.offers={},c.description="",B(c),b[c.itemID]=c;u=b;d(u)},error:e}));return f},getItem:function(a){return u[a]},downloadItemDirectory:function(a){var c=null,d=g.getUserCredentials(),e=n.getStoredItemDirectory();e?(z(e),a&&a(e)):(c={},b.extend(!0,c,d),c=b.ajax({url:m,type:"POST",data:c,dataType:"json",cache:!0,success:function(b){j(b);n.storeItemDirectory(k);a&&a(b)},error:function(){}}));return c},addItemToTags:function(a,
c,d,e){var f=g.getUserCredentials(!0),j=b.extend(!0,{},c),a={lids:a,n:j.name,rd:j.releaseDate,aid:j.asin,gid:j.gbombID,ip:j.initialProvider,p:j.platform,si:j.smallImage,ti:j.thumbnailImage,li:j.largeImage,mp:j.metascorePage,ms:j.metascore,gs:j.gameStatus,ps:j.playStatus,ur:j.userRating};b.extend(!0,a,f);b.ajax({url:h,type:"POST",data:a,dataType:"json",cache:!0,success:function(a){var b=A(j,a);d(a,b)},error:e})},updateUserItem:function(a,c,d){var e=g.getUserCredentials(!0),f=b.extend(!0,{},a),a={id:f.itemID,
gs:f.gameStatus,ps:f.playStatus,ur:f.userRating};b.extend(!0,a,e);b.ajax({url:q,type:"POST",data:a,dataType:"json",cache:!0,success:function(a){var b=k[f.itemID];b.gameStatus=f.gameStatus;b.playStatus=f.playStatus;b.userRating=f.userRating;n.storeItemDirectory(k);c(f,a)},error:d})},updateMetacritic:function(a,c,d){var e=M(a.itemID).tags,f=g.getUserCredentials(!0),h=b.extend(!0,{},a),a={id:h.itemID,mp:h.metascorePage,ms:h.metascore};b.extend(!0,a,f);b.ajax({url:t,type:"POST",data:a,dataType:"json",
cache:!0,success:function(a){G(h,e);c&&c(h,a)},error:d})},deleteTagsForItem:function(a,c,d,e,f){var h=g.getUserCredentials(!0),j={ids:a};b.extend(!0,j,h);b.ajax({url:p,type:"POST",data:j,dataType:"json",cache:!0,success:function(){},error:f});s(d.itemID,a,c);e(d.itemID,c)},deleteSingleTagForItem:function(a,c,d,e){var f=M(a).tags[c],h=g.getUserCredentials(!0),j={id:f};b.extend(!0,j,h);b.ajax({url:o,type:"POST",data:j,dataType:"json",cache:!0,success:function(){},error:e});r(c,a);d(f,c);return a},deleteTagFromDirectory:C,
deleteClientItem:r})})(tmz.module("itemData"),tmz,$,_,moment);(function(d,f,b){var i=f.api+"tag/",e=f.api+"tag/add/",g=f.api+"tag/update/",a=f.api+"tag/delete/",n=f.module("user"),l=f.module("storage");f.module("itemData");var m={};d.getTags=function(a,d){var e=null,f=n.getUserCredentials(),g={};b.extend(!0,g,f);(m=l.get("tag"))?a&&a(m):e=b.ajax({url:i,type:"POST",data:g,dataType:"json",cache:!0,success:function(b){m=l.set("tag",b.list);a(b.list)},error:d});return e};d.addTag=function(a,d,f){var g=n.getUserCredentials(!0),a={tag_name:a};b.extend(!0,a,g);b.ajax({url:e,
type:"POST",data:a,dataType:"json",cache:!0,success:function(a){m.push({tagName:a.tagName.toLowerCase(),tagID:a.tagID});l.set("tag",m);d(a)},error:f})};d.updateTag=function(a,d,e,f){var i=n.getUserCredentials(!0),t={tag_name:a,tag_id:d};b.extend(!0,t,i);b.ajax({url:g,type:"POST",data:t,dataType:"json",cache:!0,success:function(a){e(a)},error:f});f=0;for(i=m.length;f<i;f++)m[f].tagID===d&&(m[f].tagName=a,l.set("tag",m))};d.deleteTag=function(c,d,e){var f=n.getUserCredentials(!0),g={id:c};b.extend(!0,
g,f);b.ajax({url:a,type:"POST",data:g,dataType:"json",cache:!0,success:d,error:e});d=0;for(e=m.length;d<e;d++)if(m[d].tagID===c){m.splice(d,1);l.set("tag",m);break}}})(tmz.module("tagData"),tmz,jQuery,_);(function(d,f,b,i){f.module("user");var e=f.module("storage"),g=f.module("utilities").getViewAllTagID(),a={},n={},l=function(b,c){"undefined"===typeof a[b]&&(a[b]={});a[b][c.itemID]=c;m(b,c)},m=function(a,b,c){if("undefined"===typeof n[a+"_"+b.itemID]||c)(c=e.get("itemsCacheByTag"))?"undefined"===typeof c[a]&&(c[a]={}):(c={},c[a]={}),c[a][b.itemID]=b,e.set("itemsCacheByTag",c)},c=function(a){var b=e.get("itemsCacheByTag"),c=null;b&&"undefined"!==typeof b[a]&&(c=b[a],i.each(c,function(b,c){n[a+"_"+
c]=!0}));return c};b.extend(d,{getCachedItemsByTag:function(b){var d=null;return d="undefined"!==typeof a[b]?a[b]:c(b)},cacheItemsByTag:function(a,b){i.each(a,function(a){"undefined"!==typeof b[a.itemID]&&i.each(b[a.itemID].tags,function(b,c){l(c,a);l(g,a)})})},cacheItemByTag:l,updateCacheItemByTag:function(b,c){a[b][c.itemID]=c;m(b,c,!0)},getStoredItemDirectory:function(){return e.get("itemDataDirectory")},storeItemDirectory:function(a){e.set("itemDataDirectory",a)},deleteCachedItem:function(b,c){a[c]&&
delete a[c][b];var d=e.get("itemsCacheByTag");d&&(delete d[c][b],e.set("itemsCacheByTag",d))},deleteCachedTag:function(b){a[b]&&delete a[b];var c=e.get("itemsCacheByTag");c&&(delete c[b],e.set("itemsCacheByTag",c))},clearItemCache:function(){a={};n={}},clearStoredData:function(){e.remove("itemsCacheByTag");e.remove("itemDataDirectory");e.remove("tag")}})})(tmz.module("itemCache"),tmz,$,_);(function(d,f,b){var i=f.module("user"),e=f.module("itemData"),g=f.module("tagView"),a=f.module("itemView"),n=f.module("searchView"),l=f.module("storage"),m=0,c=!1;b("#infoHeader");b("#header");var h=b("#userMenu"),p=b("#logoutButton"),o=b("#loggedInButton"),q=b("#loginForm"),t=b("#buttonContainer"),y=b("#loginButton"),u=b("#loginHitArea"),k=b("#signupButton"),v=b("#signupHitArea"),x=b("#loginSubmitButton"),j=b("#signupSubmitButton"),z=b("#backButton"),s=b("#email").find("input"),A=b("#password").find("input"),
r=b("#rememberCheckboxToggle"),B=b("#resetPasswordButton"),G=b("#invalidLoginTag"),E=b("#accountExistsTag"),C=b("#accountManagement-modal"),P=b("#clearLocalStorage_btn"),M=b("#deleteAccount_btn"),N=b("#managementButton"),S=b("#updateAccount_btn"),T=b("#userNameUpdateField"),fa=b("#passwordField"),O=b("#passwordUpdateField"),la=b("#emailUpdateField"),K=C.find(".existingPasswordGroup"),V=C.find(".emailGroup"),U=C.find(".alert-success"),Y=C.find(".alert-error"),D=b("#resetpassword-modal"),ba=D.find(".resetCodeForm"),
ca=D.find(".updatePasswordForm"),L=D.find(".passwordResetCodeContainer"),Q=D.find(".passwordResetEmailContainer"),H=D.find(".alert-success"),I=D.find(".alert-error"),F=b("#resetPasswordEmailField"),W=b("#resetPasswordCodeField"),da=b("#resetPasswordPasswordField"),Z=b("#sendResetCode_btn"),R=b("#submitResetCode_btn"),ja=b("#updatePassword_btn"),sa=b("#searchField input"),ma=b("#itemResultsContainer").find(".loadingStatus");d.init=function(){d.createEventHandlers();pa();D.modal({backdrop:!0,keyboard:!0,
show:!1});var a=window.location.pathname.split("/"),b=a[2];"user"==a[1]&&""!==b?i.validateUser(b,function(a){"success"===a.status&&ga()}):(i.demoLogin(),ga())};d.createEventHandlers=function(){N.click(function(a){a.preventDefault();na();a=i.getUserData();T.val(a.userName);la.val(a.email);C.modal("show")});S.click(function(a){a.preventDefault();qa()});s.on("keydown",function(a){ra(a.which)});A.on("keydown",function(a){ra(a.which)});p.click(function(c){c.preventDefault();b("body").removeClass("useHeader");
b("body").addClass("infoHeader");a.loggedInView(!1);n.loggedInView(!1);h.hide();a.clearItemView();e.resetItemData();g.resetTagData();i.logout();i.demoLogin();ga()});P.click(function(a){a.preventDefault();l.clearStorage()});M.click(function(a){a.preventDefault()});u.click(function(a){a.preventDefault();m=0;oa();x.show();j.hide();z.removeClass("signup");z.addClass("login")});v.click(function(a){a.preventDefault();m=1;oa();j.show();x.hide();z.removeClass("login");z.addClass("signup")});u.mouseover(function(){y.addClass("hover")});
v.mouseover(function(){k.addClass("hover")});u.mouseout(function(){y.removeClass("hover")});v.mouseout(function(){k.removeClass("hover")});x.click(function(a){a.preventDefault();var a=s.val(),b=A.val();aa();i.login(a,b,ha)});j.click(function(a){a.preventDefault();var a=s.val(),b=A.val();aa();""!==a&&""!==b&&i.createUser(a,b,X)});z.click(function(a){a.preventDefault();q.hide();x.hide();j.hide();z.hide();t.show()});r.click(function(){c?(c=!1,b(this).removeClass("on"),ka()):(c=!0,b(this).addClass("on"))});
B.click(function(a){a.preventDefault();(a=s.val()||l.getGlobal("email"))&&F.val(a);D.modal("show")});Z.click(function(a){a.preventDefault();a=F.val();i.sendResetPasswordCode(a,ia)});R.click(function(a){a.preventDefault();var a=F.val(),b=W.val();i.submitResetPasswordCode(a,b,ea)});ja.click(function(a){a.preventDefault();J(F.val(),W.val(),da.val())});F.keydown(function(a){13===a.which&&(a.preventDefault(),a=F.val(),i.sendResetPasswordCode(a,ia))});W.keydown(function(a){if(13===a.which){a.preventDefault();
var a=F.val(),b=W.val();i.submitResetPasswordCode(a,b,ea)}});da.keydown(function(a){13===a.which&&(a.preventDefault(),J(F.val(),W.val(),da.val()))})};var pa=function(){var a=l.getGlobal("email");a&&(c=!0,s.val(a),r.addClass("on"),A.focus())},ka=function(){c?l.setGlobal("email",s.val()):l.removeGlobal("email")},aa=function(){A.val("");G.hide();E.hide()},ga=function(){ma.fadeIn();sa.focus();a.clearItemView();e.resetItemData();var c=null,d=null,f=e.downloadItemDirectory(),h=a.initializeUserItems(function(a){c=
a},function(){c={}}),j=g.getTags(function(a){d=a},function(){});b.when(h,f,j).then(function(){g.getTags_result(d);a.initializeUserItems_result(c);ma.hide()},function(){})},ha=function(c,d){"success"===c.status?(ka(),b("body").removeClass("infoHeader"),b("body").addClass("useHeader"),o.find(".userEmail").text(d),a.loggedInView(!0),n.loggedInView(!0),h.show(),ga()):"undefined"!==typeof c.status&&"invalid_login"===c.status&&G.fadeIn()},X=function(a,b){"undefined"!==typeof a.status&&"user_exists"===a.status?
E.fadeIn():(ka(),ha(a,b))},ia=function(a){"undefined"!==typeof a.status&&"success"===a.status?(Z.hide(),R.show(),Q.hide(),L.show(),H.find(".alertTitle").text("E-mail sent:"),H.show().find(".alertText").html("Check your e-mail and enter the <strong>3-digit code</strong> into the field above"),I.hide()):"undefined"!==typeof a.status&&"invalid_email"===a.status&&(I.find(".alertTitle").text("Invalid E-mail address:"),I.show().find(".alertText").html("Cannot send password reset code"))},ea=function(a){"undefined"!==
typeof a.status&&"success"===a.status?(ba.hide(),R.hide(),ca.show(),ja.show(),H.hide(),I.hide()):(H.hide(),I.find(".alertTitle").text("Invalid code:"),I.show().find(".alertText").html("Reset code is incorrect, please try again"))},J=function(a,b,c){i.updatePassword(a,b,c,function(b){if("undefined"!==typeof b.status&&"success"===b.status){D.modal("hide");Z.show();R.hide();ja.hide();ba.show();ca.hide();Q.show();L.hide();H.hide();I.hide();F.val("");W.val("");da.val("");s.val(a);A.val(c);var b=s.val(),
d=A.val();aa();i.login(b,d,ha)}})},oa=function(){aa();q.show();z.show();c&&""!==s.val()?A.focus():s.focus();t.hide()},ra=function(a){if(13===a&&0===m){var a=s.val(),b=A.val();aa();i.login(a,b,ha)}else 13===a&&1===m&&(a=s.val(),b=A.val(),aa(),""!==a&&""!==b&&i.createUser(a,b,X))},qa=function(){na();var a=fa.val(),b=la.val();if(""!==a&&""!==b){var c=T.val(),d=O.val();i.updateUser(a,b,c,d,function(a){"success"===a.status?(o.find(".userEmail").text(b),fa.val(""),O.val(""),U.fadeIn().find(".alertText").text("Account updated")):
"incorrect_password"===a.status&&(K.addClass("error"),Y.fadeIn().find(".alertText").text("Incorrect password"))})}""===a&&(K.addClass("error"),Y.fadeIn().find(".alertText").text("Please enter existing password"));""===b&&(V.addClass("error"),Y.fadeIn().find(".alertText").text("E-mail cannot be blank"));O.val("")},na=function(){U.hide();Y.hide();K.removeClass("error");V.removeClass("error")}})(tmz.module("siteView"),tmz,jQuery,_);(function(d,f,b,i){var e=f.module("detailView"),g=f.module("amazon"),a=f.module("giantbomb"),n=f.module("utilities"),l=f.module("gameStats"),m=f.module("ign"),c=f.module("itemLinker"),h={"#searchTab":0,"#listTab":1},p=null,o="skyrim",q="",t={},y=n.getProviders().Amazon,u=1,k=h["#searchTab"],v=null,x=null,j=1,z=1,s=493,f=b("#searchContainer"),A=b("#searchViewMenu"),r=b("#searchProvider"),B=b("#listProvider"),G=r.find(".providerName"),E=B.find(".providerName"),C=b("#searchPlatforms"),P=b("#legacySubNav");
b("#platformSelect_btn");var M=b("#listPlatforms"),N=C.find(".platformName"),S=M.find(".platformName"),T=b("#finderTabLinks");b("#finderTabContent");b("#searchTab");b("#listTab");var fa=b("#searchTabLink"),O=b("#listTabLink"),la=b("#searchField"),K=b("#search_btn"),V=b("#clearSearch_btn"),U=V.find("i"),Y=b("#searchResultsContainer"),D=b("#searchResults"),ba=la.find("input"),ca=b("#listResultsContainer"),L=b("#listResults"),Q=L.find(".list"),H=f.find(".searchDisplayOptions"),I=f.find(".listDisplayOptions"),
F=Y.find(".loadingStatus"),W=i.template(b("#search-results-template").html()),da=i.template(b("#list-results-template").html()),Z=i.template(b("#search-results-platform-dropdown-template").html());d.init=function(){d.createEventHandlers();v=n.getPlatformIndex()[0];x=n.getStandardPlatform("");y=n.getProviders().Amazon;ta(!1);I.find("div").each(function(a,c){b(c).tooltip({delay:{show:500,hide:50},placement:"bottom"})});H.find("div").each(function(a,c){b(c).tooltip({delay:{show:500,hide:50},placement:"bottom"})});
setInterval(function(){Y.nanoScroller();ca.nanoScroller()},1500);P.BootstrapDropdownSubMenu({$mainNav:C})};d.createEventHandlers=function(){T.find('a[data-toggle="tab"]').on("shown",function(a){k=h[b(a.target).attr("href")];aa(k)});ba.keyup(ra);r.find("li a").click(function(a){a.preventDefault();r.attr("data-content",b(this).attr("data-content"));q="";ga()});A.on("mouseenter",".dropdown-toggle",function(){var a=this;A.find(".dropdown").each(function(){b(this).hasClass("open")&&b(this).find(".dropdown-toggle").get(0)!==
b(a).get(0)&&b(a).trigger("click")})});B.find("li a").click(function(a){a.preventDefault();B.attr("data-content",b(this).attr("data-content"));ha()});M.find("li a").click(function(a){a.preventDefault();var a=b(this).attr("data-content"),c=b(this).text();S.text(c);x=n.getStandardPlatform(a);X(u)});C.find("li:not(.dropdown-sub) a").click(function(a){a.preventDefault();var a=b(this).attr("data-content"),c=b(this).text();q="";N.text(c);v=n.getStandardPlatform(a);d.search(o)});D.on("click","tr",qa);L.on("click",
"tr",na);D.on("click",".dropdown-menu li",function(a){a.preventDefault();a=d.getSearchResult(b(this).attr("data-content"));a.platform=b(this).find("a").text();b(this).parent().siblings(".dropdown-toggle").html(a.platform).append('<b class="caret"></b>')});H.on("click","div",function(a){a.preventDefault();J(b(this).attr("data-content"))});I.on("click","div",function(a){a.preventDefault();1==u&&J(b(this).attr("data-content"))});K.click(function(){d.search(o)});V.click(function(){ba.val("");ba.focus();
ta(!1)});D.resize(d.resizePanel);L.resize(d.resizePanel);b(window).resize(d.resizePanel)};d.renderSearchResults=function(a){F.stop().hide();var b=[];i.each(a,function(a){b.push(a)});b.sort(ka);a={sortedSearchResults:b};a.displayType=j;D.html(W(a))};d.renderListResults=function(a){Q.append(da({listResults:a}))};d.search=function(b){""===b?ta(!1):ta(!0);k!==h["#searchTab"]&&(fa.trigger("click"),aa(h["#searchTab"]));if(b!==q)switch(Y.find(".noResults").hide(),F.fadeIn(),q=b,y){case n.getProviders().Amazon:g.searchAmazon(b,
v.amazon,sa);break;case n.getProviders().GiantBomb:a.searchGiantBomb(b,ma)}};d.getGamestatsPopularityListByPlatform=function(a){Q.empty();l.getPopularGamesListByPlatform(a.gamestats,R)};d.getIGNUpcomingListByPlatform=function(a){Q.empty();m.getUpcomingGames(a.ign,0,function(b){ja(b);m.getUpcomingGames(a.ign,1,ja)})};d.resizePanel=function(){var a=null,c=null;switch(k){case 0:a=D.height();c=Y;break;case 1:a=L.height(),c=ca}var d=b(window).height();a<d-s?c.css({height:a+40}):c.css({height:d-s})};d.loggedInView=
function(a){s=a?258:493};var R=function(a){d.renderListResults(a)},ja=function(a){d.renderListResults(a)},sa=function(a){var c={},e={};b("Item",a).each(function(){e=g.parseAmazonResultItem(b(this));"undefined"===typeof e.isFiltered&&(c[e.id]=e)});t=c;d.renderSearchResults(t)},ma=function(b){for(var b=b.results,c={},e={},f=0,g=b.length;f<g;f++)e=a.parseGiantBombResultItem(b[f]),a.getGiantBombItemPlatform(e.gbombID,pa),c[e.id]=e;t=c;d.renderSearchResults(t)},pa=function(a,c){for(var e=a.results.platforms,
f=[],g="",h=0,j=e.length;h<j;h++)g=n.matchPlatformToIndex(e[h].name).name||e[h].name,f.push(g);e={platformList:f,gbombID:c};b("#"+c).find(".platformDropdown").html(Z(e));e=d.getSearchResult(c);e.platformList=f;e.platform=f[0]},ka=function(a,b){var c=Date.parse(a.releaseDate);return Date.parse(b.releaseDate)-c};d.getSearchResult=function(a){return t[a]};var aa=function(a){switch(a){case 0:ia(!0);ea(!1);ga();break;case 1:ea(!0),ia(!1),ha()}},ga=function(){switch(r.attr("data-content")){case "0":y=n.getProviders().Amazon;
G.text("Amazon");C.show();break;case "1":y=n.getProviders().GiantBomb,G.text("GiantBomb"),C.hide()}d.search(o)},ha=function(){switch(B.attr("data-content")){case "0":J(0,!0);I.fadeTo(100,0.35);E.text("Popular");u=0;break;case "1":J(z),I.find("button:eq("+z+")").button("toggle"),I.fadeTo(100,1),E.text("Upcoming"),u=1}X(u)},X=function(a){switch(a){case 0:d.getGamestatsPopularityListByPlatform(x);break;case 1:d.getIGNUpcomingListByPlatform(x)}},ia=function(a){a?(H.show(),C.show(),r.show()):(H.hide(),
C.hide(),r.hide())},ea=function(a){a?(I.show(),M.show(),B.show()):(I.hide(),M.hide(),B.hide())},J=function(a,c){k===h["#searchTab"]?(j=a,D.find("tbody").removeClass().addClass("display-"+a)):!1===L.find("tbody").hasClass("display-"+a)&&("undefined"===typeof c&&(z=a),L.find("tbody").removeClass().addClass("display-"+a));b("#itemResultsContainer.nano").nanoScroller()},oa=function(){clearTimeout(p);d.search(o)},ra=function(a){o=ba.val();p&&clearTimeout(p);13==a.which?d.search(o):p=setTimeout(oa,250)},
qa=function(){var a=d.getSearchResult(b(this).attr("id"));e.viewFirstSearchItemDetail(a)},na=function(){o=c.standardizeTitle(b(this).find(".itemName").text());switch(h["#searchTab"]){case 0:fa.tab("show");break;case 1:O.tab("show")}ba.val(o);var a=x.id;q="";N.text(void 0);v=n.getStandardPlatform(a);d.search(o);d.search(o)},ta=function(a){a?(U.show(),V.addClass("hover")):(U.hide(),V.removeClass("hover"))}})(tmz.module("searchView"),tmz,jQuery,_);(function(d,f,b,i,e){f.module("user");var g=f.module("tagView"),a=f.module("utilities");f.module("searchView");var n=f.module("itemView"),l=f.module("itemData"),m=f.module("amazon"),c=f.module("itemLinker"),h=f.module("metacritic"),p=f.module("giantbomb"),o=f.module("wikipedia"),q=f.module("videoPanel"),t=["#amazonTab","#giantBombTab"],y={"0":"None",1:"Own",2:"Sold",3:"Wanted"},u={"0":"Not Started",1:"Playing",2:"Played",3:"Finished"},k={"new":0,existing:1},v=!1,x=null,j=null,z=!1,s=k["new"],A=null,
r={},B={},G={},f=b("#detailTabContent"),E=b("#amazonTab"),C=b("#giantBombTab"),P=b("#amazonTabLink"),M=b("#giantBombTabLink"),N=E.find(".itemDetailThumbnail"),S=C.find(".itemDetailThumbnail"),T=N.find(".itemDetailInfo"),fa=S.find(".itemDetailInfo"),O=f.find(".showVideo_btn");b("#addListContainer");var la=b("#addList"),K=b("#saveItem_btn"),V=b("#addItem_btn"),U=b("#saveAttributesContainer"),Y=b("#saveAttributes_btn"),D=b("#itemAttributes"),ba=b("#platform"),ca=b("#releaseDate"),L=b("#wikipediaPage"),
Q=b("#giantBombPage"),H=b("#metacriticPage"),I=D.find("#amazonPriceHeader"),F=D.find("#amazonPriceNew"),W=D.find("#amazonPriceUsed"),da=b("#gameStatus"),Z=b("#playStatus"),R=b("#userRating"),ja=b("#ratingCaption");i.template(b("#description-modal-template").html());d.init=function(){d.createEventHandlers();K.hide();D.hide();oa();R.stars({split:2,captionEl:ja,callback:function(a,b,c){r.userRating=c;ua(r)}})};d.createEventHandlers=function(){N.click(function(a){a.preventDefault();z&&q.showVideoPanel()});
S.click(function(a){a.preventDefault();z&&q.showVideoPanel()});N.mouseenter(function(){A&&clearTimeout(A);A=setTimeout(function(){T.stop().fadeIn()},250)});N.mouseleave(function(){A&&clearTimeout(A);T.stop().fadeOut()});S.mouseenter(function(){A&&clearTimeout(A);A=setTimeout(function(){fa.stop().fadeIn()},250)});S.mouseleave(function(){A&&clearTimeout(A);fa.stop().fadeOut()});K.click(function(a){a.preventDefault();ua(r)});V.click(function(a){a.preventDefault();ua(r)});Y.click(function(a){a.preventDefault();
ua(r)});b('#detailTab a[data-toggle="tab"]').on("shown",function(a){b(a.target).attr("href")});la.change(Ba);da.find("li a").click(function(a){a.preventDefault();r.gameStatus=b(this).attr("data-content");da.find(".currentSelection").text(y[r.gameStatus]);ua(r)});Z.find("li a").click(function(a){a.preventDefault();r.playStatus=b(this).attr("data-content");Z.find(".currentSelection").text(u[r.playStatus]);ua(r)})};d.viewFirstSearchItemDetail=function(d){if(d.id!==r.id||d.platform!==r.platform)oa(),
r=b.extend(!0,{},d),x=qa(r.asin,r.gbombID),r.initialProvider=x,r.standardName=c.standardizeTitle(r.name),G=l.getItemByThirdPartyID(r.gbombID,r.asin),j=r.id,ra(x),J(x),c.findItemOnAlternateProvider(r,x,function(c){return function(d){d=b.extend(!0,{},d);if(j===c){var e=qa(d.asin,d.gbombID);switch(e){case a.getProviders().Amazon:r.asin=d.asin;break;case a.getProviders().GiantBomb:r.gbombID=d.gbombID}sa(d,e,1)}}}(j)),ta(r,G),va(r,G),o.getWikipediaPage(r.standardName,r,ha),ga(r.standardName,r,!0),sa(r,
x,0)};d.viewItemDetail=function(a){oa();na(k.existing);r=b.extend(!0,{},a);r.standardName=c.standardizeTitle(r.name);x=parseInt(r.initialProvider,10);G=l.getDirectoryItemByItemID(r.itemID);j=r.id;ra(x);J(x);c.getLinkedItemData(r,x,d.viewSecondItemDetail);g.selectTagsFromDirectory(G.tags);va(r,G);o.getWikipediaPage(r.standardName,r,ha);ga(r.standardName,r,!1);a=x;ka(a,r);pa(r,0);X(a,r)};d.viewSecondItemDetail=function(a){B=b.extend(!0,{},a);a=null;if(r.asin==B.asin||r.gbombID==B.gbombID)a=qa(B.asin,
B.gbombID),ka(a,B),pa(r,1),X(a,r)};d.resetDetail=function(){g.resetAddList();na(k["new"])};var sa=function(a,b,c){ka(b,a);pa(a,c);X(b,r)},ma=function(a,b){b.find(".itemDetailTitle h3").text(a.name);b.find("img").attr("src",a.largeImage)},pa=function(a,b){D.is(":visible")||D.fadeIn();("n/a"!==a.platform||0===b)&&ba.find(".data").text(a.platform);if("1900-01-01"!==a.releaseDate){if(0===b||"1900-01-01"===r.releaseDate)r.releaseDate=a.releaseDate,r.calendarDate=e(a.releaseDate,"YYYY-MM-DD").calendar(),
ca.find(".data").text(r.calendarDate)}else"1900-01-01"===r.releaseDate&&ca.find(".data").text("unknown")},ka=function(c,d){v||(b("#dataTab").show(),b(".detailTitleBar").show(),v=!0);switch(c){case a.getProviders().Amazon:ma(d,E);break;case a.getProviders().GiantBomb:ma(d,C)}},aa=function(a){a.find(".itemDetailTitle h3").text("No Match found");a.find("img").attr("src","http://static.t-minuszero.com/images/no_selection_placeholder.png")},ga=function(a,c,d){for(var e="",f=0,g=t.length;f<g;f++)e=t[f]+
" .metascore",b(e).hide();h.getMetascore(a,c,d,function(a){if(j===a.id)for(var b=0,c=t.length;b<c;b++)e=t[b]+" .metascore",h.displayMetascoreData(a.metascorePage,a.metascore,e),H.show(),H.find("a").attr("href","http://www.metacritic.com"+a.metascorePage)})},ha=function(a){L.show();L.find("a").attr("href",a)},X=function(b,c){switch(b){case a.getProviders().Amazon:m.getAmazonItemOffers(c.asin,c,ia);break;case a.getProviders().GiantBomb:p.getGiantBombItemData(c.gbombID,ea)}},ia=function(a){(""!==a.buyNowPrice||
""!==a.lowestUsedPrice)&&I.show();""!==a.buyNowPrice?(F.find("a").attr("href",a.productURL),F.find(".data").text(a.buyNowPrice),F.show()):F.hide();""!==a.lowestUsedPrice?(W.find(".data").text(a.lowestUsedPrice),W.find("a").attr("href",a.offersURLUsed),W.show()):W.hide()},ea=function(a){Q.show();Q.find("a").attr("href",a.site_detail_url);a=a.videos;0!==a.length?(q.renderVideoModal(a),z=!0,O.removeClass("noVideos"),O.find("span").text("Show Videos")):(z=!1,O.addClass("noVideos"),O.find("span").text("No Videos"))},
J=function(b){switch(b){case a.getProviders().Amazon:P.tab("show");break;case a.getProviders().GiantBomb:M.tab("show")}},oa=function(){L.hide();Q.hide();H.hide();I.hide();F.hide();W.hide();U.hide()},ra=function(b){switch(b){case a.getProviders().Amazon:aa(C);break;case a.getProviders().GiantBomb:aa(E)}},qa=function(b,c){var d=null;0!==b?d=a.getProviders().Amazon:0!==c&&(d=a.getProviders().GiantBomb);return d},na=function(a){a===k.existing?(s=k.existing,V.hide(),K.hide()):a===k["new"]&&(s=k["new"],
K.hide(),V.show())},ta=function(a,b){b&&0<b.tagCount?(na(k.existing),a.itemID=b.itemID,g.selectTagsFromDirectory(b.tags)):(na(k["new"]),g.selectUserTags())},va=function(a,b){b?(a.gameStatus=b.gameStatus,a.playStatus=b.playStatus,a.userRating=b.userRating):(a.gameStatus="0",a.playStatus="0",a.userRating="0");wa(a)},wa=function(a){da.find(".currentSelection").text(y[a.gameStatus]);Z.find(".currentSelection").text(u[a.playStatus]);R.stars("select",a.userRating);ja.text(a.userRating/2);da.find(".currentSelection").attr("data-initial",
a.gameStatus);Z.find(".currentSelection").attr("data-initial",a.playStatus);R.attr("data-initial",a.userRating)},ua=function(a){function b(){0<e.length&&l.deleteTagsForItem(e,f,a,ya)}var c=g.getTagsToAdd(),d=g.getTagsToDelete(),e=d.idsToDelete,f=d.tagsToDelete;0<c.length?l.addItemToTags(c,a,function(a){var c=g.getInitialItemTags();s!==k.existing&&na(k.existing);r.itemID=a.itemID;for(var d=0,e=a.idsAdded.length;d<e;d++)c[a.tagIDsAdded[d]]=a.idsAdded[d];n.updateListAdditions(a,void 0);b()}):b();Aa()&&
s===k.existing&&l.updateUserItem(a,za);xa()},za=function(a,b){"success"===b.status&&(wa(a),U.fadeOut(),n.updateListAttributesChanged(a))},ya=function(a,b){n.updateListDeletions(a,b)},Aa=function(){var a=da.find(".currentSelection").attr("data-initial"),b=Z.find(".currentSelection").attr("data-initial"),c=R.attr("data-initial");return a!==r.gameStatus||b!==r.playStatus||c!==r.userRating?!0:!1},Ba=function(a){v&&!a.reset&&(s===k["new"]&&g.populateUserTags(),xa())},xa=function(){s===k.existing&&g.isAddListChanged()?
K.fadeIn():K.fadeOut()}})(tmz.module("detailView"),tmz,jQuery,_,moment);(function(d,f,b,i,e){f.module("user");var g=f.module("tagView");f.module("utilities");var a=f.module("detailView"),n=f.module("gridView"),l=f.module("itemData");f.module("itemCache");var m=f.module("tagData"),c=f.module("amazon"),h=f.module("metacritic");f.module("itemLinker");var p=f.module("filterPanel"),o=null,q={valueNames:"itemName metascore releaseDate platform gameStatus playStatus userRating".split(" "),item:"list-item"},t="0",y=1,u=0,k=!1,v=null,x=450,j=!1,z=b("#wrapper"),s=b("#itemResults"),
A=b("#viewItemsContainer"),r=b("#itemResultsContainer"),B=A.find(".displayOptions"),G=b("#gridView_btn"),E=b("#viewList"),C=E.find(".viewName"),P=b("#itemViewMenu"),M=b("#editMenu"),N=A.find(".sortOptions"),S=N.find(".sortType"),T=A.find(".filterOptions"),fa=b("#platformFilterSubNav"),O=T.find(".clearFilters_btn"),la=T.find(".filterDropDown_btn"),K=T.find(".filterType"),V=b("#applyFilters_btn"),U=b("#deleteListConfirm-modal"),Y=b("#deleteListConfirm_btn"),D=b("#deleteList_btn"),ba=D.find(".listName"),
ca=b("#error-modal"),L=b("#updateList-modal"),Q=b("#tagNameField"),H=b("#updateListConfirm_btn"),I=b("#editList_btn"),F=r.find(".loadingStatus"),W=i.template(b("#price-menu-template").html()),da=i.template(b("#item-results-template").html());d.init=function(){d.createEventHandlers();la.tooltip({delay:{show:500,hide:50}});B.find("div").each(function(a,c){b(c).tooltip({delay:{show:500,hide:50},placement:"bottom"})});setInterval(function(){r.nanoScroller()},1500);ea(!1);fa.BootstrapDropdownSubMenu({$mainNav:T})};
d.createEventHandlers=function(){P.on("mouseenter",".dropdown-toggle",function(){var a=this;P.find(".dropdown").each(function(){b(this).hasClass("open")&&b(this).find(".dropdown-toggle").get(0)!==b(a).get(0)&&b(a).trigger("click")})});E.find("ul").on("click","a",function(a){a.preventDefault();R(b(this).attr("data-content"))});V.click(function(a){a.preventDefault();z.hasClass("gridView")||(ea(!0),ia(0))});O.click(function(a){a.preventDefault();ea(!1);K.text("None");p.resetFilters();ia()});A.on("click",
"#itemResults tr",function(){var c=b(this).attr("id"),c=d.getItem(c);a.viewItemDetail(c)});s.on("click",".deleteItem_btn",function(a){a.preventDefault();a=b(this).attr("data-content");l.deleteSingleTagForItem(a,t,pa);g.removeTagFromAddList(t);b("#"+a).remove()});s.on("click",".quickAttributes a",function(a){a.preventDefault();a.stopPropagation();var a=parseInt(b(this).attr("data-content"),10),c=b(this).parent().parent().attr("data-content");ha(b(this),c,a)});D.click(function(a){a.preventDefault();
1<g.getTagCount()?U.modal("show"):(ca.find(".alertTitle").text("Tag Delete Error"),ca.find(".alertText").text("Cannot delete last tag"),ca.modal("show"))});Y.click(function(a){a.preventDefault();U.modal("hide");ka(t)});L.find("form").submit(function(a){a.preventDefault();aa(t,Q.val());L.modal("hide")});H.click(function(){aa(t,Q.val());L.modal("hide")});I.click(function(a){a.preventDefault();a=g.getTagName(t);Q.val(a);L.modal("show");Q.focus().select()});B.find("div").click(function(a){a.preventDefault();
a=b(this).attr("data-content");y!==a&&(y=a,s.find("tbody").removeClass().addClass("display-"+y),r.nanoScroller())});N.find("li a").click(function(a){a.preventDefault();J(parseInt(b(this).attr("data-content"),10))});T.find("li:not(.dropdown-sub) a").click(function(a){a.preventDefault();v=b(this).attr("data-content");if("0"==v)p.showFilterPanel();else{ea(!0);K.text(b(this).text());var a=v,c=parseInt(a,10);p.resetFilters();if(isNaN(a))p.platformQuickFilter(a);else switch(c){case 1:J(2);p.upcomingQuickFilter(o);
break;case 2:J(2);p.newReleasesQuickFilter(o);break;case 3:J(1);p.neverPlayedQuickFilter(o);break;case 4:J(1);p.gamesPlayingQuickFilter(o);break;case 5:J(1);p.gamesPlayedQuickFilter(o);break;case 6:J(1);p.finishedGamesQuickFilter(o);break;case 7:J(1);p.ownedGamesQuickFilter(o);break;case 8:J(1),p.wantedGamesQuickFilter(o)}ia(c)}});G.click(function(a){a.preventDefault();n.showGridView(t,v,K.text(),j)});s.resize(d.resizePanel);b(window).resize(d.resizePanel)};var Z=function(a){var c=0;i.each(a,function(a){var b=
l.getDirectoryItemByItemID(a.itemID);b&&(a.gameStatus=b.gameStatus,a.playStatus=b.playStatus,a.userRating=b.userRating);c++});var d={items:a,length:c};d.displayType=y;d.currentViewTagID=t;s.html(da(d));0<c&&(s.find(".quickAttributes a").each(function(a,c){b(c).tooltip({delay:{show:750,hide:1},placement:"bottom"})}),i.each(a,function(a){a.displayMetascore=-1===a.metascore?"n/a":a.metascore;a.metascorePage="";ma(a)}),i.each(a,function(a){sa(a)}),o=new e("itemResultsContainer",q),J(u),ia())};d.getItem=
function(a){return l.getItem(a)};d.clearItemView=function(){s.html("")};d.resizePanel=function(){var a=b(window).height(),c=s.height();F.is(":visible")&&(c+=F.height());c<a-x?r.css({height:c+40}):r.css({height:a-x})};d.loggedInView=function(a){x=a?230:450};d.initializeUserItems=function(a,b){t="0";return l.getItems("0",a,b)};d.initializeUserItems_result=function(c){l.itemsAndDirectoryLoaded(c);R("0");Z(c);b.isEmptyObject(c)?a.resetDetail():(c=l.getRandomItemID(),c=d.getItem(c),a.viewItemDetail(c))};
d.updateListDeletions=function(a,c){for(var d=null,e=0,f=c.length;e<f;e++)"0"===t?(d=l.getDirectoryItemByItemID(a).tagCount,0===d&&b("#"+a).remove()):t===c[e]&&b("#"+a).remove()};d.updateListAdditions=function(a){var b=!1;g.updateViewList(a.tagIDsAdded,t);if("0"!==t)for(var c=0,d=a.tagIDsAdded.length;c<d;c++)a.tagIDsAdded[c]==t&&(b=!0);else 1<=l.getDirectoryItemByItemID(a.itemID).tagCount&&(b=!0);b&&R(t)};d.updateListAttributesChanged=function(){k=!0};d.showListView=function(a,b,c,d){v=b;R(a);K.text(c);
ea(d)};var R=function(a){var b="";"0"!==a?(b=g.getTagName(a),ba.text(b),M.show()):(b="View All",M.hide());C.text(b);ja(a)},ja=function(a,b){t=a;l.getItems(a,function(a){Z(a);b&&b()},function(){Z({})})},sa=function(a){c.getAmazonItemOffers(a.asin,a,function(c){"undefined"!==typeof c.productURL&&b("#"+a.id+" .priceDetails").html(W(c))});h.getMetascore(a.standardName,a,!1,ma)},ma=function(a){h.displayMetascoreData(a.metascorePage,a.metascore,"#"+a.id+" .metascore")},pa=function(){},ka=function(a){g.deleteTag(a,
function(){R("0")})},aa=function(a,b){m.updateTag(b,a,function(){});g.getTags(function(a){g.getTags_result(a)});ga(b,a)},ga=function(a){C.text(a);Q.val(a)},ha=function(b,c,e){c=d.getItem(c);k=!0;switch(e){case 0:"1"===c.playStatus?(X(b,"0"),b.parent().removeClass().addClass("playStatus-0"),c.playStatus="0"):(X(b,"1"),b.parent().removeClass().addClass("playStatus-1"),c.playStatus="1");break;case 1:"2"===c.playStatus?(X(b,"0"),b.parent().removeClass().addClass("playStatus-0"),c.playStatus="0"):(X(b,
"2"),b.parent().removeClass().addClass("playStatus-2"),c.playStatus="2");break;case 2:"3"===c.playStatus?(X(b,"0"),b.parent().removeClass().addClass("playStatus-0"),c.playStatus="0"):(X(b,"3"),b.parent().removeClass().addClass("playStatus-3"),c.playStatus="3");break;case 3:"10"===c.userRating?(b.parent().removeClass("rating-10"),c.userRating="0"):(b.parent().removeClass().addClass("rating-10"),c.userRating="10");break;case 4:"1"===c.gameStatus?(b.parent().removeClass().addClass("gameStatus-0"),c.gameStatus=
"0"):(b.parent().removeClass().addClass("gameStatus-1"),c.gameStatus="1")}l.updateUserItem(c,function(b){a.viewItemDetail(b)})},X=function(a,c){a.parent().parent().find('span[class*="playStatus"]').each(function(){b(this).removeClass().addClass("playStatus-"+c)})},ia=function(a){0===a&&K.text("Custom");k?(k=!1,R(t,function(){p.applyListJSFiltering(o)})):p.applyListJSFiltering(o)},ea=function(a){(j=a)?(O.show(),O.next().show()):(O.hide(),O.next().hide())},J=function(a){u=a;switch(u){case 0:S.text("Alphabetical");
o.sort("itemName",{asc:!0});break;case 1:S.text("Review Score");o.sort("scoreDetails",{sortFunction:oa});break;case 2:S.text("Release Date");o.sort("releaseDate",{sortFunction:qa});break;case 3:S.text("Platform");o.sort("platform",{asc:!0});break;case 4:S.text("Price"),o.sort("priceDetails",{sortFunction:ra})}},oa=function(a,c){var d=b(a.elm).find(".metascore"),e=b(c.elm).find(".metascore"),d=parseInt(d.attr("data-score"),10),e=parseInt(e.attr("data-score"),10);return d<e?1:-1},ra=function(a,c){var d=
b(a.elm).find(".priceDetails .lowestNew"),e=b(c.elm).find(".priceDetails .lowestNew"),f=0,g=0;0<d.length&&(f=parseFloat(d.attr("data-price")));0<e.length&&(g=parseFloat(e.attr("data-price")));return f<g?-1:1},qa=function(a,c){var d=b(a.elm).find(".releaseDate"),e=b(c.elm).find(".releaseDate"),d=Date.parse(d.text());return Date.parse(e.text())-d}})(tmz.module("itemView"),tmz,jQuery,_,List);(function(d,f,b,i){var e=f.module("detailView"),g=f.module("itemData"),a=f.module("itemView"),n=f.module("tagView");f.module("amazon");f.module("utilities");var l=f.module("filterPanel"),m=null,c=0,h=null,p=!0,o=null,q=!1,t=b("#wrapper"),y=b("#gridViewContainer"),u=b("#gridList"),k=u.find(".viewName"),v=b("#gridViewMenu"),x=v.find(".displayOptions"),j=x.find(".displayType"),z=v.find(".sortOptions"),s=z.find(".sortType"),A=v.find(".filterOptions"),r=A.find(".clearFilters_btn"),B=A.find(".filterType"),
G=A.find(".filterDropDown_btn"),E=A.find(".listFilters_btn"),C=b("#applyFilters_btn"),P=b("#filters-modal"),M=i.template(b("#grid-results-template").html()),N={},S=!1,T=null;d.init=function(){fa();G.tooltip({delay:{show:500,hide:50},placement:"bottom"});x.find("div").each(function(a,c){b(c).tooltip({delay:{show:500,hide:50},placement:"bottom"})});H(!1)};var fa=function(){v.on("mouseenter",".dropdown-toggle",function(){var a=this;v.find(".dropdown").each(function(){b(this).hasClass("open")&&b(this).find(".dropdown-toggle").get(0)!==
b(a).get(0)&&b(a).trigger("click")})});b("#exitGridView_btn").click(function(b){b.preventDefault();t.removeClass("gridView");t.addClass("standardView");a.showListView(m,o,B.text(),q)});E.click(function(a){a.preventDefault();P.modal("show")});r.click(function(a){a.preventDefault();H(!1);B.text("None");l.resetFilters();U()});C.click(function(a){a.preventDefault();U();H(!0)});u.find("ul").on("click","a",function(a){a.preventDefault();var a=b(this).text(),c=b(this).attr("data-content");m=c;k.text(a);
O(c)});y.on("click",".gridItem img",function(a){a.preventDefault();a=b(this).parent().parent().attr("data-content");a=g.getItem(a);e.viewItemDetail(a)});y.on("mouseover",".gridItem",function(a){a.preventDefault();var a=b(this),c=a.attr("data-content"),d=N[c];d||(d=a.width(),N[c]=d);Math.round((1.2*d-d)/2);a.css({"z-index":"999",width:1.2*d+"px","-webkit-transition-timing-function":"cubic-bezier(0.01,0.53,0.00,1.00)","-webkit-transition-property":"top,left,width","-webkit-transition-duration":"1s"})});
y.on("mouseout",".gridItem",function(a){a.preventDefault();b(this).css({"z-index":"",width:"","-webkit-transition-timing-function":"cubic-bezier(0.01,0.53,0.00,1.00)","-webkit-transition-property":"top,left,width","-webkit-transition-duration":"1s"})});x.find("li a").click(function(a){a.preventDefault();j.text(b(this).text());I(b(this).attr("data-content"))});z.find("li a").click(function(a){a.preventDefault();a=b(this).attr("data-content");F();c=parseInt(a,10);switch(c){case 0:s.text("Alphabetical");
h="itemName";y.isotope({sortBy:h,sortAscending:!0});break;case 1:s.text("Review Score");h="metacriticScore";y.isotope({sortBy:h,sortAscending:!1});break;case 2:s.text("Release Date");h="releaseDate";y.isotope({sortBy:h,sortAscending:!1});break;case 3:s.text("Platform");h="platform";y.isotope({sortBy:h,sortAscending:!0});break;case 4:s.text("Price"),h="rawPrice",y.isotope({sortBy:h,sortAscending:!0})}});A.find("li a").click(function(a){a.preventDefault();o=parseInt(b(this).attr("data-content"),10);
if(0===o)l.showFilterPanel();else{H(!0);B.text(b(this).text());a=parseInt(b(this).attr("data-content"),10);F();a=parseInt(a,10);l.resetFilters();switch(a){case 1:l.upcomingQuickFilter();s.text("Release Date");h="releaseDate";p=!0;break;case 2:l.newReleasesQuickFilter();s.text("Release Date");h="releaseDate";p=!1;break;case 3:l.neverPlayedQuickFilter();s.text("Review Score");h="metacriticScore";p=!1;break;case 4:l.gamesPlayingQuickFilter();s.text("Review Score");h="metacriticScore";p=!1;break;case 5:l.gamesPlayedQuickFilter();
s.text("Review Score");h="metacriticScore";p=!1;break;case 6:l.finishedGamesQuickFilter();s.text("Review Score");h="metacriticScore";p=!1;break;case 7:l.ownedGamesQuickFilter();s.text("Review Score");h="metacriticScore";p=!1;break;case 8:l.wantedGamesQuickFilter(),s.text("Review Score"),h="metacriticScore",p=!1}U()}})};d.showGridView=function(a,b,c,d){t.removeClass("standardView");t.addClass("gridView");o=b;n.selectGridTag(a);O(a);B.text(c);H(d)};var O=function(a){m=a;y.hide();S&&y.isotope("destroy");
g.getItems(a,la)},la=function(a){K(a)},K=function(a){y.html(M({items:a}));V();y.imagesLoaded(function(){y.show();V();U()})},V=function(){S=!0;y.isotope({itemSelector:".gridItem",getSortData:{itemName:Y,releaseDate:D,platform:ba,userRating:ca,metacriticScore:L,rawPrice:Q},sortBy:"itemName",sortAscending:!0,transformsEnabled:!1})},U=function(){0===o&&B.text("Custom");H(l.applyIsotopeFiltering(y,h,p))},Y=function(a){return a.find(".itemName").text()},D=function(a){return a.find(".releaseDate").text()},
ba=function(a){return a.find(".platform").text()},ca=function(a){return parseInt(a.find(".userRating").text(),10)},L=function(a){return parseInt(a.find(".metacriticScore").text(),10)},Q=function(a){return parseInt(a.find(".rawPrice").text(),10)},H=function(a){(q=a)?(r.show(),r.next().show()):(r.hide(),r.next().hide())},I=function(a){F();N={};T!==a&&(y.removeClass("display-"+T).addClass("display-"+a),T=a,y.isotope("reLayout",function(){}))},F=function(){b(".gridItem").each(function(a,c){b(c).css({"z-index":"",
"-webkit-transition-property":""})})}})(tmz.module("gridView"),tmz,jQuery,_);(function(d,f,b,i){f.module("user");var e=f.module("tagData"),g=f.module("itemData"),a=f.module("itemCache"),n=b("#addListContainer"),l=b("#addList"),m=b("#viewList"),c=b("#gridList"),h={},p={},o={},q={},t={},y={},u={},k={},v=i.template(b("#view-list-template").html()),x=function(){l.change(function(){var a=l.val().split(","),a=a[a.length-1];""!==a&&B(a)})},j=function(){var a=[],b=[];i.each(p,function(b){a.push(b)});i.each(o,function(a){b.push(a)});a.sort(N);var d={orderedList:a,emptyList:b};m.find("ul").html(v(d));
c.find("ul").html(v(d))},z=function(){var a=[],b=[];i.each(h,function(c){a.push(c);b.push(c.name)});a.sort(N);l.select2({tags:b,placeholder:"Type a tag name",allowClear:!0})},s=function(){h={};p={};o={};q={};t={}},A=function(a,b){var c=null;p={};h={};return c=e.getTags(a,b)},r=function(a){s();M();for(var b={},c=0,d=a.length;c<d;c++)b={},b.name=a[c].tagName.toLowerCase(),b.id=a[c].tagID,"undefined"!==typeof t[b.id]?p[b.name]=b:o[b.name]=b,h[b.name]=b,q[b.id]=b.name;j();z()},B=function(a){"undefined"===
typeof h[a]&&e.addTag(a,G)},G=function(a){a={name:a.tagName.toLowerCase(),id:a.tagID};h[a.name]=a;o[a.name]=a;q[a.id]=a.name;j();z();n.find(".select2-search-field input").focus()},E=function(a){delete u[a];d.selectAddListTags(u)},C=function(){var a=l.val(),b=[];""!==a&&i.each(a.split(","),function(a){i.isUndefined(h[a])?b.push(a):b.push(h[a].id)});return b},P=function(a){var b=[];i.each(a,function(a,c){b.push(q[c])});l.val(b).trigger({type:"change",reset:!1})},M=function(){var a=g.getItemDirectory();
t={};i.each(a,function(a){i.each(a.tags,function(a,b){"undefined"===typeof t[b]&&(t[b]=!0)})})},N=function(a,b){var c=b.name;return a.name.toLowerCase().localeCompare(c.toLowerCase())};b.extend(d,{init:function(){x()},getInitialItemTags:function(){return u},renderViewLists:j,renderAddLists:z,resetTagData:s,getTagName:function(a){return q[a]},getTags:A,getTags_result:r,addTag:B,deleteTag:function(b,c){var d=a.getCachedItemsByTag(b);i.each(d,function(a){g.deleteClientItem(b,a.itemID);g.deleteTagFromDirectory(a.itemID,
b)});E(b);a.deleteCachedTag(b);e.deleteTag(b);A(function(a){r(a)});c()},removeTagFromAddList:E,getSelectedTagIDs:C,updateViewList:function(a){for(var b=!1,c=0,d=a.length;c<d;c++)"undefined"===typeof t[a[c]]&&(t[a[c]]=!0,delete o[q[a[c]]],p[q[a[c]]]={id:a[c],name:q[a[c]]},b=!0);b&&j();return b},selectTagsFromDirectory:function(a){u={};i.each(a,function(a,b){u[b]=1});d.selectAddListTags(a)},selectUserTags:function(){P(k)},selectAddListTags:P,resetAddList:function(){u={};y={};k={};l.val([""]).trigger({type:"change",
reset:!0})},selectGridTag:function(a){a=c.find('a[data-content="'+a+'"]');c.find(".viewName").text(a.text())},getTagCount:function(){var a=0;i.each(h,function(){a++});return a},isAddListChanged:function(){var a={},b=!1,c=d.getSelectedTagIDs();i.each(c,function(c){a[c]=!0;"undefined"===typeof u[c]&&(b=!0)});i.each(u,function(c,d){"undefined"===typeof a[d]&&(b=!0)});return b},getTagsToAdd:function(){y={};for(var a=[],b=C(),c="",d=0,e=b.length;d<e;d++)c=b[d],y[c]=!0,u[c]||(u[c]=1,a.push(c));return a},
getTagsToDelete:function(){var a=[],c=[];b.each(u,function(b,d){y[b]||(delete u[b],a.push(d),c.push(b))});return{idsToDelete:a,tagsToDelete:c}},populateUserTags:function(){var a=d.getSelectedTagIDs();k={};i.each(a,function(a){k[a]=""})}})})(tmz.module("tagView"),tmz,jQuery,_);(function(d,f,b,i,e){var g=f.module("utilities"),a=b("#filters-modal"),n=b("#releaseDate_filter"),l=b("#gameStatus_filter"),m=b("#playStatus_filter"),c=b("#metascore_filter"),h=b("#platformFilterList");d.init=function(){d.createEventHandlers();h.select2({placeholder:"Select platform",allowClear:!0})};d.createEventHandlers=function(){a.on("click",".btn-group button",function(a){a.preventDefault()})};d.showFilterPanel=function(){a.modal("show")};d.getFilters=function(){var a={releaseDateFilters:[],
metascoreFilters:[],platformFilters:[],gameStatusFilters:[],playStatusFilters:[]};n.find("button").each(function(){b(this).hasClass("active")?a.releaseDateFilters.push(!0):a.releaseDateFilters.push(!1)});c.find("button").each(function(){b(this).hasClass("active")?a.metascoreFilters.push(!0):a.metascoreFilters.push(!1)});l.find("button").each(function(){b(this).hasClass("active")?a.gameStatusFilters.push(!0):a.gameStatusFilters.push(!1)});m.find("button").each(function(){b(this).hasClass("active")?
a.playStatusFilters.push(!0):a.playStatusFilters.push(!1)});var d=h.val(),e=[];d&&""!==d&&(e=d.split(","));i.each(e,function(b,c){a.platformFilters[c]=g.getStandardPlatform(b)});return a};d.applyListJSFiltering=function(a){var b=d.getFilters(),c=!1;a.filter(function(a){var e=d.releaseDateFilter(a.releaseDate,b.releaseDateFilters),f=d.metascoreFilter(a.metascore,b.metascoreFilters),g=d.platformFilter(a.platform,b.platformFilters),h=d.gameStatusFilter(a.gameStatus,b.gameStatusFilters),a=d.playStatusFilter(a.playStatus,
b.playStatusFilters);if(e&&f&&g&&a&&h)return!0;c=!0;return!1});return c};d.applyIsotopeFiltering=function(a,c,e){var f=d.getFilters(),g=!1,h=b(".gridItem").filter(function(){var a=b(this),c=a.find(".releaseDate").text(),c=d.releaseDateFilter(c,f.releaseDateFilters),e=a.find(".metacriticScore").text(),e=d.metascoreFilter(e,f.metascoreFilters),h=a.find(".platform .data").text(),h=d.platformFilter(h,f.platformFilters),i=a.find(".gameStatus").text(),i=d.gameStatusFilter(i,f.gameStatusFilters),a=a.find(".playStatus").text(),
a=d.playStatusFilter(a,f.playStatusFilters);if(c&&i&&a&&e&&h)return!0;g=!0;return!1});a.isotope({filter:h,sortBy:c,sortAscending:e});return g};d.resetFilters=function(){n.find("button").each(function(){b(this).removeClass("active")});c.find("button").each(function(){b(this).removeClass("active")});l.find("button").each(function(){b(this).removeClass("active")});m.find("button").each(function(){b(this).removeClass("active")});h.val([""]).trigger("change")};d.upcomingQuickFilter=function(){n.find('button[data-content="0"]').addClass("active")};
d.newReleasesQuickFilter=function(){n.find('button[data-content="1"]').addClass("active")};d.neverPlayedQuickFilter=function(){m.find('button[data-content="0"]').addClass("active")};d.gamesPlayingQuickFilter=function(){m.find('button[data-content="1"]').addClass("active")};d.gamesPlayedQuickFilter=function(){m.find('button[data-content="2"]').addClass("active")};d.finishedGamesQuickFilter=function(){m.find('button[data-content="3"]').addClass("active")};d.ownedGamesQuickFilter=function(){l.find('button[data-content="1"]').addClass("active")};
d.wantedGamesQuickFilter=function(){l.find('button[data-content="3"]').addClass("active")};d.platformQuickFilter=function(a){h.val(a).trigger("change")};d.releaseDateFilter=function(a,b){var c=b[0],d=b[1],f=null,f="1900-01-01"===a?e().add("days",1):e(a,"YYYY-MM-DD"),g=e(),f=f.diff(g,"seconds");return c&&d||!c&&!d||c&&0<f||d&&0>f?!0:!1};d.gameStatusFilter=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3];return c&&d&&e&&f||!c&&!d&&!e&&!f||c&&"0"===a||d&&"1"===a||e&&"2"===a||f&&"3"===a?!0:!1};d.playStatusFilter=
function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3];return c&&d&&e&&f||!c&&!d&&!e&&!f||c&&"0"===a||d&&"1"===a||e&&"2"===a||f&&"3"===a?!0:!1};d.metascoreFilter=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=parseInt(a,10);return c&&d&&e&&f&&g&&h&&i||!c&&!d&&!e&&!f&&!g&&!h&&!i||c&&90<=j||d&&80<=j&&90>j||e&&70<=j&&80>j||f&&60<=j&&70>j||g&&50<=j&&60>j||h&&25<=j&&50>j||i&&0<=j&&25>j?!0:!1};d.platformFilter=function(a,b){if(0===b.length)return!0;for(var c=0,d=b.length;c<d;c++)if(b[c].name===
a)return!0;return!1}})(tmz.module("filterPanel"),tmz,$,_,moment);(function(d,f,b,i,e,g){var a=0,n=null,l=0,m=0,c=0,h=[],p=null,o=i("#video-modal");i("#videoListContainer");var q=i("#videoList");i("#videoPlayer");var t=i("#videoListNavigation"),y=t.find(".navigateLeft"),u=t.find(".navigateRight"),k=t.find(".pageNumber"),v=e.template(i("#video-results-template").html());d.init=function(){p=f("videoPlayer");d.createEventHandlers();o.modal({backdrop:!0,show:!1})};d.createEventHandlers=function(){q.on("click","li",function(a){a.preventDefault();a=i(this).attr("data-id");
j(Number(a));p.play()});y.click(function(){var b=z();0<a?s(--a):s(b)});u.click(function(){var b=z();a<b?s(++a):s(0)});o.on("hidden",function(){p.pause()});p.addEvent("ended",x)};d.showVideoPanel=function(){i("html, body").scrollTop(0);o.modal("show");p.play()};d.renderVideoModal=function(b){h=i.extend(!0,[],b);if(0!==h.length){l=h.length;n=null;m=0;for(var b=h,c=0,d=b.length;c<d;c++){b[c].publishDate=g(b[c].publish_date,"YYYY-MM-DD").calendar();delete b[c].publish_date;var e=Math.floor(b[c].length_seconds/
60),f=(b[c].length_seconds%60).toString();1===f.length&&(f="0"+f);delete b[c].length_seconds;b[c].runningTime=e+":"+f}q.html(v({videoResults:h}));j(0);a=0;s(0);q.find("a").popover({placement:"top",animation:!0});t.show()}5>=h.length&&t.hide()};var x=function(){m===l-1?m=0:m++;j(m);0===m%5&&s(Math.floor(m/5));p.play()},j=function(a){m=a;var b=h[a].url,d=q.find('li[data-id="'+a+'"]');q.find('li[data-id="'+c+'"]').removeClass("playing");d.addClass("playing");b=b.split(".");p.src("http://media.giantbomb.com/video/"+
b[0]+"_3500."+b[1]);c=a},z=function(){n||(n=Math.ceil(l/5)-1);return n},s=function(b){var c=-(91*b);a=b;q.stop().animate({top:c},250,function(){});k.text(Number(b+1)+" / "+Number(z()+1))}})(tmz.module("videoPanel"),_V_,tmz,jQuery,_,moment);(function(d,f,b,i,e){var g=f.module("utilities"),a="accessory;case;codes;combo;console;controller;covers;face plate;faceplate;head set;headset;import;japan;kit;map;membership;new;pack;poster;pre-paid;set;shell;skin;software;stylus;wireless".split(";"),n=f.api+"amazon/search/",l=f.api+"amazon/detail/",m={},c={},h={},p={},o=null,q=0;d.searchAmazon=function(a,c,d,e){encodeURIComponent(a);a={keywords:a,browse_node:c,search_index:"VideoGames",response_group:"ItemAttributes,Images",page:1};o&&o.abort();
var f=++q;o=b.ajax({url:n,type:"GET",data:a,dataType:"xml",cache:!0,success:function(a){f===q&&(o=null,d(a))},error:e})};d.parseAmazonResultItem=function(b){var c="("+a.join("|")+")",c=RegExp(c,"i"),d={name:b.find("Title").text(),platform:b.find("Platform").text()};c.test(d.name)||""===d.platform?d.isFiltered=!0:(d.id=b.find("ASIN").text(),d.asin=b.find("ASIN").text(),d.gbombID=0,d.smallImage=b.find("ThumbnailImage > URL:first").text()||"",d.thumbnailImage=b.find("MediumImage > URL:first").text()||
"",d.largeImage=b.find("LargeImage > URL:first").text()||"",d.description=b.find("EditorialReview > Content:first").text()||"",d.releaseDate=b.find("ReleaseDate").text()||"1900-01-01",d.platform=g.matchPlatformToIndex(d.platform).name,d.calendarDate="1900-01-01"!==d.releaseDate?e(d.releaseDate,"YYYY-MM-DD").calendar():"Unknown");return d};d.getAmazonItemDetail=function(a,d,e){var f=u(a);f?d(f):(i.has(p,a)||(p[a]=[]),p[a].push(d),1===p[a].length&&b.ajax({url:l,type:"GET",data:{asin:a,response_group:"Medium"},
dataType:"xml",cache:!0,success:function(b){i.each(p[a],function(d){c[a]=b;d(b)});p[a]=[]},error:e}))};d.getAmazonItemOffers=function(a,c,d,e){var f=y(a);f?(c.offers=f,d(f)):(i.has(h,a)||(h[a]=[]),h[a].push(d),1===h[a].length&&b.ajax({url:l,type:"GET",data:{asin:a,response_group:"OfferFull"},dataType:"xml",cache:!0,success:function(b){i.each(h[a],function(d){var e=k(b,c);m[a]=e;d(e)});h[a]=[]},error:e}))};var t=function(a){for(var b=null,c=null,d=0,e=a.offers.length;d<e;d++)"now"===a.offers[d].availability&&
(b=a.offers[d].price,c=a.offers[d].rawPrice);b=b||a.lowestNewPrice;"Too low to display"===b&&(b="n/a",c=0);"Too low to display"===a.lowestNewPrice&&(a.lowestNewPrice="n/a");a.buyNowPrice=b;a.buyNowRawPrice=c},y=function(a){var b=null;"undefined"!==typeof m[a]&&(b=m[a]);return b},u=function(a){var b=null;"undefined"!==typeof c[a]&&(b=c[a]);return b},k=function(a,c){var d={};b("Item",a).each(function(){d=v(b(this))});return c.offers=d},v=function(a){var c={},d={},e=/\$/;c.lowestNewPrice=a.find("LowestNewPrice FormattedPrice").text().replace(e,
"");c.lowestUsedPrice=a.find("LowestUsedPrice FormattedPrice").text().replace(e,"");c.totalNew=a.find("TotalNew").text();c.totalUsed=a.find("TotalUsed").text();c.totalOffers=a.find("TotalOffers").text();c.offersURL=a.find("MoreOffersUrl").text();c.offersURLNew=a.find("MoreOffersUrl").text()+"&condition=new";c.offersURLUsed=a.find("MoreOffersUrl").text()+"&condition=used";c.productURL=c.offersURL.replace(/offer-listing/gi,"product");c.offers=[];b("Offer",a).each(function(){d={};d.price=b(this).find("Price FormattedPrice").text().replace(e,
"");d.rawPrice=b(this).find("Price Amount").text();d.availability=b(this).find("AvailabilityType").text();d.freeShipping=b(this).find("IsEligibleForSuperSaverShipping").text();c.offers.push(d)});t(c);return c}})(tmz.module("amazon"),tmz,jQuery,_,moment);(function(d,f,b,i,e){f.module("amazon");var g=f.api+"giantbomb/search/",a=f.api+"giantbomb/detail/",n={},l={},m={},c={};d.searchGiantBomb=function(a,c,d){encodeURIComponent(a);b.ajax({url:g,type:"GET",data:{field_list:"id,name,original_release_date,image",keywords:a,page:0},dataType:"json",cache:!0,success:c,error:d})};d.parseGiantBombResultItem=function(a){var b={id:a.id,asin:0,gbombID:a.id,name:a.name,platform:"n/a"};b.releaseDate=a.original_release_date&&""!==a.original_release_date?a.original_release_date.split(" ")[0]:
"1900-01-01";b.calendarDate="1900-01-01"!==b.releaseDate?e(b.releaseDate,"YYYY-MM-DD").calendar():"Unknown";b.smallImage=a.image&&a.image.small_url&&""!==a.image.small_url?a.image.small_url:"no image.png";b.thumbnailImage=a.image&&a.image.thumb_url&&""!==a.image.thumb_url?a.image.thumb_url:"no image.png";b.largeImage=a.image&&a.image.super_url&&""!==a.image.super_url?a.image.super_url:"no image.png";b.description=a.description&&""!==a.description?a.description:"No Description";return b};d.getGiantBombItemPlatform=
function(a,b,c){h(a,["platforms"],function(c){b(c,a)},c)};d.getGiantBombItemData=function(a,b,c){var d=p(a);d?b(d):(i.has(m,a)||(m[a]=[]),m[a].push(b),1===m[a].length&&h(a,["description","site_detail_url","videos"],function(b){i.each(m[a],function(c){n[a]=b.results;c(b.results)});m[a]=[]},c))};d.getGiantBombItemDetail=function(a,b,d){var e=o(a);e?b(e):(i.has(c,a)||(c[a]=[]),c[a].push(b),1===c[a].length&&h(a,["id","name","original_release_date","image"],function(b){i.each(c[a],function(c){l[a]=b.results;
c(b.results)});c[a]=[]},d))};var h=function(c,d,e,f){c={field_list:d.join(","),id:c};b.ajax({url:a,type:"GET",data:c,dataType:"json",cache:!0,success:e,error:f})},p=function(a){var b=null;"undefined"!==typeof n[a]&&(b=n[a]);return b},o=function(a){var b=null;"undefined"!==typeof l[a]&&(b=l[a]);return b}})(tmz.module("giantbomb"),tmz,jQuery,_,moment);(function(d,f,b,i){f.module("amazon");var e=f.module("itemLinker"),g=f.module("itemData"),a=f.api+"metacritic/search/",n=f.api+"metacritic/cache/",l={},m={};d.getMetascore=function(d,e,f,k){var o=h(e.asin,e.gbombID,e.platform);if(o)e.metascore=o.metascore,e.metascorePage=o.metascorePage,k(e);else{var n=d+"_"+e.platform;i.has(m,n)||(m[n]=[]);m[n].push(k);if(1===m[n].length){var j=c(d),d={keywords:encodeURI(j),platform:encodeURI(e.platform)};b.ajax({url:a,type:"GET",data:d,cache:!0,success:function(a){var b=
e.metascore;p(j,a,e);!f&&e.metascore!=b&&g.updateMetacritic(e);i.each(m[n],function(a){var b=e.asin,c=e.gbombID,d=e.platform;"0"!=b&&(l[b+"_"+d]={metascorePage:e.metascorePage,metascore:e.metascore});"0"!=c&&(l[c+"_"+d]={metascorePage:e.metascorePage,metascore:e.metascore});a(e)});m[n]=[]}})}}};d.displayMetascoreData=function(a,c,d){var d=b(d),e=c,f="favorable";0>c?(e="n/a",f="unavailable"):50>c?f="unfavorable":75>c&&(f="neutral");d.html(e).removeClass("unavailable").removeClass("unfavorable").removeClass("neutral").removeClass("favorable").addClass(f).attr("href",
"http://www.metacritic.com"+a).attr("data-score",c).attr("data-original-title","metacritic.com "+a).show();d.tooltip({placement:"left"})};var c=function(a){var b=/\s*[:&]\s*/g,a=a.replace(b," "),b=/\s/g;return a=a.replace(b,"+")},h=function(a,b,c){var d=null;"undefined"!==typeof l[a+"_"+c]?d=l[a+"_"+c]:"undefined"!==typeof l[b+"_"+c]&&(d=l[b+"_"+c]);return d},p=function(a,b,c){var d=null;"undefined"===typeof b.metascore?(d=q(b,c))&&o(a,c.platform,d.metascore,d.metascorePage):d=b;d&&""!==d.metascore?
(c.metascore=d.metascore,c.displayMetascore=d.metascore,c.metascorePage=d.metascorePage):d?(c.metascore=-1,c.displayMetascore="n/a",c.metascorePage=d.metascorePage):(c.metascore=-1,c.displayMetascore="n/a",c.metascorePage="")},o=function(a,c,d,e){a={keywords:encodeURI(a),platform:encodeURI(c),metascore:encodeURI(d),metascorePage:encodeURI(e)};b.ajax({url:n,type:"GET",data:a,cache:!0,success:function(){}})},q=function(a,c){var d=b("#main",a).find(".result"),f={},g=null,h=-99999,i=0;b(d).each(function(){var a=
new Date(b(this).find(".release_date .data").text()),d=a.getMonth()+1,d=10>d?"0"+d:d,l=a.getDate(),l=10>l?"0"+l:l;f={name:b(this).find(".product_title a").text(),releaseDate:a.getFullYear()+"-"+d+"-"+l,platform:b(this).find(".platform").text(),metascore:b(this).find(".metascore").text(),metascorePage:b(this).find(".product_title a").attr("href")};i=e.getSimilarityScore(c,f);i>h&&(g=f,h=i)});return g}})(tmz.module("metacritic"),tmz,jQuery,_);(function(d){tmz.module("user");tmz.module("utilities");var f=tmz.module("itemLinker"),b={};d.getWikipediaPage=function(d,a,n){var l=b[a.id];l&&"undefined"!==typeof l.wikipediaPage?n(l.wikipediaPage):i(d,function(d){var c=null;_.each(d,function(a){c=a});f.findWikipediaMatch(c,a,function(c){e(c.name,function(c){_.each(c.query.pages,function(c){l?l.wikipediaPage=c.fullurl:b[a.id]={wikipediaPage:c.fullurl};n(c.fullurl)})})})})};var i=function(b,a,d){$.ajax({url:"http://en.wikipedia.org/w/api.php?action=opensearch&format=json&callback=?",
type:"GET",data:{search:b,prop:"revisions",rvprop:"content"},dataType:"jsonp",cache:!1,crossDomain:!0,success:a,error:d})},e=function(b,a,d){$.ajax({url:"http://en.wikipedia.org/w/api.php?action=query&format=json&callback=?",type:"GET",data:{titles:b,prop:"info",inprop:"url"},dataType:"jsonp",cache:!1,crossDomain:!0,success:a,error:d})}})(tmz.module("wikipedia"));(function(d,f,b){var i=f.api+"popularlist/",e={};d.getPopularGamesListByPlatform=function(a,d){var f=g(a);f?d(f):b.ajax({url:i,type:"GET",data:{platform:a},cache:!0,success:function(b){e[a]=b;d(b)}})};var g=function(a){var b=null;"undefined"!==typeof e[a]&&(b=e[a]);return b}})(tmz.module("gameStats"),tmz,jQuery,_);(function(d,f,b){var i=f.api+"upcominglist/",e={};d.getUpcomingGames=function(a,d,f){var m=g(a,d);m?f(m):b.ajax({url:i,type:"GET",data:{platform:a,page:d},cache:!0,success:function(b){e[a+"_"+d]=b;f(b)}})};var g=function(a,b){var d=null;"undefined"!==typeof e[a+"_"+b]&&(d=e[a+"_"+b]);return d}})(tmz.module("ign"),tmz,jQuery,_);(function(d,f,b){var i=f.module("amazon"),e=f.module("giantbomb"),g=f.module("utilities");d.standardizeTitle=function(a){var b="",c=null,d=null,b=a.replace(/\S+ edition$/gi,""),b=b.replace(/\s*[\[\(].*[\)\]]/gi,""),c=RegExp("\\s*-.*","gi");(d=c.exec(b))&&3<d[0].length&&(b=b.replace(c,""));b=b.replace(/\swith\s.*/gi,"");b=b.replace(/^\s*the\s/gi,"");return b.toLowerCase()};d.getSimilarityScore=function(a,b){var c=0,e=d.standardizeTitle(b.name);if(a.standardName===b.name.toLowerCase())c+=50;else{var f=
RegExp(e,"gi"),e=RegExp(a.standardName,"gi").exec(e),f=f.exec(a.standardName);if(e&&0<e[0].length||f&&0<f[0].length)c+=5}"undefined"!==typeof b.releaseDate&&(a.releaseDate===b.releaseDate?c+=10:(f=Math.floor((Date.parse(a.releaseDate)-Date.parse(b.releaseDate))/864E5),!isNaN(f)&&"1900-01-01"!==b.releaseDate&&(c-=Math.abs(f/365))));"undefined"!==typeof b.platform&&(f=g.matchPlatformToIndex(b.platform).name,a.platform===f&&(c+=20));return c};d.convertRomanNumerals=function(a){var b=RegExp("\\s[XVI]+",
"gi"),c=b.exec(a);if(c&&0<c[0].length){var d=c[0],e=RegExp("III","gi"),f=e.exec(d),c="";f&&0<f[0].length&&(c=3,d=d.replace(e,""));d=d.split("");e=null;for(f=d.length-1;1<=f;f--){switch(d[f]){case "I":e=1;break;case "V":e=5;break;case "X":e=10}c=e<c?c-e:c+e}a=a.replace(b," "+c)}return a};d.findItemOnAlternateProvider=function(a,b,c){switch(b){case g.getProviders().Amazon:e.searchGiantBomb(a.standardName,function(b){for(var b=b.results,f={},g=null,i=-99999,m=0,n=0,u=b.length;n<u;n++)f=e.parseGiantBombResultItem(b[n]),
0===n&&(g=f),m=d.getSimilarityScore(a,f),m>i&&(g=f,i=m);0!==b.length&&c(g)});break;case g.getProviders().GiantBomb:b=0,"n/a"!==a.platform&&(b=g.getStandardPlatform(a.platform).amazon),i.searchAmazon(a.name,b,function(b){n(b,a,c,false)})}};d.getLinkedItemData=function(b,d,c){switch(d){case g.getProviders().Amazon:e.getGiantBombItemDetail(b.gbombID,function(a){a=e.parseGiantBombResultItem(a);c(a)});break;case g.getProviders().GiantBomb:i.getAmazonItemDetail(b.asin,function(b){a(b,c)})}};d.findWikipediaMatch=
function(a,b,c){for(var e={},f=null,g=-99999,i=0,n=0,y=a.length;n<y;n++)e={name:a[n]},0===n&&(f=e),i=d.getSimilarityScore(b,e),i>g&&(f=e,g=i);0!==a.length&&c(f)};var a=function(a,d){var c={};b("Item",a).each(function(){c=i.parseAmazonResultItem(b(this))});d(c)},n=function(a,e,c,f){b("Item",a);var g={},o=0,q=null,t=-99999,y=0;b("Item",a).each(function(){g=i.parseAmazonResultItem(b(this));"undefined"===typeof g.isFiltered&&(0===o&&(q=g),o++,y=d.getSimilarityScore(e,g),y>t&&(q=g,t=y))});q?c(q):f||i.searchAmazon(e.name,
0,function(a){n(a,e,c,!0)})}})(tmz.module("itemLinker"),tmz,jQuery,_);